/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.15
*/
zingchart.setModule("violin"),zingchart.plugins.violin={},zingchart.bind(null,"dataparse",function(e,t){var i,q,e=zingchart.getLoader(e.id),e=zingchart.getModules(e);if(-1!==ZC.AV(e,"violin"))for(i=0,q=t[ZC._[16]].length;i<q;i++){var n,r,l=t[ZC._[16]][i].type,o=t[ZC._[16]][i];if("scatter"===l)o.type="mixed",n="varea",r="scatter";else{if("hscatter"!==l)return t;o.type="hmixed",n="area",r="hscatter"}t[ZC._[16]][i]["plugin-type"]=l;for(var a={},s=(o.options&&(a=o.options.violin||o.options),ZC._todash_(a),o[ZC._[11]]||[]),h=s.length-1;0<=h;h--)s[h].cls&&"zc-violin"===s[h].cls?s.splice(h,1):s[h]["o-values"]&&(s[h][ZC._[5]]=[].concat(s[h]["o-values"]));var B=ZC._f_(ZC._c_(a.jitter,1)),c=ZC._f_(ZC._c_(a["rounding-factor"],1)),D=ZC._f_(ZC._c_(a["mean-factor"],2)),F=ZC._b_(ZC._c_(a.trim,!1)),p=[];for(h=0;h<s.length;h++){for(var u={},G=[],H=[],I=s[h][ZC._[5]]||[],J=[],_=[],v={},d=-Number.MAX_VALUE,g=Number.MAX_VALUE,C=0;C<I.length;C++){var Z,f=I[C];-1===ZC.AV(_,f[0])&&_.push(f[0]),Z=(c=c<=0?1:c)<1?(Z=1/c,Math.round(Z*f[1])/Z):c*Math.round(f[1]/c),v[f[0]+"/"+Z]=ZC._i_(v[f[0]+"/"+Z]||"0"),v[f[0]+"/"+Z]++,u[f[0]+"/"+Z]=u[f[0]+"/"+Z]||[],u[f[0]+"/"+Z].push(f[1])}s[h].violin&&ZC._todash_(s[h].violin);for(var m=.05*B,b=0;b<_.length;b++){var A,x=[],z=[],d=-Number.MAX_VALUE,g=Number.MAX_VALUE;for(A in v){var K=A.split("/"),M=ZC._f_(K[0]),y=ZC._f_(K[1]);if(_[b]===M){for(var k=v[A],V=0;V<k;V++)G.push(u[A][V]),H.push(M),J.push([M-m*k/2+V*m+m/2,y]);x.push([M-m*k/2-1.5*m,y]),z.push([M+m*k/2+1.5*m,y]),d=Math.max(d,y),g=Math.min(g,y)}}F||(x.push([_[b],g-(j=.2*(d-g))],[_[b],d+j]),z.push([_[b],g-j],[_[b],d+j])),x.sort(function(e,t){return e[1]-t[1]}),z.sort(function(e,t){return t[1]-e[1]});var L,E=[],N=[],U=0,X=Number.MAX_VALUE,w=-1;for(V=0;V<x.length;V++)0===V||V===x.length-1?(V===x.length-1&&-1!==w&&(L=z.length-w-1,E.push([x[w][0],x[w][1]]),N.push([z[L][0],z[L][1]])),L=z.length-V-1,E.push([x[V][0],x[V][1]]),N.push([z[L][0],z[L][1]])):(x[V][0]<X&&(X=x[V][0],w=V),U===D&&(L=z.length-w-1,E.push([x[w][0],x[w][1]]),N.push([z[L][0],z[L][1]]),U=0,X=Number.MAX_VALUE,w=-1),U++);F&&(E.unshift([_[b],g]),E.push([_[b],d]),N.unshift([_[b],g]),N.push([_[b],d]));var j={type:n,"ref-value":_[b],cls:"zc-violin","line-width":1,alpha:.25,"line-color":"#666","background-color":"#999",aspect:"spline",monotone:!1,values:E,marker:{type:"none"},"max-trackers":0,"max-nodes":0,"legend-item":{visible:!1},"legend-marker":{visible:!1}},O=(ZC._cp_(a.style,j),ZC._cp_(s[h].violin,j),p.push(j),{type:n,"ref-value":_[b],cls:"zc-violin","line-width":1,alpha:.25,"line-color":"#666","background-color":"#999",aspect:"spline",monotone:!1,values:N,marker:{type:"none"},"max-trackers":0,"max-nodes":0,"legend-item":{visible:!1},"legend-marker":{visible:!1}});ZC._cp_(a.style,O),ZC._cp_(s[h].violin,O),p.push(O)}s[h]["data-value"]=G,s[h]["data-key"]=H,s[h]["o-values"]=[].concat(s[h][ZC._[5]]),s[h].type=r,s[h][ZC._[5]]=J}o[ZC._[11]]=[].concat(p).concat(s)}return t}),zingchart.bind(null,"legend_item_click",function(e){var t=zingchart.getLoader(e.id),t=zingchart.getModules(t);-1!==ZC.AV(t,"violin")&&(t=zingchart.exec(e.id,"getplotlength"),zingchart.exec(e.id,e.visible?"hideplot":"showplot",{plotindex:2*(e.plotindex-2*t/3)}),zingchart.exec(e.id,e.visible?"hideplot":"showplot",{plotindex:2*(e.plotindex-2*t/3)+1}))});