/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.15
*/
zingchart.setModule("color-scale"),zingchart.plugins.colorscale={},zingchart.plugins.colorscale.info={},zingchart.plugins.colorscale.defaults={box:{},item:{placement:"default","font-size":10,color:"#33"},label:{"font-size":10,color:"#33"},guide:{"line-color":"#fff","line-width":1},cursor:{type:"diamond",size:4,"background-color":"#000"}},zingchart.bind(null,"complete",function(e){zingchart.plugins.colorscale.paint(e)}),zingchart.plugins.colorscale.paint=function(e){var a=zingchart.getLoader(e.id),G=zingchart.getModules(a);if(-1!==ZC.AV(G,"color-scale"))for(var l=0,K=a.AG.length;l<K;l++){var i=a.AG[l];if(i.o["color-scale"]){var c,r,j,t=zingchart.plugins.colorscale.defaults,o=i.o["color-scale"]||{},n=(o.guide=o.guide||{},o.aspect||"gradient"),s=o.intervals||4,h=o.layout||"v",g=o.color||"#369",p=o["max-percent"]||50,O=o.effect||"lighten",u=o.progression||"lin",_=ZC._f_(o["min-value"]||"0"),d=ZC._f_(o["max-value"]||"10"),f=o.steps||[],C=o.colors||[],B=o[ZC._[10]]||[],Z=ZC._b_(o.mirrored),z=(ZC._b_(o.map)&&(m=zingchart.maps.getMapByGraphIndex(e.id,i.L)._INFO_.choropleth)&&(n=m.aspect,s=m.intervals,g=m.color,p=m.maxPercent,O=m.effect,u=m.progression,_=m.minValue,d=m.maxValue,f=m.steps,C=m.colors,B=m[ZC._[10]],Z=m.mirrored),"v"===h?(o.margin=o.margin||"auto 10 auto auto",o[ZC._[19]]=o[ZC._[19]]||15,o[ZC._[20]]=o[ZC._[20]]||200,o["fill-angle"]=270):(o.margin=o.margin||"auto auto 35 auto",o[ZC._[19]]=o[ZC._[19]]||200,o[ZC._[20]]=o[ZC._[20]]||15,o["fill-angle"]=0),zingchart.getInstance(i,"box")),m=(z.append(t.box),z.append(o),z.parse(),"v"===h?z.F:z.I),x=[],Q=null;if("gradient"===n){var v=Math.max(2,Math.ceil(m/("v"===h?30:60)));if("log"===u){for((c=Math.floor(ZC.FU(_,10)))===(r=Math.ceil(ZC.FU(d,10)))&&r++,A=c;A<=r;A+=1)x.push(Math.pow(10,A));if(x.length>v&&x.length%2==1)for(A=x.length-1;0<=A;A--)A%2==1&&x.splice(A,1)}else{for(var y=ZC.AQ.WI(_,d),V=0;.5<(y[1]-d)/y[2]&&V<10;)y=ZC.AQ.WI(_,d,Math.round(y[2]/2)),V++;for(Q=y[3]<0?-y[3]:null,0===y[3]&&y[2]<1&&(Q=1),A=y[0];A<=y[1];A+=y[2])x.push(A);if(x.length>1.5*v){if(x.length%2==1)for(A=x.length-1;0<=A;A--)A%2==1&&x.splice(A,1);if(x.length>1.5*v)for(var W=!1;!W;){for(W=!0,x=[],A=(y=ZC.AQ.WI(_,d,2*y[2]))[0];A<=y[1];A+=y[2])x.push(A);x.length>1.5*v&&(W=!1)}}}}else{if(f.length)s=f.length-1;else if("lin"===u){for(var J=(d-_)/s,b=0;b<s;b+=1)f.push(_+b*J);f.push(d)}else{for((c=Math.floor(ZC.FU(_,10)))===(r=Math.ceil(ZC.FU(d,10)))&&r++,s=Math.max(1,r-c-1),b=c;b<=r;b+=1)f.push(Math.pow(10,b));j=p/s}if(!C.length)for(b=0;b<=s;b+=1)C.push("lighten"===O?ZC.AO.PP(g,b*j):ZC.AO.JR(g,b*j));x=[].concat(f)}for(var F=e.id+"_"+i.L,I=(zingchart.plugins.colorscale.info[F]={aspect:n,min:x[0],max:x[x.length-1],progression:u,layout:h,x:z.iX,y:z.iY,width:z.I,height:z.F,steps:f},0),N=0,M=zingchart.getInstance(i,"textbox"),A=0;A<x.length;A++)M.append(t.item),M.append(o.item),M.o.text=x[A],M.parse(),I=Math.max(I,M.I),N=Math.max(N,M.F);var X,Y=[],R=[];if(zingchart.exec(e.id,"removeobject",{graphid:i.K,type:"shape",cls:"zc-colorscale"}),zingchart.exec(e.id,"removeobject",{graphid:i.K,type:"label",cls:"zc-colorscale"}),"gradient"===n){var L={flat:!0,cls:"zc-colorscale"},n=g,p="lighten"===O?ZC.AO.PP(g,p):ZC.AO.JR(g,p);L[ZC._[0]]=n+" "+p,Z&&(L[ZC._[0]]=p+" "+n),ZC._cp_(z.o,L),L.id="colorscale_box",Y.push(L)}else for(b=0;b<s;b+=1)L={flat:!0,cls:"zc-colorscale"},ZC._cp_(z.o,L),L[ZC._[0]]=C[b],L.id="colorscale_box_"+b,"h"===h?(L.x=z.iX+b*z.I/s,L.y=z.iY,L[ZC._[19]]=z.I/s,L[ZC._[20]]=z.F):(L.x=z.iX,L.y=z.iY+z.F-(b+1)*z.F/s,L[ZC._[19]]=z.I,L[ZC._[20]]=z.F/s),ZC._cp_(o.marker,L),0===b&&(zingchart.plugins.colorscale.info[F].marker=[L[ZC._[19]],L[ZC._[20]]]),L.margin=null,Y.push(L),B[b]&&(X={flat:!0,cls:"zc-colorscale"},ZC._cp_(t.label,X),ZC._cp_(o.label,X),X.text=B[b],"h"===h?(X[ZC._[19]]=z.I/s,X.x=z.iX+b*z.I/s,X.y=z.iY):(X[ZC._[20]]=z.F/s,X.x=z.iX+z.I+5,X.y=z.iY+z.F-(b+1)*z.F/s),X.id="colorscale_label_"+b,Y.push(X));var k,q=m/(x.length-1),D=[];for(A=0;A<x.length;A++){var P={flat:!0,cls:"zc-colorscale"},U=(ZC._cp_(t.item,P),ZC._cp_(o.item,P),w={decimals:Q,"short":!0,"thousands-separator":",","decimals-separator":"."},"log"===u&&(U=Math.floor(ZC.FU(x[A],10)),w.decimals=U<0?-U:0),ZC._cp_(o.item,w),zingchart.formatNumber(x[A],w)),w=ZC._i_(o.guide[ZC._[21]]||("v"===h?z.I:z.F));"v"===h?(k=z.iY+z.F-q*A,D.push([z.iX,k],[z.iX+w,k],null),ZC._cp_({anchor:"l",width:I,align:"right",x:z.iX-I-5,y:k,text:U},P)):(k=z.iX+q*A,D.push([k,z.iY],[k,z.iY+w],null),ZC._cp_({anchor:"t",height:N,align:"center","vertical-align":"top",x:k,y:z.iY+z.F+5,text:U},P)),P.x-=i.iX,P.y-=i.iY,P.id="colorscale_item_"+A,Y.push(P)}Z={type:"line",flat:!0,cls:"zc-colorscale"},p=(ZC._cp_(t.guide,Z),ZC._cp_(o.guide,Z),Z.id="colorscale_guide",Z.points=D,R.push(Z),{flat:!0,visible:!1,cls:"zc-colorscale"}),n=(ZC._cp_(t.cursor,p),ZC._cp_(o.cursor,p),p.id="colorscale_cursor",zingchart.plugins.colorscale.info[F].marker?zingchart.plugins.colorscale.info[F].marker[0]:z.I),Z=zingchart.plugins.colorscale.info[F].marker?zingchart.plugins.colorscale.info[F].marker[1]:z.F;p.x=z.iX+n/2-i.iX,p.y=z.iY+Z/2-i.iY,R.push(p),zingchart.exec(e.id,"addobject",{graphid:i.K,type:"label",data:Y,dynamic:!0,update:!1}),zingchart.exec(e.id,"addobject",{graphid:i.K,type:"shape",dynamic:!0,data:R})}}},zingchart.plugins.colorscale.clear=function(e,a){e=e||"zc";var l=zingchart.getLoader(e);l&&(l=zingchart.getGraph(l,a[ZC._[3]]||"0"))&&zingchart.plugins.colorscale.info[e+"_"+l.L]&&zingchart.exec(e,"updateobject",{graphid:l.K,type:"shape",id:"colorscale_cursor",dynamic:!0,data:{visible:!1}})},zingchart.plugins.colorscale.AGM=function(e,a){if(null!==ZC._n_(a[ZC._[9]])){e=e||"zc";var l=zingchart.getLoader(e);if(l){l=zingchart.getGraph(l,a[ZC._[3]]||"0");if(l&&zingchart.plugins.colorscale.info[e+"_"+l.L]){var i,c,r=ZC._f_(a[ZC._[9]]),t=zingchart.plugins.colorscale.info[e+"_"+l.L];if("gradient"===t.aspect)c=(i="lin"===t.progression?(r-t.min)/(t.max-t.min):(ZC.FU(r,10)-ZC.FU(t.min,10))/(ZC.FU(t.max,10)-ZC.FU(t.min,10)),"h"===t.layout?t.x+i*t.width:t.y+t.height-i*t.height);else{var o=0;if(r===t.steps[t.steps.length-1])o=t.steps.length-2;else for(var n=0;n<t.steps.length-1;n++)r>=t.steps[n]&&r<t.steps[n+1]&&(o=n);i=("h"===t.layout?t.width:t.height)/(t.steps.length-1),c=t.marker?"h"===t.layout?t.x+i/2+i*o:t.y+t.height-i*o-i+t.marker[1]/2:"h"===t.layout?t.x+i/2+i*o:t.y+t.height-i*o+t.marker[0]/2}(a="h"===t.layout?{x:c-l.iX}:{y:c-l.iY}).visible=!0,("h"===t.layout&&(c<t.x||c>t.x+t.width)||"v"===t.layout&&(c<t.y||c>t.y+t.height))&&(a.visible=!1),zingchart.exec(e,"updateobject",{graphid:l.K,type:"shape",id:"colorscale_cursor",dynamic:!0,data:a})}}}},zingchart.extendAPI("colorscale.setvalue",function(e,a){zingchart.plugins.colorscale.AGM(e,a)}),zingchart.extendAPI("colorscale.update",function(e,a){var l;a.data&&(l=zingchart.getLoader(e))&&(l=l.CB(a[ZC._[3]]))&&l.o["color-scale"]&&(ZC._todash_(a.data),ZC._cp_(a.data,l.o["color-scale"]),zingchart.plugins.colorscale.paint({id:e,graphid:l.K}))}),zingchart.extendAPI("colorscale.clear",function(e,a){zingchart.plugins.colorscale.clear(e,a)}),zingchart.extendAPI("colorscale.getinfo",function(e,a){var l=zingchart.getLoader(e);if(l){a=l.CB(a[ZC._[3]]);if(a)return zingchart.plugins.colorscale.info[e+"_"+a.L]}return null});