/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.15
*/
zingchart.setModule("rankflow"),function(){ZC.ZCRankFlow=((a=function(){this.AF9="palette",this.C2="#6a921f",this.BP=[],this.KD=!1,this.AGQ=function(){for(var t=(16777215*Math.random()+1<<0).toString(16);t.length<6;)t="0"+t;return"#"+t}}).getDefaults=function(t){var e={};return ZC._cp_(a.B6,e),a.NS[t]&&ZC._cp_(a.NS[t],e),e},a.B6={},a.NS={light:{item:{bold:!0,color:"#808285"},"rank-side":{generated:!0,color:"#fff",bold:!0,"background-color":"#929497"},"rank-overall":{generated:!0,color:"#fff",bold:!0,"background-color":"#57585B"},flow:{generated:!0,shadow:!1}},dark:{item:{bold:!0,color:"#D1D3D4"},"rank-side":{generated:!0,color:"#fff",bold:!0,"background-color":"#929497"},"rank-overall":{generated:!0,color:"#fff",bold:!0,"background-color":"#57585B"},flow:{generated:!0,shadow:!1}},classic:{item:{bold:!0,color:"#D1D2D3"},"rank-side":{generated:!0,color:"#000",bold:!0,"background-color":"#999"},"rank-overall":{generated:!0,color:"#fff",bold:!0,"background-color":"#333"},flow:{generated:!0,shadow:!0}}},a);var a,j,O=0,E=0,p=null;zingchart.bind(null,"label_click",function(t){var e=zingchart.getLoader(t.id);if(e){e=zingchart.getGraph(e,t.graphid);if(e&&"rankflow"===e.o.type){if(!p){p={};for(var a=0;a<O;a++)p["s"+a]=!1}if("box_overall_"===t.labelid.substring(0,12)){for(var e=ZC._i_(t.labelid.split("_")[2]),e=(p["s"+e]=!p["s"+e],t),l=[],r=[],o=!1,n=0;n<O;n++)o=o||p["s"+n];for(n=0;n<O;n++){for(_=0;_<E;_++)l.push({id:"flow_"+n+"_"+_,alpha:p["s"+n]||!o?1:.25});r.push({id:"box_overall_"+n,alpha:p["s"+n]||!o?1:.25});for(var _=0;_<E;_++)r.push({id:"box_"+n+"_"+_,alpha:p["s"+n]||!o?1:.25,"text-alpha":p["s"+n]||!o?1:.25})}zingchart.exec(e.id,"updateobject",{type:"shape",graphid:e.graphid,data:l,update:!1}),zingchart.exec(e.id,"updateobject",{type:"label",graphid:e.graphid,data:r,update:!1}),zingchart.exec(e.id,"repaintobjects",{graphid:e.graphid})}}}}),zingchart.bind(null,"dataparse",function(L,t){for(var e,a,l=zingchart.getLoader(L.id),r=(zingchart.initThemes(l),ZC.ZCRankFlow.getDefaults(L.theme)),o=0,N=t[ZC._[16]].length;o<N;o++)if(t[ZC._[16]][o].type&&"rankflow"===t[ZC._[16]][o].type){for(var n,_,p=t[ZC._[16]][o].type,i=t[ZC._[16]][o],c=(ZC._todash_(i),{}),h=(i.options&&(c=i.options[p]||i.options),ZC._todash_(c),c.style||{}),d=zingchart.getGraphInfo(l,t,o),g=(i.shapes||(i.shapes=[]),i[ZC._[10]]||(i[ZC._[10]]=[]),j=new ZC.ZCRankFlow,!0),S=(null!==ZC._n_(p=c["global-ranking"])&&(g=ZC._b_(p)),null!==ZC._n_(p=c["color-type"])&&(j.AF9=p),null!==ZC._n_(p=c.color)&&(j.C2=ZC.AO.GD(p)),null!==ZC._n_(p=c.palette)&&(j.BP=p),null!==ZC._n_(p=c.flat)&&(j.KD=ZC._b_(p)),[]),C=[],Z=i[ZC._[50]]||{},s=(Z.item=i[ZC._[50]].item||{},(p=Z[ZC._[5]])&&(S=p),(p=Z[ZC._[10]])&&(C=p),i[ZC._[11]]),f=0;f<s.length;f++)s[f].rank=s[f].rank||f+"";s.sort(function(t,e){return t.rank-e.rank});var u=0,x=0,b=0,k=0,w=0;for(f=0;f<C.length;f++)(_={}).text=C[f],ZC._cp_(r.item,_),ZC._cp_(_,Z.item),(n=zingchart.getInstance(l,"textbox")).append(_),n.parse(),u=ZC.BR(u,n.I),b=ZC.BR(b,n.F);for(f=0;f<s.length;f++)R=s[f].style||{},_={text:s[f].text},ZC._cp_(h["item-flow"],_),ZC._cp_(R["item-flow"],_),(n=zingchart.getInstance(l,"textbox")).append(_),n.parse(),u=ZC.BR(u,n.I),x=ZC.BR(x,n.F);for(_={text:f,bold:!0},(n=zingchart.getInstance(l,"textbox")).append(_),n.parse(),_={generated:!0,text:f,bold:!0,width:2*(k=(k=ZC.BR(k,n.I))<x?x:k)},ZC._cp_(h["rank-overall"],_),(n=zingchart.getInstance(l,"textbox")).append(_),n.parse(),(w=ZC.BR(w,n.I))<x&&(w=x),O=s.length,E=ZC.BR(S.length,C.length),f=0;f<O;f++)a=s[f].ranks||[],E=ZC.BR(E,a.length);var v,y=[0,0,0,0],y=[0,0,0,0],m=(null!==ZC._n_(p=c.margin)&&(y=zingchart.getInstance(l,"box").m_(p,"all",d.plotarea.width,d.plotarea.height)),d.plotarea.x+=y[3],d.plotarea.y+=y[0],d.plotarea.width-=y[1]+y[3],d.plotarea.height-=y[0]+y[2],20),z=(null!==ZC._n_(p=c["sep-space"])&&(m=ZC._i_(p)),v=g?(d.plotarea.width-w-m-3*k-(E+1)*u)/(E-1):(m=0,(d.plotarea.width-3*k-E*u)/(E-1)),ZC._i_((d.plotarea.height-b-s.length*x)/(s.length+1)));if(null!==ZC._n_(p=c["col-space"])&&(v=ZC._i_(p)),null!==ZC._n_(p=c["row-space"])&&(z=ZC._i_(p)),F=d.plotarea.x,P=d.plotarea.y,0<b)for(_={generated:!0,bold:!0,text:"OVERALL<br>RANK",flat:!0},ZC._cp_(Z.item,_),ZC._cp_(h["label-overall"],_),ZC._cp_({x:F,y:P,width:w+u},_),g&&i[ZC._[10]].push(_),f=0;f<C.length;f++)F=d.plotarea.x+(g?w+u+m:0)+1.5*k+f*(u+v),P=d.plotarea.y,_={generated:!0,bold:!0},ZC._cp_(Z.item,_),ZC._cp_({x:F,y:P,width:u,flat:!0,text:C[f]},_),i[ZC._[10]].push(_);for(f=0;f<O;f++)F=d.plotarea.x+(g?w+u+m:0),P=d.plotarea.y+b+z+f*(x+z),_={},ZC._cp_(r["rank-side"],_),ZC._cp_(h["rank-left"],_),ZC._cp_({id:"rank_"+(f+1)+"_l",x:F,y:P,width:k,height:x,flat:!0,text:f+1},_),i[ZC._[10]].push(_),F=d.plotarea.x+(g?w+u+m:0)+2*k+E*(u+v)-v,_={},ZC._cp_(r["rank-side"],_),ZC._cp_(h["rank-right"],_),ZC._cp_({id:"rank_"+(f+1)+"_r",x:F,y:P,width:k,height:x,flat:!0,text:f+1},_),i[ZC._[10]].push(_),F=d.plotarea.x,_={},ZC._cp_(r["rank-overall"],_),ZC._cp_(h["rank-overall"],_),ZC._cp_({id:"rank_"+(f+1)+"_g",x:F,y:P,width:w,height:x,flat:!0,text:f+1},_),g&&i[ZC._[10]].push(_);for(f=0;f<s.length;f++){var B,R=s[f].style||{};for(B=j.C2,"palette"===j.AF9?B=0<j.BP.length?j.BP[f%j.BP.length]:zingchart.getPalette(l,f,"bar")[1]:"random"===j.AF9&&(B=j.AGQ()),F=d.plotarea.x+w,P=d.plotarea.y+b+z+f*(x+z),-1!==(s[f].ranks||-1)&&(_={generated:!0,"background-color":B,color:"#fff"},ZC._cp_(h["item-overall"],_),ZC._cp_(R["item-overall"],_),ZC._cp_({id:"box_overall_"+f,x:F,y:P,width:u,height:x,flat:j.KD,text:s[f].text},_),g)&&i[ZC._[10]].push(_),a=s[f].ranks,e=0;e<a.length;e++)if(null!==ZC._n_(a[e])){var D,I,A=[],F=d.plotarea.x+(g?w+u+m:0)+1.5*k+e*(u+v),P=d.plotarea.y+b+z+(a[e]-1)*(x+z),G=(null!==ZC._n_(a[e+1])?(G=d.plotarea.x+(g?w+u+m:0)+1.5*k+(e+1)*(u+v),D=d.plotarea.y+b+z+(a[e+1]-1)*(x+z),A.push([F,P]),A.push([F+u,P]),A.push([G,D]),A.push([G+u,D]),A.push([G+u,D+x]),A.push([G,D+x])):(A.push([F,P]),A.push([F+u,P])),A.push([F+u,P+x]),A.push([F,P+x]),{}),K=(G[ZC._[0]]=B,ZC._cp_(r.flow,G),ZC._cp_(i.plot,G),ZC._cp_(s[f],G),ZC._cp_(h.flow,G),ZC._cp_(R.flow,G),ZC._cp_({id:"flow_"+f+"_"+e,type:"poly",points:A,flat:!0,label:{visible:!1}},G),i.shapes.push(G),{"background-color":"#fff",color:"#333","border-width":1,"border-color":"#999",padding:10,text:"%text ranked on %rank at %scale-value"});for(I in ZC._cp_(h.tooltip,K),ZC._cp_(R.tooltip,K),K.text=K.text.replace(/%text/gi,s[f].text).replace(/%rank/gi,a[e]).replace(/%scale-value/gi,S[e]),s[f])-1!==I.indexOf("data-")&&(K.text=K.text.replace(new RegExp("%"+I,"g"),s[f][I][e]||""));_={generated:!0,color:"#fff"},ZC._cp_(h["item-flow"],_),ZC._cp_(R["item-flow"],_),ZC._cp_({id:"box_"+f+"_"+e,x:F,y:P,width:u,height:x,text:s[f].text,tooltip:K},_),i[ZC._[10]].push(_)}}}return t})}();