/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.15
*/
zingchart.setModule("tree"),function(){var Ue,Fe,Be,Qe,l,t;function qe(e){for(var t,i=[],n={},r=0;r<e.length;r++){var a,l,c,o,d=e[r],h=!0===d.visible;(d["start-point"]||d["end-point"])&&(c=(l=g(d.points))[0],o=l[1],a=l[2],l=l[3],c={specs:d["start-point"],id:d.id+"_startpoint",color:d["line-color"],lineWidth:d[ZC._[4]],tip:c,tail:o},o={specs:d["end-point"],id:d.id+"_endpoint",color:d["line-color"],lineWidth:d[ZC._[4]],tip:a,tail:l},d["start-point"]&&(!1===d.startSizeZero||d["start-point"]["allow-zero-nodes"])&&s(n,c),d["end-point"])&&(!1===d.endSizeZero||d["end-point"]["allow-zero-nodes"])&&s(n,o)}for(t in n)i.push(function(e,t){var i,n,r=[],a=(e.specs[ZC._[19]]||10)/2,l=e.specs.length||15;e.specs["allow-zero-nodes"];switch(e.specs.type){case"linearrow":n=!1,i=0;break;case"diamond":n=!0,l=(i=l)/2;break;case"triangle":n=!0,i=l;break;default:n=!0,i=.8*l}r.push([l,a]),r.push([0,0]),r.push([l,-a]),n&&(r.push([i,0]),r.push([l,a]));for(var a=Math.atan2(e.tail[1]-e.tip[1],e.tail[0]-e.tip[0]),c=Math.cos(-1*a),o=Math.sin(-1*a),d=0;d<r.length;d++){var h=r[d],s=c*h[0]+o*h[1],g=c*h[1]-o*h[0];h[0]=s+e.tip[0],h[1]=g+e.tip[1]}var a=e.specs[ZC._[61]]||e.color,p=e.specs[ZC._[0]]||e.color,_=e.specs[ZC._[62]]||e.lineWidth,t={id:e.id,cls:"zctreeshape",flat:!0,points:r,visible:t};n?(t.type="poly",t[ZC._[0]]=p,t[ZC._[61]]=a,t[ZC._[62]]=_):(t.type="line",t["line-color"]=a,t[ZC._[4]]=_);return t}(n[t],h));return i}function s(e,t){var i=t.tip[0].toString()+"_"+t.tip[1].toString()+"_"+t.tail[0].toString()+"_"+t.tail[1].toString();e[i]===undefined&&(e[i]=t)}function g(e){var t=e.length;return[e[0],e[1],e[t-1],e[t-2]]}function Oe(e,t,i,n,r){var a=g(e.points);e.startSizeZero=!t||!o(a[0],a[1],c(t,i),i.type),e.endSizeZero=!n||!o(a[2],a[3],c(n,r),r.type)}function Te(e,t,i){var n=g(e.points),t=r(t),i=r(i);e.startSizeZero=!o(n[0],n[1],[t.horzRadius,t.vertRadius],t.type),e.endSizeZero=!o(n[2],n[3],[i.horzRadius,i.vertRadius],i.type)}function r(e){var t,i;if(!e)return{horzRadius:10,vertRadius:10,type:"circle"};var n=e.type||"circle";switch(n){case"circle":case"square":t=ZC._i_(e.size),i=ZC._i_(e.size);break;case"rectangle":t=ZC._i_(e.width)/2,i=ZC._i_(e.height)/2;break;default:i=e[ZC._[21]]?(t=ZC._i_(e.size),ZC._i_(e.size)):(t=(ZC._i_(e[ZC._[19]])||0)/2,(ZC._i_(e[ZC._[20]])||0)/2)}return{horzRadius:t,vertRadius:i,type:n}}function c(e,t){var i,n;switch(t.type){case"circle":case"square":i=t.size,n=t.size;break;case"rectangle":i=e[0]/2,n=e[1]/2;break;default:n=t[ZC._[21]]?(i=t.size,t.size):(i=e[0]/2,e[1]/2)}return[i,n,e[2],e[3]]}function o(e,t,i,n){var r,a,l=i[0],c=i[1];i[2],i[3];function o(e){return!isNaN(e[0])&&!isNaN(e[1])}return e[1]==t[1]&&e[0]<=t[0]?e[0]+=l:e[1]==t[1]&&e[0]>t[0]?e[0]-=l:e[0]==t[0]&&e[1]<=t[1]?e[1]+=c:e[0]==t[0]&&e[1]>t[1]?e[1]-=c:"circle"===n?(i=Math.atan2(t[1]-e[1],t[0]-e[0]),e[0]+=Math.cos(-1*i)*l,e[1]-=Math.sin(-1*i)*l):(n=[e[0]-l,e[1]-c],i=[e[0]+l,e[1]-c],r=[e[0]-l,e[1]+c],c=[e[0]+l,e[1]+c],(o(a=d(n,i,e,t))||o(a=d(i,c,e,t))||o(a=d(c,r,e,t))||o(a=d(r,n,e,t)))&&(e[0]=a[0],e[1]=a[1])),0!=l}function d(e,t,i,n){var r=ZC.AQ.A5K(e,t,i,n),a=[NaN,NaN];return isNaN(r[0])||isNaN(r[1])||r[0]>Math.max(e[0],t[0])||r[0]<Math.min(e[0],t[0])||r[1]>Math.max(e[1],t[1])||r[1]<Math.min(e[1],t[1])||n[0]>i[0]&&r[0]<i[0]||n[0]<i[0]&&r[0]>i[0]||n[1]>i[1]&&r[1]<i[1]||n[1]<i[1]&&r[1]>i[1]?a:r}ZC.ZCVector||(ZC.ZCVector=function(e,t){this.fMagnitude=e,this.fDirection=t,this.fMagnitude<0&&(this.fMagnitude=-this.fMagnitude,this.fDirection=(180+this.fDirection)%360),this.fDirection<0&&(this.fDirection=360+this.fDirection)},ZC.ZCVector.add=function(e,t){var i=e.fMagnitude*Math.cos(Math.PI/180*e.fDirection),e=e.fMagnitude*Math.sin(Math.PI/180*e.fDirection),t=(i+=t.fMagnitude*Math.cos(Math.PI/180*t.fDirection),e+=t.fMagnitude*Math.sin(Math.PI/180*t.fDirection),Math.sqrt(Math.pow(i,2)+Math.pow(e,2))),e=0===t?0:180/Math.PI*Math.atan2(e,i);return new ZC.ZCVector(t,e)},ZC.ZCVector.sub=function(e,t){var i=e.fMagnitude*Math.cos(Math.PI/180*e.fDirection),e=e.fMagnitude*Math.sin(Math.PI/180*e.fDirection),t=(i-=t.fMagnitude*Math.cos(Math.PI/180*t.fDirection),e-=t.fMagnitude*Math.sin(Math.PI/180*t.fDirection),Math.sqrt(Math.pow(i,2)+Math.pow(e,2))),e=0===t?0:180/Math.PI*Math.atan2(e,i);return new ZC.ZCVector(t,e)},ZC.ZCVector.multiply=function(e,t){return new ZC.ZCVector(e.fMagnitude*t,e.fDirection)},ZC.ZCVector.prototype.toXY=function(){return[this.fMagnitude*Math.cos(Math.PI/180*this.fDirection),this.fMagnitude*Math.sin(Math.PI/180*this.fDirection)]},Ue=function(e,t){var i=e.x-t.x,e=e.y-t.y;return Math.sqrt(Math.pow(i,2)+Math.pow(e,2))},Fe=function(e,t){var i=e.x+(t.x-e.x)/2,t=e.y+(t.y-e.y)/2,i=i-e.x,t=t-e.y;return 0==i&&0==t?0:0==i?0<=t?90:270:0==t?0<=i?0:180:Math.atan2(t,i)*(180/Math.PI)},Be=function(e,t,i,n,r){var a=Math.max(Ue(t,i),1),e=Math.min(.99,e*(r||1))*(a-n),e=Math.max(e,-n),r=(e=Math.min(e,n),Fe(t,i));return new ZC.ZCVector(e,r)},Qe=function(e,t,i,n,r,a,l,c){var o=Math.max(Ue(t,i),1),d=t.size||1,h=i.size||1;return l||(d=h=1),(a=c?1:a)*n<o?new ZC.ZCVector(0,0):(l=-e*d*h/(o*o*r),l=Math.max(l,-n),l=Math.min(l,n),c=Fe(t,i),new ZC.ZCVector(l,c))},l=function(e){for(var t=zingchart.plugins.tree[e].data,i=Number.MAX_VALUE,n=-Number.MAX_VALUE,r=Number.MAX_VALUE,a=-Number.MAX_VALUE,l=0;l<t.length;l++)"link"===t[l].type?(r=Math.min(r,t[l][ZC._[9]]),a=Math.max(a,t[l][ZC._[9]])):(i=Math.min(i,t[l][ZC._[9]]),n=Math.max(n,t[l][ZC._[9]]));zingchart.plugins.tree[e].minValue=i,zingchart.plugins.tree[e].maxValue=n,zingchart.plugins.tree[e].minLinkValue=r,zingchart.plugins.tree[e].maxLinkValue=a},zingchart.plugins.tree=zingchart.plugins.tree||{},zingchart.plugins.tree.graph_defaults={plotarea:{margin:5},container:{padding:5},node:{type:"circle","border-width":1,"border-color":"#fff",tooltip:{text:"%text"},label:{"font-size":10,padding:1,color:"#000",text:"%text"}},link:{flat:!0,"line-color":"#999",alpha:.5,type:"line"}},zingchart.plugins.tree.orgchart_defaults={plotarea:{margin:10},container:{"tree-right":{padding:"20 60 20 60"},"tree-left":{padding:"20 60 20 60"},"tree-down":{padding:"20 60 20 60"},"tree-up":{padding:"20 60 20 60"}},node:{type:"rectangle",width:80,height:30,"border-width":1,"border-color":"#333","background-color":"#fff",label:{color:"#000",width:80,"font-size":10,align:"center",anchor:"c",text:"%text"}},link:{aspect:"split","line-color":"#999","line-width":1}},zingchart.plugins.tree.tree_defaults={plotarea:{margin:10},container:{"tree-radial":{padding:"120 120 120 120"},"tree-right":{padding:"20 120 20 40"},"tree-left":{padding:"20 40 20 120"},"tree-down":{padding:"40 20 120 20"},"tree-up":{padding:"120 20 40 20"}},link:{aspect:"arc","line-color":"#999","line-width":1},"node[collapsed]":{"border-width":1,"border-color":"#666"},node:{type:"circle",tooltip:{text:"%text:%value"},label:{"font-size":10,padding:1,width:100,color:"#000","clip-text":!0,text:"%text"},label_jsRule:function(e,t,i){var n,r,a,l={},c=ZC._i_(t.label.width)/2,o=null!==ZC._n_(t.width)?ZC._i_(t.width)/2:t.size,d=null!==ZC._n_(t.height)?ZC._i_(t.height)/2:t.size,h=Math.max(o,d);switch(i){case"tree-right":0===e.level?l["offset-y"]=-t.size-d:(l.anchor=e.children&&e.children.length?"r":"l",l["offset-x"]=e.children&&e.children.length?-5-o:5+o,l.align=e.children&&e.children.length?"right":"left");break;case"tree-left":0===e.level?l["offset-y"]=-t.size-d:(l.anchor=e.children&&e.children.length?"l":"r",l["offset-x"]=e.children&&e.children.length?5+o:-5-o,l.align=e.children&&e.children.length?"left":"right");break;case"tree-down":l.anchor="c",0===e.level?l["offset-y"]=-t.size-d:(l["offset-y"]=e.children&&e.children.length?-5-c-d:5+c+d,l.angle=91,l.align=e.children&&e.children.length?"right":"left",l["offset-x"]=e.children&&e.children.length?1:0);break;case"tree-up":l.anchor="c",0===e.level?l["offset-y"]=t.size+d:(l["offset-y"]=e.children&&e.children.length?5+c+d:-5-c-d,l.angle=271,l.align=e.children&&e.children.length?"right":"left",l["offset-x"]=e.children&&e.children.length?-1:0);break;case"tree-radial":if(0===e.level)l["offset-y"]=-t.size-d;else{for(var s=e.angle;360<s;)s-=360;for(;s<0;)s+=360;r=e.children&&e.children.length?(90<s&&s<270?(l.angle=s+180,l.align="left"):(l.angle=s,l.align="right"),n=ZC.AQ.BN(e.cx,e.cy,e.radius,s),ZC.AQ.BN(e.cx,e.cy,e.radius-(5+c+h),s)):(90<s&&s<270?(l.angle=s+180,l.align="right"):(l.angle=s,l.align="left"),n=ZC.AQ.BN(e.cx,e.cy,e.radius,s),ZC.AQ.BN(e.cx,e.cy,e.radius+(5+c+h),s)),l["offset-x"]=r[0]-n[0],l["offset-y"]=r[1]-n[1]}}for(a in l)null!==ZC._n_(t.label[a])&&delete l[a];return l}}},zingchart.bind(null,"dataparse",function(e,t){for(var i,n=0,r=t[ZC._[16]].length;n<r;n++)if(t[ZC._[16]][n].type&&"tree"===t[ZC._[16]][n].type){var a,l,c,o=t[ZC._[16]][n].type,d=(t[ZC._[16]][n]["plugin-type"]=o,t[ZC._[16]][n]),h=(zingchart.normalize(d),d.type="null",{}),s=(d.options&&(h=d.options[o]||d.options),ZC._todash_(h),d[ZC._[11]]=d[ZC._[11]]||[],h["text-attr"]||"text"),g=h["value-attr"]||ZC._[9],p=h["source-attr"]||"source",_=h["target-attr"]||"target",u=h.aspect||"tree-right",o=ZC._b_(ZC._c_(h["org-chart"],0));for(d.plotarea=d.plotarea||{},o?ZC._inj_(d.plotarea,zingchart.plugins.tree.orgchart_defaults.plotarea||{}):"graph"===u?ZC._inj_(d.plotarea,zingchart.plugins.tree.graph_defaults.plotarea||{}):ZC._inj_(d.plotarea,zingchart.plugins.tree.tree_defaults.plotarea||{}),d[ZC._[11]]instanceof Array||(a=[],l={},(c=function(e,t){var i=(e.text||e.name||e[s]).toLowerCase().replace(/[^a-z0-9_]+/gi,""),t=(l[i]?i+=l[i]++:l[i]=1,{id:i,text:e.text||e.name||e[s]||i,value:e[ZC._[9]]||e[ZC._[21]]||e[g],parent:t||""});if(a.push(t),e.children)for(var n=0;n<e.children.length;n++)c(e.children[n],i)})(d[ZC._[11]]),d[ZC._[11]]=a),V=0;V<d[ZC._[11]].length;V++)d[ZC._[11]][V].text=d[ZC._[11]][V].text||d[ZC._[11]][V].name||d[ZC._[11]][V][s]||"Node "+V,d[ZC._[11]][V][ZC._[9]]=d[ZC._[11]][V][ZC._[9]]||d[ZC._[11]][V][ZC._[21]]||d[ZC._[11]][V][g],d[ZC._[11]][V]["node-value"]=d[ZC._[11]][V][ZC._[9]],d[ZC._[11]][V].id||(d[ZC._[11]][V].text?d[ZC._[11]][V].id=d[ZC._[11]][V].text.toLowerCase().replace(/[^a-z0-9_]+/gi,""):d[ZC._[11]][V].id="node"+V),d[ZC._[11]][V].group=d[ZC._[11]][V].group||-1,"graph"!==u?(d[ZC._[11]][V].collapsed=!1,d[ZC._[11]][V].visible=!0):(d[ZC._[11]][V].text=d[ZC._[11]][V].text||d[ZC._[11]][V].name||d[ZC._[11]][V][s]||"Node "+V,(d[ZC._[11]][V].source||d[ZC._[11]][V].from||d[ZC._[11]][V][p])&&(d[ZC._[11]][V].target||d[ZC._[11]][V].to||d[ZC._[11]][V][_])?(d[ZC._[11]][V].source=d[ZC._[11]][V].source||d[ZC._[11]][V].from||d[ZC._[11]][V][p],d[ZC._[11]][V].target=d[ZC._[11]][V].target||d[ZC._[11]][V].to||d[ZC._[11]][V][_],d[ZC._[11]][V].type="link"):d[ZC._[11]][V].type="node"),"graph"===u&&d[ZC._[11]][V].parent&&""!==d[ZC._[11]][V].parent&&d[ZC._[11]].push({type:"link",source:d[ZC._[11]][V].id,target:d[ZC._[11]][V].parent,value:1});for(zingchart.plugins.tree[e.id]=zingchart.plugins.tree[e.id]||{},zingchart.plugins.tree[e.id].size=d[ZC._[11]].length,V=0;V<d[ZC._[11]].length;V++)if(d[ZC._[11]][V].idx=V,null!==ZC._n_(d[ZC._[11]][V].parent))for(z=0;z<d[ZC._[11]].length;z++)d[ZC._[11]][z].id===d[ZC._[11]][V].parent&&(d[ZC._[11]][V].pidx=z,d[ZC._[11]][z].children=d[ZC._[11]][z].children||[],d[ZC._[11]][z].children.push(V));else d[ZC._[11]][V].parent="";for(var Z=!0,C=[];Z;)for(Z=!1,V=0;V<d[ZC._[11]].length;V++)if(null!==ZC._n_(d[ZC._[11]][V].parent)&&(i=d[ZC._[11]][V].parent,-1===ZC.AV(C,i))){for(var f=0,x=!0,v=-1,z=0;z<d[ZC._[11]].length;z++)d[ZC._[11]][z].id===i&&(v=z,d[ZC._[11]][V].pidx=z),null!==ZC._n_(d[ZC._[11]][z].parent)&&d[ZC._[11]][z].parent===i&&(null!==ZC._n_(d[ZC._[11]][z][ZC._[9]])&&ZC._f_(d[ZC._[11]][z][ZC._[9]])+""==d[ZC._[11]][z][ZC._[9]]+""?f+=ZC._f_(d[ZC._[11]][z][ZC._[9]]):x=!1);x&&-1!==v&&(null!==ZC._n_(d[ZC._[11]][v][ZC._[9]])&&(d[ZC._[11]][v]["node-value"]=d[ZC._[11]][v][ZC._[9]]),d[ZC._[11]][v][ZC._[9]]=f,C.push(i),Z=!0)}for(V=0;V<d[ZC._[11]].length;V++)d[ZC._[11]][V][ZC._[9]]=d[ZC._[11]][V][ZC._[9]]||1,"graph"===u&&(d[ZC._[11]][V].container=d[ZC._[11]][V].container||0);for(var m=!0,b=Number.MAX_VALUE,y=-Number.MAX_VALUE,M=0;m;)for(m=!1,V=0;V<d[ZC._[11]].length;V++)"graph"===u&&"node"!==d[ZC._[11]][V].type||(b=Math.min(b,d[ZC._[11]][V][ZC._[9]]),y=Math.max(y,d[ZC._[11]][V][ZC._[9]])),null===ZC._n_(d[ZC._[11]][V].level)?d[ZC._[11]][V].sibling||null!==ZC._n_(d[ZC._[11]][V].parent)&&""!==d[ZC._[11]][V].parent?(v=d[ZC._[11]][V].pidx,null!==ZC._n_(v)?null===ZC._n_(d[ZC._[11]][v].level)?m=!0:(d[ZC._[11]][V].level=ZC._i_(d[ZC._[11]][v].level)+1,"graph"!==u&&(d[ZC._[11]][V].container=d[ZC._[11]][v].container)):d[ZC._[11]][V].container=d[ZC._[11]][V].level=0):(d[ZC._[11]][V].level=0,"graph"!==u&&(d[ZC._[11]][V].container=M),M++):(v=d[ZC._[11]][V].pidx,null!==ZC._n_(v)?d[ZC._[11]][V].container=d[ZC._[11]][v].container||0:d[ZC._[11]][V].container=0);if(zingchart.plugins.tree[e.id].minValue=b,zingchart.plugins.tree[e.id].maxValue=y,"graph"===u){for(var w=Number.MAX_VALUE,k=-Number.MAX_VALUE,V=0;V<d[ZC._[11]].length;V++)"link"===d[ZC._[11]][V].type&&(w=Math.min(w,d[ZC._[11]][V][ZC._[9]]),k=Math.max(k,d[ZC._[11]][V][ZC._[9]]));zingchart.plugins.tree[e.id].minLinkValue=w,zingchart.plugins.tree[e.id].maxLinkValue=k}d.plotarea=d.plotarea||{},ZC._inj_(d.plotarea,{margin:"10 10 10 10","mask-tolerance":[0,0]})}return t}),t=function(T){var o,J,W,Ze,G,K,H,$,d,ee,Ce,fe,xe,ve,U,F,L,X,E,B,Q,q,O,ze,te,ie,n,me,be,ye,l,c,Me,we,ne,re,ae,ke,Ve,Ae,Ne,Le,le,ce,oe,de,Xe,he,I,R,j,S,D,Ee,Ie,A,N,Re,je,Se,De,se,ge,pe,_e,Pe,P,Ye,Y,e,a,r,ue=zingchart.getLoader(T.loader.id),t=zingchart.getGraph(ue,T.graphid),i=t.o;"tree"===i["plugin-type"]&&(o=zingchart.getGraphInfo(ue,i,t.L).plotarea,G={},i.options&&(G=i.options.tree||i.options),ZC._todash_(G),K=G.palette||["#a7da47","#00b0e1","#ef4810","#f9c332","#84680a","#4d62b1","#00BAF2","#E80C60","#E2D51A","#9B26AF","#FB301E","#00AE4D","#20398B"],H=G.aspect||"tree-right",$=ZC._b_(ZC._c_(G["org-chart"],0)),d=G.layout||"x",ee=ZC._i_(ZC._c_(G.progression,"0")),Ce=ZC._i_(ZC._c_(G.aperture,"360")),fe=ZC._i_(ZC._c_(G["ref-angle"],"0")),xe=ZC._i_(ZC._c_(G["min-size"],4)),ve=ZC._i_(ZC._c_(G["max-size"],4)),U=ZC._i_(ZC._c_(G["min-link-width"],1)),F=ZC._i_(ZC._c_(G["max-link-width"],5)),L=ZC._f_(ZC._c_(G["attraction-constant"],.99)),X=ZC._i_(ZC._c_(G["repulsion-constant"],1e3)),E=ZC._i_(ZC._c_(G["repulsion-distance-factor"],20)),B=ZC._f_(ZC._c_(G["spring-length"],40)),Q=ZC._i_(ZC._c_(G["max-iterations"],1e3)),q=ZC._f_(ZC._c_(G["damping-step"],.005)),O=ZC._b_(ZC._c_(G["weighted-nodes"],0)),ze=ZC._b_(ZC._c_(G["weighted-links"],0)),te=Math.max(1,ZC._i_(ZC._c_(G["packing-factor"],1))),ie=Math.max(.1,ZC._f_(ZC._c_(G["depth-ratio"],2))),n=ZC._b_(ZC._c_(G["weighted-links"],0)),$&&(n=!0),zingchart.plugins.tree[T.id].data=[].concat(i[ZC._[11]]||[]),zingchart.plugins.tree[T.id].attractionConstant=L,zingchart.plugins.tree[T.id].repulsionConstant=X,zingchart.plugins.tree[T.id].springLength=B,me=function(e,t){var i=zingchart.plugins.tree[T.id].data;if(i[e].children)for(var n=0;n<i[e].children.length;n++)i[i[e].children[n]].coord+=t,me(i[e].children[n],t)},be=function(e){var t,i=zingchart.plugins.tree[T.id].data,n=!1,r=-1,a=-1;return null===ZC._n_(i[e].pidx)||0===(t=ZC.AV(i[i[e].pidx].children,e))?n=!0:(n=!1,a=i[i[e].pidx].children[r=t-1]),{first:n,prevSiblingIndex:r,prevIndex:a}},ye=function(e,t){var i=zingchart.plugins.tree[T.id].data,n=[];if(n.push(e),i[e].children&&i[e].children.length&&(t||!i[e].collapsed))for(var r=0;r<i[e].children.length;r++)n=n.concat(ye(i[e].children[r]));return n},l=function(e,t,i){var n=zingchart.plugins.tree[T.id].data,r=[];if(t){for(;n[e].children&&n[e].children.length&&!n[e].collapsed&&!n[e].fake;)e=n[e].children[0];for(;null!==ZC._n_(n[e].pidx);)(-1===i||n[e].level<=i)&&r.push(e),e=n[e].pidx}if(r.push(e),!t)for(;n[e].children&&n[e].children.length&&!n[e].collapsed&&!n[e].fake;)e=n[e].children[0],(-1===i||n[e].level<=i)&&r.push(e);return r},c=function(e,t,i){var n=zingchart.plugins.tree[T.id].data,r=[];if(t){for(;n[e].children&&n[e].children.length&&!n[e].collapsed&&!n[e].fake;)e=n[e].children[n[e].children.length-1];for(;null!==ZC._n_(n[e].pidx);)(-1===i||n[e].level<=i)&&r.push(e),e=n[e].pidx}if(r.push(e),!t)for(;n[e].children&&n[e].children.length&&!n[e].collapsed&&!n[e].fake;)e=n[e].children[n[e].children.length-1],(-1===i||n[e].level<=i)&&r.push(e);return r},Me=function(e){for(var t=zingchart.plugins.tree[T.id].data,i=Number.MAX_VALUE,n=0;n<e.length;n++)i=Math.min(i,t[e[n]].coord);return i},we=function(e){for(var t=zingchart.plugins.tree[T.id].data,i=-Number.MAX_VALUE,n=0;n<e.length;n++)i=Math.max(i,t[e[n]].coord);return i},ne=null,re=function(){var e=zingchart.plugins.tree[T.id].data;if(!ne)for(ne={},n=0;n<e.length;n++)ne[e[n].id]=e[n].idx;for(var t,i={},n=0;n<e.length;n++)e[n].reference&&(t=e[ne[e[n].reference]],i[e[n].reference]=i[e[n].reference]||1,e[n].coord=t.coord,e[n].level=t.level+i[e[n].reference],i[e[n].reference]+=1),e[n].sibling&&0===e[n].level&&(t=e[ne[e[n].sibling]],e[n].idx<t.idx?e[n].coord=t.coord-te:e[n].coord=t.coord+te);ke()},ke=function(){for(var e=zingchart.plugins.tree[T.id].data,t=0;t<e.length;t++)e[t].visible&&(ae=Math.max(ae,i[ZC._[11]][t].level))},Ve=function(e,t){var i=zingchart.plugins.tree[T.id].data;if(i[e].visible&&(i[e].reference?i[e].coord=0:i[e].coord=t*te,i[e].children))for(var n=0;n<i[e].children.length;n++)Ve(i[e].children[n],n*te)},Ae=function(e){var t=zingchart.plugins.tree[T.id].data;if(t[e].visible&&!t[e].reference){var i,n=be(e),r=n.first,n=n.prevIndex;if(r||(r=c(n,!1,-1),n=l(e,!1,-1),r=we(r),i=0,(n=Me(n))<=r&&(t[e].coord+=i=r-n+te,me(e,i))),t[e].children&&t[e].children.length&&!t[e].collapsed)for(var a=0;a<t[e].children.length;a++)Ae(t[e].children[a])}},Ne=function(e){var t=zingchart.plugins.tree[T.id].data;if(t[e].visible&&t[e].children&&!t[e].collapsed){for(var i=t[e].children.length,n=t[e].children[0],i=t[e].children[i-1],n=(t[n].coord+t[i].coord)/2,r=t[e].coord-n,a=0;a<t.length;a++)t[a].sibling===t[e].id&&(t[a].coord-=r);t[e].coord=n}},Le=function(e,t){var i=0,n="r";return e.children&&e.children.length?t.children&&t.children.length||(n="l",t.coord-e.coord>te&&(t.coord=e.coord+te,i++)):t.children&&t.children.length?(n="r",t.coord-e.coord>te&&(e.coord=t.coord-te,i++)):t.coord-e.coord>te&&("r"===n?e.coord=t.coord-te:t.coord=e.coord+te,i++),i},le=[],ce=[],oe=[],de=[],I=[],R=[],j={},S={},D={},Ee=1,A="",je={},De=Se=!(Re=!(N=[Ie=ae=0,0])),e=zingchart.getInstance(t,"textbox"),$?e.append(zingchart.plugins.tree.orgchart_defaults.container[H]):"graph"===H?e.append(zingchart.plugins.tree.graph_defaults.container):e.append(zingchart.plugins.tree.tree_defaults.container[H]),e.append(G.container),e.parse(),se=e.FJ,ge=e.FO,pe=e.FX,_e=e.ER,Pe=function(e){if(le=[],1<e)for(var t,i=-1,n=-1,r=("h"===d?(i=1,n=e):"v"===d?(i=e,n=1):-1!==d.indexOf("x")&&(""!==(t=d.split("x"))[0]&&(i=ZC._i_(t[0])),""!==t[1]&&(n=ZC._i_(t[1])),-1===i&&-1===n?i=n=Math.ceil(Math.sqrt(e)):-1===i&&-1!==n?i=Math.ceil(e/n):-1!==i&&-1===n&&(n=Math.ceil(e/i))),o.width/n),a=o.height/i,l=0;l<i;l++)for(var c=0;c<n;c++)le[l*n+c]={x:o.x+c*r,y:o.y+l*a,width:r,height:a};else le[0]={x:o.x,y:o.y,width:o.width,height:o.height}},zingchart.plugins.tree[T.id].bFirstRender=!0,P={},Ye=function(e){if(ue.SY=[],L=zingchart.plugins.tree[T.id].attractionConstant,X=zingchart.plugins.tree[T.id].repulsionConstant,B=zingchart.plugins.tree[T.id].springLength,!e||(Ee=1,Ie=0,!Re)){Re=!0;var t,i=zingchart.plugins.tree[T.id].data,n=I.length,r=R.length,a=0,l=0,c=[],o=(""!==A&&(i[j[A]].x=N[0],i[j[A]].y=N[1]),[]);for(J=0;J<n;J++)if((k=i[I[J]])&&(t=le[k.container],o[k.container]||(o[k.container]={minX:Number.MAX_VALUE,minY:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,maxY:-Number.MAX_VALUE}),k.id!==A)){for(var d,h,s={x:t.x+t.width/2,y:t.y+t.height/2},g={x:t.x+t.width/2,y:t.y+t.height/2},p=B,_=1,u="",s=(null!==ZC._n_(k.level)&&0<k.level&&20<p&&(p=Math.round(Math.max(20,p-5*k.level))),new ZC.ZCVector(Ue(s,k),Fe(s,k))),Z=new ZC.ZCVector(0,0),C=new ZC.ZCVector(0,0),f=0;f<n;f++)J!==f&&k.container===i[I[f]].container&&(_=1,d=p,u=k.id+"-"+i[I[f]].id,Y[u]&&(d=Y[u]),ze&&i[D[u]]&&zingchart.plugins.tree[T.id].maxLinkValue!==zingchart.plugins.tree[T.id].minLinkValue&&(_+=Math.round((F-U)*(i[D[u]].value-zingchart.plugins.tree[T.id].minLinkValue)/(zingchart.plugins.tree[T.id].maxLinkValue-zingchart.plugins.tree[T.id].minLinkValue))),h=Qe(X,k,i[I[f]],d,_,E,O,i[D[u]]?1:0),C=ZC.ZCVector.add(C,h));k.level&&(m=Qe(X,k,g,p,_,10*E,O,0),C=ZC.ZCVector.add(C,m));var Z=ZC.ZCVector.add(Z,C),x=!1,v=new ZC.ZCVector(0,0);if(S[k.id])for(f=0;f<S[k.id].length;f++){_=1,d=p,u=k.id+"-"+i[j[S[k.id][f]]].id,Y[u]&&(d=Y[u]),ze&&(_=U,zingchart.plugins.tree[T.id].maxLinkValue!==zingchart.plugins.tree[T.id].minLinkValue)&&(_+=Math.round((F-U)*(i[D[u]].value-zingchart.plugins.tree[T.id].minLinkValue)/(zingchart.plugins.tree[T.id].maxLinkValue-zingchart.plugins.tree[T.id].minLinkValue)));var z=Be(L,k,i[j[S[k.id][f]]],d,_);z.fMagnitude/=2,v=ZC.ZCVector.add(v,z),i[j[S[k.id][f]]].id===A&&(x=!0)}else var m=Be(L,k,g,p,1),v=ZC.ZCVector.add(v,m);S[k.id]?(v.fMagnitude>p/10||1<S[k.id].length)&&(v=ZC.ZCVector.multiply(v,Math.min(1,(x?2.5:1)/S[k.id].length))):v.fMagnitude=Math.min(5*(x?2.5:1),v.fMagnitude),k.cg&&(g=Be(999*L,k,k.cg,5,1),v=ZC.ZCVector.add(v,g)),Z=ZC.ZCVector.add(Z,v),Z=ZC.ZCVector.multiply(Z,Ee);g=(s=ZC.ZCVector.add(s,Z)).toXY(),Z=Ue(k,{x:t.x+t.width/2+g[0],y:t.y+t.height/2+g[1]});a+=Z,l=Math.max(l,Z),k.__x=t.x+t.width/2+g[0],k.__y=t.y+t.height/2+g[1]}for(J=0;J<n;J++)(k=i[I[J]]).id!==A&&(k.x=k.__x,k.y=k.__y),o[k.container].minX=Math.min(o[k.container].minX,k.x),o[k.container].maxX=Math.max(o[k.container].maxX,k.x),o[k.container].minY=Math.min(o[k.container].minY,k.y),o[k.container].maxY=Math.max(o[k.container].maxY,k.y);var b=0,y=[];for(J=0;J<o.length;J++)y[J]=1,o[J].maxX-o[J].minX>le[J].width&&(y[J]=Math.min(y[J],le[J].width/(o[J].maxX-o[J].minX))),o[J].maxY-o[J].minY>le[J].height&&(y[J]=Math.min(y[J],le[J].height/(o[J].maxY-o[J].minY))),o[J].diffX=le[J].x+le[J].width/2-(o[J].maxX+o[J].minX)/2,o[J].diffY=le[J].y+le[J].height/2-(o[J].maxY+o[J].minY)/2,b+=Ue({x:le[J].x+le[J].width/2,y:le[J].y+le[J].height/2},{x:(o[J].maxX+o[J].minX)/2,y:(o[J].maxY+o[J].minY)/2});var M,w,k,V={};for(J=0;J<n;J++)(k=i[I[J]]).cg||""!==A&&i[j[A]].container===k.container||(k.x+=o[k.container].diffX/B,k.y+=o[k.container].diffY/B),P[k.id]&&(k.x=P[k.id][0]||k.x,k.y=P[k.id][1]||k.y),1!==y[k.container]?(k._x_=le[k.container].x+le[k.container].width/2+(k.x-le[k.container].x-le[k.container].width/2)*y[k.container],k._y_=le[k.container].y+le[k.container].height/2+(k.y-le[k.container].y-le[k.container].height/2)*y[k.container]):(k._x_=k.x,k._y_=k.y),k._x_=Math.max(le[k.container].x,Math.min(le[k.container].x+le[k.container].width,k._x_)),k._y_=Math.max(le[k.container].y,Math.min(le[k.container].y+le[k.container].height,k._y_)),0<k._x_&&k._x_<1&&(k._x_=1.1),0<k._y_&&k._y_<1&&(k._y_=1.1),je[k.id]=[k._x_,k._y_],V={id:"node_"+k.id,x:k._x_,y:k._y_},15<=Ie&&(V.visible=Se),c.push(V);for(J=0;J<r;J++)(k=i[R[J]])&&(M=i[j[k.source]],w=i[j[k.target]],V={id:"link_"+M.id+"_"+w.id,points:[[M._x_,M._y_],[w._x_,w._y_]]},15<=Ie&&(V.visible=De),G.link["start-point"]&&(V["start-point"]=G.link["start-point"]),G.link["end-point"]&&(V["end-point"]=G.link["end-point"]),Te(V,M.cls?G["node[cls-"+M.cls+"]"]:G.node,w.cls?G["node[cls-"+w.cls+"]"]:G.node),c.push(V));zingchart.exec(T.id,"updateobject",{type:"shape",data:c.concat(qe(c))}),++Ie<15||Ie<Q&&(1<a&&.1<l||2<b)?(Ee=Math.max(.001,Ee-q),window.setTimeout(Ye,1)):Re=!1}},Y={},e=zingchart.plugins.tree[T.id]._render_graph_=function(){zingchart.exec(T.id,"removeobject",{type:"shape",cls:"zctreeshape"}),oe=[],de=[],I=[],R=[],j={},S={},D={};var e=zingchart.plugins.tree[T.id].data,t=!1,i=[],n=0;for(J=0;J<e.length;J++)((h=e[J]).parent||h.children)&&(t=!0),"node"===h.type?(I.push(J),j[h.id]=J,i[h.container]||(i[h.container]=[],n++),i[h.container].push(J)):(R.push(J),S[h.source]=S[h.source]||[],S[h.source].push(h.target),S[h.target]=S[h.target]||[],S[h.target].push(h.source),D[h.source+"-"+h.target]=J,D[h.target+"-"+h.source]=J);Pe(n);for(var r={},a=0;a<le.length;a++){var l=le[a];if(i[a]=i[a]||[],i[a].length){var c=[l.x+l.width/2,l.y+l.height/2];if(t)for(var o,d,h,s={},g=0;g<i[a].length;g++)(h=e[i[a][g]]).parent?(o=e[j[h.parent]])&&(d=r[o.id],d=ZC.AQ.BN(d[0],d[1],Math.max(25,60-5*o.level),s[h.parent]),r[h.id]=[d[0],d[1]],d=15,h.level<=1&&(d=360/Math.max(1,(o.children||[]).length)),s[h.id]||(s[h.id]=s[o.id],h.children&&1<o.children.length&&(s[h.id]-=15*(h.children.length-1)/2)),s[o.id]+=d):(r[h.id]=[c[0],c[1]],s[h.id]=1);else for(var p=Math.ceil(Math.sqrt(i[a].length)),_=Math.min(10,Math.round(l.width/p)),u=_*p,Z=Math.min(10,Math.round(l.height/p)),C=Z*p,f=0;f<p;f++)for(var x=0;x<p;x++){var v=f*p+x;v<i[a].length&&(r[e[i[a][v]].id]=[c[0]-u/2+x*_,c[1]-C/2+f*Z])}}}for(J=0;J<I.length;J++){h=e[I[J]],je[h.id]?(h.x=je[h.id][0],h.y=je[h.id][1]):(h.x=r[h.id][0],h.y=r[h.id][1]);var z,m=xe,b=(zingchart.plugins.tree[T.id].maxValue!==zingchart.plugins.tree[T.id].minValue&&(m+=Math.round((ve-xe)*(h.value-zingchart.plugins.tree[T.id].minValue)/(zingchart.plugins.tree[T.id].maxValue-zingchart.plugins.tree[T.id].minValue))),h.size=1+.5*m/ve,ZC._i_(-1!==h.group?h.group:h.level||"0")),y={};if(ZC._cp_(zingchart.plugins.tree.graph_defaults.node,y),ZC._cp_({id:"node_"+h.id,cls:"zctreeshape","background-color":K[b%K.length],size:m},y),ZC._cp_(G.node||{},y),ZC._cp_(G["node[group-"+h.group+"]"],y),ZC._cp_(G["node[container-"+h.container+"]"],y),h.cls)for(var M=h.cls.split(/\s/),w=0;w<M.length;w++)ZC._cp_(G["node[cls-"+M[w]+"]"],y);if(G.nodes&&G.nodes[h.id]&&ZC._cp_(G.nodes[h.id],y),y["js-rule"])try{var k=ZC.execFn(y["js-rule"].replace("javascript:","").replace("()",""),window,T.id,h,y);k&&ZC._cp_(k,y)}catch(E){}h.style&&ZC._cp_(h.style,y);b={decimals:null,"short":!1,"thousands-separator":",","decimals-separator":"."};if(ZC._cp_(y,b),y.label&&y.label.text){for(z in y.label.text=y.label.text.replace(/%text/gi,h.text).replace(/%node-value/gi,zingchart.formatNumber(h["node-value"],b)).replace(/%value/gi,zingchart.formatNumber(h.value,b)),h)"data-"===z.substring(0,5)&&(y.label.text=y.label.text.replace(new RegExp("%"+z,"g"),h[z]));y.label.text=y.label.text.replace(new RegExp("%data-([a-zA-Z0-9]+)","g"),"")}if(y.tooltip&&y.tooltip.text){for(z in ZC._cp_(y.tooltip,b),y.tooltip.text=y.tooltip.text.replace(/%text/gi,h.text).replace(/%node-value/gi,zingchart.formatNumber(h["node-value"],b)).replace(/%value/gi,zingchart.formatNumber(h.value,b)),h)"data-"===z.substring(0,5)&&(y.tooltip.text=y.tooltip.text.replace(new RegExp("%"+z,"g"),h[z]));y.tooltip.text=y.tooltip.text.replace(new RegExp("%data-([a-zA-Z0-9]+)","g"),"")}zingchart.plugins.tree[T.id].bFirstRender&&(null===ZC._n_(y.visible)||y.visible||(Se=!1),y.visible=!1),null!==ZC._n_(y.x)||null!==ZC._n_(y.y)?(P[h.id]=[0,0],null!==ZC._n_(y.x)?(y.x=ZC._i_(y.x),P[h.id][0]=y.x):y.x=h.x,null!==ZC._n_(y.y)?(y.y=ZC._i_(y.y),P[h.id][1]=y.y):y.y=h.y):(y.x=h.x,y.y=h.y),oe.push(y)}for(J=0;J<R.length;J++){h=e[R[J]];var V=e[j[h.source]],A=e[j[h.target]],N=U,L=(zingchart.plugins.tree[T.id].maxLinkValue!==zingchart.plugins.tree[T.id].minLinkValue&&(N+=Math.round((F-U)*(h.value-zingchart.plugins.tree[T.id].minLinkValue)/(zingchart.plugins.tree[T.id].maxLinkValue-zingchart.plugins.tree[T.id].minLinkValue))),{});if(ZC._cp_(zingchart.plugins.tree.graph_defaults.link,L),ZC._cp_({id:"link_"+V.id+"_"+A.id,cls:"zctreeshape","fast-vector-path":!0,"line-width":N,points:[[V.x,V.y],[A.x,A.y]]},L),ZC._cp_(G.link||{},L),ZC._cp_(G["link[group-"+V.group+"]"],L),ZC._cp_(G["link[container-"+V.container+"]"],L),ZC._cp_(G["link[source-"+V.id+"]"],L),ZC._cp_(G["link[target-"+A.id+"]"],L),h.cls&&ZC._cp_(G["link[cls-"+h.cls+"]"],L),L["js-rule"])try{var X=ZC.execFn(L["js-rule"].replace("javascript:","").replace("()",""),window,T.id,h,V,A,L);X&&ZC._cp_(X,L)}catch(E){}G.links&&G.links[V.id+"-"+A.id]&&ZC._cp_(G.links[V.id+"_"+A.id],L),zingchart.plugins.tree[T.id].bFirstRender&&(null===ZC._n_(L.visible)||L.visible||(De=!1),L.visible=!1),L.length&&(Y[V.id+"-"+A.id]=Y[A.id+"-"+V.id]=L.length),Te(L,V.cls?G["node[cls-"+V.cls+"]"]:G.node,A.cls?G["node[cls-"+A.cls+"]"]:G.node),de.push(L)}zingchart.exec(T.id,"addobject",{type:"shape",data:de.concat(qe(de)).concat(oe)}),zingchart.plugins.tree[T.id].bFirstRender=!1,window.setTimeout(function(){Ye(!0)},1)},a=function(){ue.SY=[],le=[],ce=[],oe=[],de=[];var e=zingchart.plugins.tree[T.id].data,j=[],t=[];for(J=0;J<e.length;J++)0!==e[J].level||e[J].sibling||(j.push(e[J]),t.push(J));ke();var i,n={};for(J=0;J<e.length;J++)n[e[J].container+"-"+e[J].level]=n[e[J].container+"-"+e[J].level]||[],n[e[J].container+"-"+e[J].level].push(e[J].idx);Pe(j.length);for(var r,a,S,l,c,o,d,h,s,g,p,_=0;_<le.length;_++)if(j[_]){for(J=0;J<t.length;J++)J===_&&Ve(t[J],J);for(re(),W=ae;0<=W;W--)if(n[_+"-"+W])for(J=0;J<n[_+"-"+W].length;J++)o=n[_+"-"+W][J],g=s=h=d=void 0,(g=zingchart.plugins.tree[T.id].data)[o].visible&&!g[o].reference&&g[o].children&&!g[o].collapsed&&(s=g[o].children.length,d=g[o].children[0],s=g[o].children[s-1],d=(g[d].coord+g[s].coord)/2,h=(s=be(o)).first,s=s.prevSiblingIndex,h?g[o].coord=d:(h=g[g[o].pidx].children[s],g[o].coord=g[h].coord+te,0!=(s=g[o].coord-d)&&me(o,s)));for(re(),J=0;J<t.length;J++)Ae(t[J]);for(re(),W=ae-1;0<=W;W--)if(n[_+"-"+W])for(J=0;J<n[_+"-"+W].length;J++)Ne(n[_+"-"+W][J]);if(re(),$){for(W=ae-1;0<=W;W--)if(n[_+"-"+W])for(var D=1,P=0;0<D&&P<128;){for(J=D=0;J<n[_+"-"+W].length;J++)D+=function(e){var t=zingchart.plugins.tree[T.id].data,i=0;if(t[e].visible&&t[e].children&&1<t[e].children.length&&!t[e].collapsed)for(var n=1;n<t[e].children.length;n++){var r=t[t[e].children[n]],a=t[t[e].children[n-1]];i+=Le(a,r)}return i}(n[_+"-"+W][J]);P++}re()}for(J=0;J<e.length;J++)if(e[J].container===_&&e[J].children)for(Ze=1;Ze<e[J].children.length;Ze++)r=e[J].children[Ze],l=c=l=S=a=void 0,S=zingchart.plugins.tree[T.id].data,l=be(r),c=l.first,l=l.prevIndex,c||(c=ye(l),l=ye(r),c=we(c),l=Me(l),a=0,c+te<l&&(S[r].coord+=-(a=l-c-te),me(r,-a)));for(re(),W=ae-1;0<=W;W--)if(n[_+"-"+W])for(J=0;J<n[_+"-"+W].length;J++)Ne(n[_+"-"+W][J]);re();var u=Number.MAX_VALUE,Z=-Number.MAX_VALUE;for(J=0;J<e.length;J++)e[J].container===_&&(""!==e[J].parent?e[J].visible&&e[e[J].pidx].visible&&ce.push([e[J].pidx,e[J].idx]):e[J].sibling&&null===ZC._n_(e[J].pidx)&&null!==ZC._n_(ne[e[J].sibling])&&ce.push([ne[e[J].sibling],e[J].idx]),e[J].visible)&&(u=Math.min(u,e[J].coord),Z=Math.max(Z,e[J].coord));u===Z&&(Z=u+te);var C,f=le[_],Y=function(e){for(var t=0,i=e;0<=i;i--)t+=Math.pow(2,i);return t};switch(H){case"tree-radial":i=Math.min(f.width-ge-_e,f.height-se-pe)/(2*Math.max(ae,1)),0!==ee&&(i=Math.pow(2,ae-1)*Math.min(f.width-ge-_e,f.height-se-pe)/Y(ae-1));break;case"tree-down":case"tree-up":i=(f.height-se-pe)/Math.max(ae,1),0!==ee&&(i=Math.pow(2,ae-1)*(f.height-se-pe)/Y(ae-1));break;case"tree-left":case"tree-right":i=(f.width-ge-_e)/Math.max(ae,1),0!==ee&&(i=Math.pow(2,ae-1)*(f.width-_e-ge)/Y(ae-1))}for(J=0;J<e.length;J++)if(e[J].visible&&e[J].container===_)switch(H){case"tree-right":if(C=(f.height-se-pe)/(Z-u),e[J].y=f.y+se+(e[J].coord-u)*C,0===ae&&(e[J].y+=f.height/2),e[J].x=f.x+_e,0===ee)e[J].x+=e[J].level*i;else if(-1===ee)for(W=0;W<e[J].level;W++)e[J].x+=i*Math.pow(2,-W);else if(1===ee)for(W=0;W<e[J].level;W++)e[J].x+=i*Math.pow(2,-ae+W+1);break;case"tree-left":if(C=(f.height-se-pe)/(Z-u),e[J].y=f.y+se+(e[J].coord-u)*C,0===ae&&(e[J].y+=f.height/2),e[J].x=f.x+f.width-ge,0===ee)e[J].x-=e[J].level*i;else if(-1===ee)for(W=0;W<e[J].level;W++)e[J].x-=i*Math.pow(2,-W);else if(1===ee)for(W=0;W<e[J].level;W++)e[J].x-=i*Math.pow(2,-ae+W+1);break;case"tree-down":if(C=(f.width-ge-_e)/(Z-u),e[J].x=f.x+_e+(e[J].coord-u)*C,0===ae&&(e[J].x+=f.width/2),e[J].y=f.y+se,0===ee)e[J].y+=e[J].level*i;else if(-1===ee)for(W=0;W<e[J].level;W++)e[J].y+=i*Math.pow(2,-W);else if(1===ee)for(W=0;W<e[J].level;W++)e[J].y+=i*Math.pow(2,-ae+W+1);break;case"tree-up":if(C=(f.width-ge-_e)/(Z-u),e[J].x=f.x+_e+(e[J].coord-u)*C,0===ae&&(e[J].x+=f.width/2),e[J].y=f.y+f.height-pe,0===ee)e[J].y-=e[J].level*i;else if(-1===ee)for(W=0;W<e[J].level;W++)e[J].y-=i*Math.pow(2,-W);else if(1===ee)for(W=0;W<e[J].level;W++)e[J].y-=i*Math.pow(2,-ae+W+1);break;case"tree-radial":if(e[J].angle=fe+(e[J].coord-u)*(C=Ce/(Z-u+1)),(e[J].radius=0)===ee)e[J].radius+=e[J].level*i;else if(-1===ee)for(W=0;W<e[J].level;W++)e[J].radius+=i*Math.pow(2,-W-1);else if(1===ee)for(W=0;W<e[J].level;W++)e[J].radius+=i*Math.pow(2,-ae+W);e[J].cx=f.x+_e+(f.width-_e-ge)/2,e[J].cy=f.y+se+(f.height-se-pe)/2,Xe=ZC.AQ.BN(e[J].cx,e[J].cy,e[J].radius,e[J].angle),e[J].x=Xe[0],e[J].y=Xe[1]}}var x={},v={},z=$?zingchart.plugins.tree.orgchart_defaults:zingchart.plugins.tree.tree_defaults;for(J=0;J<e.length;J++)if(e[J].visible&&!e[J].fake){var m,b=e[J],y=Math.round(xe+(ve-xe)*(b.value-zingchart.plugins.tree[T.id].minValue)/(zingchart.plugins.tree[T.id].maxValue-zingchart.plugins.tree[T.id].minValue)),M={};if(ZC._cp_(z.node,M),ZC._cp_({id:"node_"+b.id,cls:"zctreeshape","background-color":K[b.level%K.length],"hover-state":{"background-color":ZC.AO.JR(K[b.level%K.length],20)},x:b.x,y:b.y,size:y,dataTreeIndex:b.idx},M),b.children&&b.children.length?ZC._cp_(z["node[parent]"],M):ZC._cp_(z["node[leaf]"],M),b.collapsed&&ZC._cp_(z["node[collapsed]"],M),ZC._cp_(G.node||{},M),b.children&&b.children.length?ZC._cp_(G["node[parent]"],M):ZC._cp_(G["node[leaf]"],M),b.collapsed&&ZC._cp_(G["node[collapsed]"],M),ZC._cp_(G["node[container-"+b.container+"]"],M),ZC._cp_(G["node[level-"+b.level+"]"],M),b.parent&&ZC._cp_(G["node[parent-"+e[b.pidx].id+"]"],M),b.cls)for(var U=b.cls.split(/\s/),F=0;F<U.length;F++)ZC._cp_(G["node[cls-"+U[F]+"]"],M);if(G.nodes&&G.nodes[b.id]&&ZC._cp_(G.nodes[b.id],M),G.nodes&&G.nodes[ZC.US(b.id)]&&ZC._cp_(G.nodes[ZC.US(b.id)],M),M.label&&(M.label.x=b.x,M.label.y=b.y,z.node.label_jsRule)&&ZC._cp_(z.node.label_jsRule(b,M,H),M.label),M["js-rule"])try{var B=ZC.execFn(M["js-rule"].replace("javascript:","").replace("()",""),window,T.id,b,M);B&&ZC._cp_(B,M)}catch(R){}b.style&&ZC._cp_(b.style,M);y={decimals:null,"short":!1,"thousands-separator":",","decimals-separator":"."};if(ZC._cp_(M,y),M.label&&M.label.text){for(m in M.label.text=M.label.text.replace(/%text/gi,b.text).replace(/%node-value/gi,zingchart.formatNumber(b["node-value"],y)).replace(/%value/gi,zingchart.formatNumber(b.value,y)),b)"data-"===m.substring(0,5)&&(M.label.text=M.label.text.replace(new RegExp("%"+m,"g"),b[m]));M.label.text=M.label.text.replace(new RegExp("%data-([a-zA-Z0-9]+)","g"),"")}if(M.tooltip&&M.tooltip.text){for(m in ZC._cp_(M.tooltip,y),M.tooltip.text=M.tooltip.text.replace(/%text/gi,b.text).replace(/%node-value/gi,zingchart.formatNumber(b["node-value"],y)).replace(/%value/gi,zingchart.formatNumber(b.value,y)),b)"data-"===m.substring(0,5)&&(M.tooltip.text=M.tooltip.text.replace(new RegExp("%"+m,"g"),b[m]));M.tooltip.text=M.tooltip.text.replace(new RegExp("%data-([a-zA-Z0-9]+)","g"),"")}oe.push(M),x[b.id]=[],x[b.id][0]=ZC._i_(M.width||M.size||"0"),x[b.id][1]=ZC._i_(M.height||M.size2||M.size||"0"),x[b.id][2]=ZC._i_(M["offset-x"]||"0"),x[b.id][3]=ZC._i_(M["offset-y"]||"0"),v[b.id]={size:ZC._i_(M[ZC._[21]]),type:M.type}}for(J=0;J<ce.length;J++){p=e[ce[J][0]],b=e[ce[J][1]];var w={};if(ZC._cp_(z.link,w),ZC._cp_({id:"link_"+b.idx+"_"+p.idx,cls:"zctreeshape",type:"line",flat:!0},w),ZC._cp_(G.link||{},w),ZC._cp_(G["link[level-"+p.level+"]"],w),ZC._cp_(G["link[container-"+p.container+"]"],w),ZC._cp_(G["link[parent-"+p.id+"]"],w),!(b.sibling&&(p=e[ne[b.sibling]],w.aspect="sibling",ZC._cp_(G["link[sibling]"],w),p.fake&&b.fake||b.fake&&!b.children))){if(w["js-rule"])try{var Q=ZC.execFn(w["js-rule"].replace("javascript:","").replace("()",""),window,T.id,b,p,w);Q&&ZC._cp_(Q,w)}catch(R){}G.links&&G.links[p.id+"_"+b.id]&&ZC._cp_(G.links[p.id+"_"+b.id],w);var k,q,O,V=[],A=b.x,N=b.y,L=(x[b.id]&&(A+=x[b.id][2],N+=x[b.id][3]),p.x),X=p.y,E=(x[p.id]&&(L+=x[p.id][2],X+=x[p.id][3]),!0),I=i;switch(w.aspect){case"sibling":V=[[A,N],[L,X]],E=!0;break;case"side-before":case"side-after":V="tree-down"===H||"tree-up"===H?($||(I=ZC._a_(X-N)),[[A,N],[L+("side-after"===w.aspect?1:-1)*x[p.id][0]/3,N],[L+("side-after"===w.aspect?1:-1)*x[p.id][0]/3,X+("tree-down"===H?1:-1)*I/ie],[L+("side-after"===w.aspect?1:-1)*x[p.id][0]/3,X+("tree-down"===H?1:-1)*I/ie],[L+("side-after"===w.aspect?1:-1)*x[p.id][0]/3,X]]):($||(I=ZC._a_(L-A)),[[A,N],[A,X+("side-after"===w.aspect?-1:1)*x[p.id][1]/3],[L+("tree-right"===H?1:-1)*I/ie,X+("side-after"===w.aspect?-1:1)*x[p.id][1]/3],[L+("tree-right"===H?1:-1)*I/ie,X+("side-after"===w.aspect?-1:1)*x[p.id][1]/3],[L,X+("side-after"===w.aspect?-1:1)*x[p.id][1]/3]]),E=!0;break;case"side-between":V=[[A,N],[L,N],[L,X]],E=!0;break;case"arc":he=ZC.AQ.K1(L,X,A,N),V.push([L,X]),"tree-up"===H||"tree-down"===H?(k=X-he[1],V.push([L,he[1]+k/ie,he[0],he[1]]),V.push([A,he[1]-k/ie,A,N])):"tree-left"===H||"tree-right"===H?(k=L-he[0],V.push([he[0]+k/ie,X,he[0],he[1]]),V.push([he[0]-k/ie,N,A,N])):"tree-radial"===H&&0<p.level&&(q=ZC.AQ.BN(le[b.container].x+le[b.container].width/2,le[b.container].y+le[b.container].height/2,p.radius+(b.radius-p.radius)/5,p.angle),O=ZC.AQ.BN(le[b.container].x+le[b.container].width/2,le[b.container].y+le[b.container].height/2,p.radius+4*(b.radius-p.radius)/5,b.angle),V.push([q[0],q[1],he[0],he[1]]),V.push([O[0],O[1],A,N])),V.push([A,N]),E=!1;break;case"split":V.push([L,X]),"tree-up"===H||"tree-down"===H?($||(I=ZC._a_(X-N)),V.push([L,X+I/ie*("tree-down"===H?1:-1)]),V.push([A,X+I/ie*("tree-down"===H?1:-1)])):"tree-left"===H||"tree-right"===H?($||(I=ZC._a_(L-A)),V.push([L+I/ie*("tree-right"===H?1:-1),X]),V.push([L+I/ie*("tree-right"===H?1:-1),N])):"tree-radial"===H&&(Xe=ZC.AQ.BN(le[b.container].x+le[b.container].width/2,le[b.container].y+le[b.container].height/2,p.radius+(b.radius-p.radius)/2,p.angle),V.push([Xe[0],Xe[1]]),V.push([le[b.container].x+le[b.container].width/2,le[b.container].y+le[b.container].height/2,p.radius+(b.radius-p.radius)/2,p.angle,b.angle,p.angle>b.angle?1:0])),V.push([A,N]),E=!1;break;case"line":V=[[A,N],[L,X]],E=!0}w.points=V,w.visible=!0,E?Oe(w,x[b.id],v[b.id],x[p.id],v[p.id]):Oe(w,x[p.id],v[p.id],x[b.id],v[b.id]),de.push(w)}}zingchart.exec(T.id,"removeobject",{type:"shape",cls:"zctreeshape"}),zingchart.exec(T.id,"addobject",{type:"shape",data:de.concat(qe(de)).concat(oe)})},"graph"===H?(e(),zingchart.plugins.tree[T.id].navSetup||(r=function(){A=""},zingchart.bind(T.id,"shape_mousedown",function(e){var t,i;!ZC.mobile&&0!==e.ev.button||0!==e.shape.id.indexOf("node_")||(t=ZC.Q.MJ(e.ev),i=ZC.A3("#"+T.id+"-top").offset(),N=[t[0]-i.left,t[1]-i.top],zingchart.bind(T.id,ZC._[49],r),A=e.shape.id.replace("node_",""))}),zingchart.bind(T.id,"shape_mouseup",r),zingchart.bind(T.id,ZC._[48],function(e){""!==A?(ZC.mobile||e.ev.preventDefault(),N=[e.x,e.y],Ye(!0),(N[0]<10||N[0]>ue.I-10||N[1]<10||N[1]>ue.F-10)&&r()):"none"===e.target&&(t.LN(),t.A7)&&t.A.A7&&t.A7.AP&&ue.A7.onmouseout(e.ev)}),zingchart.bind(T.id,"beforedestroy",function(e){zingchart.plugins.tree[e.id]._render_graph_=null,zingchart.plugins.tree[e.id].navSetup=!1}),zingchart.plugins.tree[T.id].navSetup=!0)):(a(),n||zingchart.plugins.tree[T.id].navSetup||(zingchart.bind(T.id,"shape_click",function(r){0===r.shape.id.indexOf("node_")&&window.setTimeout(function(){for(var e=r["data-tree-index"],t=zingchart.plugins.tree[T.id].data,i=ye(e,!0),n=0;n<i.length;n++)0===n?t[i[n]].collapsed=!t[i[n]].collapsed:t[i[n]].visible=!t[i[n]].visible;a()},33)}),zingchart.plugins.tree[T.id].navSetup=!0)))},zingchart.bind(null,"gcomplete",function(e){t(e)}),zingchart.extendAPI("tree.addnode",function(e,t){var i;zingchart.plugins.tree[e]&&t.data&&(i=!0,null!==ZC._n_(t.update)&&(i=ZC._b_(t.update)),(t=t.data).id=t.id||"N"+ZC._r_(1e4,99999),t.text=t.text||t.id,t.type="node",t[ZC._[9]]=t[ZC._[9]]||1,t.container=t.container||0,t.group=t.group||0,zingchart.plugins.tree[e].data.push(t),i)&&(l(e),zingchart.plugins.tree[e]._render_graph_())}),zingchart.extendAPI("tree.removenode",function(e,t){if(zingchart.plugins.tree[e]&&t.id){var i=!0;if(null!==ZC._n_(t.update)&&(i=ZC._b_(t.update)),t.id){for(var n=zingchart.plugins.tree[e].data.length-1;0<=n;n--)("node"===zingchart.plugins.tree[e].data[n].type&&zingchart.plugins.tree[e].data[n].id===t.id||"link"===zingchart.plugins.tree[e].data[n].type&&zingchart.plugins.tree[e].data[n].source===t.id||zingchart.plugins.tree[e].data[n].target===t.id)&&zingchart.plugins.tree[e].data.splice(n,1);i&&(l(e),zingchart.plugins.tree[e]._render_graph_())}}}),zingchart.extendAPI("tree.getdata",function(e){return zingchart.plugins.tree[e]?zingchart.plugins.tree[e].data:null}),zingchart.extendAPI("tree.set",function(e,t){var i;return zingchart.plugins.tree[e]&&t.data&&(i=!0,null!==ZC._n_(t.update)&&(i=ZC._b_(t.update)),t=t.data,null!==ZC._n_(t["attraction-constant"])&&(zingchart.plugins.tree[e].attractionConstant=ZC._f_(t["attraction-constant"])),null!==ZC._n_(t["repulsion-constant"])&&(zingchart.plugins.tree[e].repulsionConstant=ZC._i_(t["repulsion-constant"])),null!==ZC._n_(t["spring-length"])&&(zingchart.plugins.tree[e].springLength=ZC._f_(t["spring-length"])),i)&&(l(e),zingchart.plugins.tree[e]._render_graph_()),null}),zingchart.extendAPI("tree.addlink",function(e,t){if(zingchart.plugins.tree[e]&&t.data){var i=!0,n=(null!==ZC._n_(t.update)&&(i=ZC._b_(t.update)),t.data);if(n.source&&n.target){for(var r=0,a=0;a<zingchart.plugins.tree[e].data.length;a++)"node"!==zingchart.plugins.tree[e].data[a].type||zingchart.plugins.tree[e].data[a].id!==n.source&&zingchart.plugins.tree[e].data[a].id!==n.target||r++;2===r&&(n.type="link",n[ZC._[9]]=n[ZC._[9]]||1,zingchart.plugins.tree[e].data.push(n),i)&&(l(e),zingchart.plugins.tree[e]._render_graph_())}}}),zingchart.extendAPI("tree.removelink",function(e,t){if(zingchart.plugins.tree[e]&&t.data){var i=!0,n=(null!==ZC._n_(t.update)&&(i=ZC._b_(t.update)),t.data);if(n.source&&n.target){for(var r=zingchart.plugins.tree[e].data.length-1;0<=r;r--)(zingchart.plugins.tree[e].data[r].source===n.source&&zingchart.plugins.tree[e].data[r].target===n.target||zingchart.plugins.tree[e].data[r].source===n.target&&zingchart.plugins.tree[e].data[r].target===n.source)&&zingchart.plugins.tree[e].data.splice(r,1);i&&(l(e),zingchart.plugins.tree[e]._render_graph_())}}}))}();