/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.15
*/
zingchart.setModule("waterfall"),zingchart.bind(null,"dataparse",function(e,a){for(var l=0,t=a[ZC._[16]].length;l<t;l++)if(a[ZC._[16]][l].type&&("waterfall"===a[ZC._[16]][l].type.replace("3d","")||"hwaterfall"===a[ZC._[16]][l].type.replace("3d",""))){for(var r,i=a[ZC._[16]][l].type,p=(a[ZC._[16]][l]["plugin-type"]=i,a[ZC._[16]][l]),o={},i=(p.options&&(o=p.options[i]||p.options),ZC._todash_(o),p[ZC._[50]]=p[ZC._[50]]||{},p[ZC._[50]][ZC._[5]]=p[ZC._[50]][ZC._[5]]||[],p[ZC._[11]]=p[ZC._[11]]||[],p[ZC._[11]][0]=p[ZC._[11]][0]||{},p[ZC._[11]][0][ZC._[5]]=p[ZC._[11]][0][ZC._[5]]||[],p.plot=p.plot||{},p.plot.mode="normal",p.type="waterfall"===i.replace("3d","")?"vbar":"hbar",-1!==i.indexOf("3d")&&(p.type+="3d"),p[ZC._[11]]),n=[0],C=[],d=0,u=i[0][ZC._[5]],_=0;_<u.length;_++)"SUM"!==(""+u[_]).toUpperCase()?(d+=ZC._f_(u[_]),n.push(d),C.push("")):(_<u.length-1?C.push("INTERMEDIATE"):C.push("FINAL"),u[_]=d,r=n.pop(),n.push(0),n.push(r),d=r);n.pop(),i[0]["offset-values"]=n,i[0]["data-sum"]=C,p.plot=p.plot||{},p.plot.rules=p.plot.rules||[];var i={rule:"%node-numeric-value >= 0","background-color":"#7CA82B #7CA82B"},Z=(ZC._cp_(o.positive,i),{rule:"%node-numeric-value < 0","background-color":"#D31E1E #D31E1E"}),c=(ZC._cp_(o.negative,Z),{rule:'"%data-sum" === "INTERMEDIATE"',"background-color":"#29A2CC #29A2CC"}),h=(ZC._cp_(o.intermediate,c),{rule:'"%data-sum" === "FINAL"',"background-color":"#29A2CC #29A2CC"});ZC._cp_(o["final"],h),p.plot.rules.unshift(i,Z,c,h)}return a}),zingchart.bind(null,"gcomplete",function(e){var a=zingchart.getLoader(e.loader.id),r=zingchart.getGraph(a,e.graphid),a=r.o;if(a["plugin-type"]=a["plugin-type"]||"","waterfall"===a["plugin-type"].replace("3d","")||"hwaterfall"===a["plugin-type"].replace("3d","")){for(var l,t={},i=(a.options&&(t=a.options[a["plugin-type"]]||a.options),ZC._todash_(t),zingchart.exec(e.loader.id,"deleteobject",{type:"shape",id:"waterfall-line"}),r.AY.A4[0].S),p=r.BW("k")[0],o=[],n=function(e,a,l){var t;return l?(l=new ZC.CE(r,e[0]-ZC.AM.E1,e[1]-ZC.AM.E2,0),t=new ZC.CE(r,a[0]-ZC.AM.E1,a[1]-ZC.AM.E2,0),[l.EC,t.EC]):[e,a]},C=0;C<i.length-1;C++){var d,u,_=i[C],Z=i[C+1];"vbar"===r.AF||"vbar3d"===r.AF?(u=0<=_.CR?(d=_.iYVal,_.iYVal+_.F):(d=_.iYVal+_.F,_.iYVal),l=0<=_.CR?p.AW?n([_.iX,d],[Z.iX+Z.I,d],"vbar3d"===r.AF):n([_.iX+_.I,d],[Z.iX,d],"vbar3d"===r.AF):p.AW?n([_.iX,u],[Z.iX+Z.I,u],"vbar3d"===r.AF):n([_.iX+_.I,u],[Z.iX,u],"vbar3d"===r.AF)):"hbar"!==r.AF&&"hbar3d"!==r.AF||(u=0<=_.CR?(d=_.iXVal,_.iXVal+_.I):(d=_.iXVal+_.I,_.iXVal),l=0<=_.CR?p.AW?n([d,_.iY+_.F],[d,Z.iY],"hbar3d"===r.AF):n([d,_.iY],[d,Z.iY+Z.F],"hbar3d"===r.AF):p.AW?n([u,_.iY+_.F],[u,Z.iY],"hbar3d"===r.AF):n([u,_.iY],[u,Z.iY+Z.F],"hbar3d"===r.AF)),o.push(l[0],l[1]),o.push(null)}a={type:"line",id:"waterfall-line","line-width":2,"line-style":"dotted","line-color":"#000",flat:!0,points:o};ZC._cp_(t.line,a),zingchart.exec(e.loader.id,"addobject",{type:"shape",data:a})}});