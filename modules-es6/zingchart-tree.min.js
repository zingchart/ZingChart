/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.8_ES6
*/
zingchart.setModule("tree"),function(){if(!ZC.ZCVector){ZC.ZCVector=function(e,t){this.fMagnitude=e,this.fDirection=t,this.fMagnitude<0&&(this.fMagnitude=-this.fMagnitude,this.fDirection=(180+this.fDirection)%360),this.fDirection<0&&(this.fDirection=360+this.fDirection)},ZC.ZCVector.add=function(e,t){var i=e.fMagnitude*Math.cos(Math.PI/180*e.fDirection),n=e.fMagnitude*Math.sin(Math.PI/180*e.fDirection);i+=t.fMagnitude*Math.cos(Math.PI/180*t.fDirection),n+=t.fMagnitude*Math.sin(Math.PI/180*t.fDirection);var r,a=Math.sqrt(Math.pow(i,2)+Math.pow(n,2));return r=0===a?0:180/Math.PI*Math.atan2(n,i),new ZC.ZCVector(a,r)},ZC.ZCVector.sub=function(e,t){var i=e.fMagnitude*Math.cos(Math.PI/180*e.fDirection),n=e.fMagnitude*Math.sin(Math.PI/180*e.fDirection);i-=t.fMagnitude*Math.cos(Math.PI/180*t.fDirection),n-=t.fMagnitude*Math.sin(Math.PI/180*t.fDirection);var r,a=Math.sqrt(Math.pow(i,2)+Math.pow(n,2));return r=0===a?0:180/Math.PI*Math.atan2(n,i),new ZC.ZCVector(a,r)},ZC.ZCVector.multiply=function(e,t){return new ZC.ZCVector(e.fMagnitude*t,e.fDirection)},ZC.ZCVector.prototype.toXY=function(){return[this.fMagnitude*Math.cos(Math.PI/180*this.fDirection),this.fMagnitude*Math.sin(Math.PI/180*this.fDirection)]};var e=function(e,t){var i=e.x-t.x,n=e.y-t.y;return Math.sqrt(Math.pow(i,2)+Math.pow(n,2))},t=function(e,t){var i=e.x+(t.x-e.x)/2,n=e.y+(t.y-e.y)/2,r=i-e.x,a=n-e.y;return 0===r&&0===a?0:0===r?a>=0?90:270:0===a?r>=0?0:180:Math.atan2(a,r)*(180/Math.PI)},i=function(i,n,r,a,l){var c=Math.max(e(n,r),1),d=Math.min(.99,i*(l||1))*(c-a);d=Math.max(d,-a),d=Math.min(d,a);var o=t(n,r);return new ZC.ZCVector(d,o)},n=function(i,n,r,a,l,c,d,o){var h=Math.max(e(n,r),1),g=n.size||1,s=r.size||1;if(d||(g=s=1),o&&(c=1),h>c*a)return new ZC.ZCVector(0,0);var p=-i*g*s/(h*h*l);p=Math.max(p,-a),p=Math.min(p,a);var _=t(n,r);return new ZC.ZCVector(p,_)},r=function(e){for(var t=zingchart.plugins.tree[e].data,i=Number.MAX_VALUE,n=-Number.MAX_VALUE,r=Number.MAX_VALUE,a=-Number.MAX_VALUE,l=0;l<t.length;l++)"link"===t[l].type?(r=Math.min(r,t[l][ZC._[9]]),a=Math.max(a,t[l][ZC._[9]])):(i=Math.min(i,t[l][ZC._[9]]),n=Math.max(n,t[l][ZC._[9]]));zingchart.plugins.tree[e].minValue=i,zingchart.plugins.tree[e].maxValue=n,zingchart.plugins.tree[e].minLinkValue=r,zingchart.plugins.tree[e].maxLinkValue=a};zingchart.plugins.tree=zingchart.plugins.tree||{},zingchart.plugins.tree.graph_defaults={plotarea:{margin:5},container:{padding:5},node:{type:"circle","border-width":1,"border-color":"#fff",tooltip:{text:"%text"},label:{"font-size":10,padding:1,color:"#000",text:"%text"}},link:{flat:!0,"line-color":"#999",alpha:.5,type:"line"}},zingchart.plugins.tree.orgchart_defaults={plotarea:{margin:10},container:{"tree-right":{padding:"20 60 20 60"},"tree-left":{padding:"20 60 20 60"},"tree-down":{padding:"20 60 20 60"},"tree-up":{padding:"20 60 20 60"}},node:{type:"rectangle",width:80,height:30,"border-width":1,"border-color":"#333","background-color":"#fff",label:{color:"#000",width:80,"font-size":10,align:"center",anchor:"c",text:"%text"}},link:{aspect:"split","line-color":"#999","line-width":1}},zingchart.plugins.tree.tree_defaults={plotarea:{margin:10},container:{"tree-radial":{padding:"120 120 120 120"},"tree-right":{padding:"20 120 20 40"},"tree-left":{padding:"20 40 20 120"},"tree-down":{padding:"40 20 120 20"},"tree-up":{padding:"120 20 40 20"}},link:{aspect:"arc","line-color":"#999","line-width":1},"node[collapsed]":{"border-width":1,"border-color":"#666"},node:{type:"circle",tooltip:{text:"%text:%value"},label:{"font-size":10,padding:1,width:100,color:"#000","clip-text":!0,text:"%text"},label_jsRule:function(e,t,i){var n={},r=ZC._i_(t.label.width)/2,a=null!==ZC._n_(t.width)?ZC._i_(t.width)/2:t.size,l=null!==ZC._n_(t.height)?ZC._i_(t.height)/2:t.size,c=Math.max(a,l);switch(i){case"tree-right":0===e.level?n["offset-y"]=-t.size-l:(n.anchor=e.children&&e.children.length?"r":"l",n["offset-x"]=e.children&&e.children.length?-5-a:5+a,n.align=e.children&&e.children.length?"right":"left");break;case"tree-left":0===e.level?n["offset-y"]=-t.size-l:(n.anchor=e.children&&e.children.length?"l":"r",n["offset-x"]=e.children&&e.children.length?5+a:-5-a,n.align=e.children&&e.children.length?"left":"right");break;case"tree-down":n.anchor="c",0===e.level?n["offset-y"]=-t.size-l:(n["offset-y"]=e.children&&e.children.length?-5-r-l:5+r+l,n.angle=91,n.align=e.children&&e.children.length?"right":"left",n["offset-x"]=e.children&&e.children.length?1:0);break;case"tree-up":n.anchor="c",0===e.level?n["offset-y"]=t.size+l:(n["offset-y"]=e.children&&e.children.length?5+r+l:-5-r-l,n.angle=271,n.align=e.children&&e.children.length?"right":"left",n["offset-x"]=e.children&&e.children.length?-1:0);break;case"tree-radial":var d,o;0===e.level?n["offset-y"]=-t.size-l:(e.children&&e.children.length?(e.angle>90&&e.angle<270?(n.angle=e.angle+180,n.align="left"):(n.angle=e.angle,n.align="right"),d=ZC.AR.BN(e.cx,e.cy,e.radius,e.angle),o=ZC.AR.BN(e.cx,e.cy,e.radius-(5+r+c),e.angle)):(e.angle>90&&e.angle<270?(n.angle=e.angle+180,n.align="right"):(n.angle=e.angle,n.align="left"),d=ZC.AR.BN(e.cx,e.cy,e.radius,e.angle),o=ZC.AR.BN(e.cx,e.cy,e.radius+(5+r+c),e.angle)),n["offset-x"]=o[0]-d[0],n["offset-y"]=o[1]-d[1])}for(var h in n)null!==ZC._n_(t.label[h])&&delete n[h];return n}}},zingchart.bind(null,"dataparse",function(e,t){for(var i,n,r,a,l=0,c=t[ZC._[16]].length;l<c;l++)if(t[ZC._[16]][l].type&&"tree"===t[ZC._[16]][l].type){var d=t[ZC._[16]][l].type;t[ZC._[16]][l]["plugin-type"]=d;var o=t[ZC._[16]][l];zingchart.normalize(o),o.type="null";var h={};o.options&&(h=o.options[d]||o.options),ZC._todash_(h),o[ZC._[11]]=o[ZC._[11]]||[];var g=h["text-attr"]||"text",s=h["value-attr"]||ZC._[9],p=h["source-attr"]||"source",_=h["target-attr"]||"target",u=h.aspect||"tree-right",f=ZC._b_(ZC._c_(h["org-chart"],0));if(o.plotarea=o.plotarea||{},f?ZC._inj_(o.plotarea,zingchart.plugins.tree.orgchart_defaults.plotarea||{}):"graph"===u?ZC._inj_(o.plotarea,zingchart.plugins.tree.graph_defaults.plotarea||{}):ZC._inj_(o.plotarea,zingchart.plugins.tree.tree_defaults.plotarea||{}),!(o[ZC._[11]]instanceof Array)){var C=[],Z={},x=function(e,t){var i=(e.text||e.name||e[g]).toLowerCase().replace(/[^a-z0-9_]+/gi,"");Z[i]?i+=Z[i]++:Z[i]=1;var n={id:i,text:e.text||e.name||e[g]||i,value:e[ZC._[9]]||e[ZC._[21]]||e[s],parent:t||""};if(C.push(n),e.children)for(var r=0;r<e.children.length;r++)x(e.children[r],i)};x(o[ZC._[11]]),o[ZC._[11]]=C}for(i=0;i<o[ZC._[11]].length;i++)o[ZC._[11]][i].text=o[ZC._[11]][i].text||o[ZC._[11]][i].name||o[ZC._[11]][i][g]||"Node "+i,o[ZC._[11]][i][ZC._[9]]=o[ZC._[11]][i][ZC._[9]]||o[ZC._[11]][i][ZC._[21]]||o[ZC._[11]][i][s],o[ZC._[11]][i]["node-value"]=o[ZC._[11]][i][ZC._[9]],o[ZC._[11]][i].id||(o[ZC._[11]][i].text?o[ZC._[11]][i].id=o[ZC._[11]][i].text.toLowerCase().replace(/[^a-z0-9_]+/gi,""):o[ZC._[11]][i].id="node"+i),o[ZC._[11]][i].group=o[ZC._[11]][i].group||-1,"graph"!==u?(o[ZC._[11]][i].collapsed=!1,o[ZC._[11]][i].visible=!0):(o[ZC._[11]][i].text=o[ZC._[11]][i].text||o[ZC._[11]][i].name||o[ZC._[11]][i][g]||"Node "+i,(o[ZC._[11]][i].source||o[ZC._[11]][i].from||o[ZC._[11]][i][p])&&(o[ZC._[11]][i].target||o[ZC._[11]][i].to||o[ZC._[11]][i][_])?(o[ZC._[11]][i].source=o[ZC._[11]][i].source||o[ZC._[11]][i].from||o[ZC._[11]][i][p],o[ZC._[11]][i].target=o[ZC._[11]][i].target||o[ZC._[11]][i].to||o[ZC._[11]][i][_],o[ZC._[11]][i].type="link"):o[ZC._[11]][i].type="node"),"graph"===u&&o[ZC._[11]][i].parent&&""!==o[ZC._[11]][i].parent&&o[ZC._[11]].push({type:"link",source:o[ZC._[11]][i].id,target:o[ZC._[11]][i].parent,value:1});for(zingchart.plugins.tree[e.id]=zingchart.plugins.tree[e.id]||{},zingchart.plugins.tree[e.id].size=o[ZC._[11]].length,i=0;i<o[ZC._[11]].length;i++)if(o[ZC._[11]][i].idx=i,null!==ZC._n_(o[ZC._[11]][i].parent))for(n=0;n<o[ZC._[11]].length;n++)o[ZC._[11]][n].id===o[ZC._[11]][i].parent&&(o[ZC._[11]][i].pidx=n,o[ZC._[11]][n].children=o[ZC._[11]][n].children||[],o[ZC._[11]][n].children.push(i));else o[ZC._[11]][i].parent="";for(var v=!0,z=[];v;)for(v=!1,i=0;i<o[ZC._[11]].length;i++)if(null!==ZC._n_(o[ZC._[11]][i].parent)&&(r=o[ZC._[11]][i].parent,-1===ZC.AV(z,r))){var m=0,b=!0;for(a=-1,n=0;n<o[ZC._[11]].length;n++)o[ZC._[11]][n].id===r&&(a=n,o[ZC._[11]][i].pidx=n),null!==ZC._n_(o[ZC._[11]][n].parent)&&o[ZC._[11]][n].parent===r&&(null!==ZC._n_(o[ZC._[11]][n][ZC._[9]])&&ZC._f_(o[ZC._[11]][n][ZC._[9]])+""==o[ZC._[11]][n][ZC._[9]]+""?m+=ZC._f_(o[ZC._[11]][n][ZC._[9]]):b=!1);if(b&&-1!==a){null!==ZC._n_(o[ZC._[11]][a][ZC._[9]])&&(o[ZC._[11]][a]["node-value"]=o[ZC._[11]][a][ZC._[9]]),o[ZC._[11]][a][ZC._[9]]=m,z.push(r),v=!0;continue}}for(i=0;i<o[ZC._[11]].length;i++)o[ZC._[11]][i][ZC._[9]]=o[ZC._[11]][i][ZC._[9]]||1,"graph"===u&&(o[ZC._[11]][i].container=o[ZC._[11]][i].container||0);for(var y=!0,M=Number.MAX_VALUE,w=-Number.MAX_VALUE,k=0;y;)for(y=!1,i=0;i<o[ZC._[11]].length;i++)"graph"===u&&"node"!==o[ZC._[11]][i].type||(M=Math.min(M,o[ZC._[11]][i][ZC._[9]]),w=Math.max(w,o[ZC._[11]][i][ZC._[9]])),null===ZC._n_(o[ZC._[11]][i].level)?o[ZC._[11]][i].sibling||null!==ZC._n_(o[ZC._[11]][i].parent)&&""!==o[ZC._[11]][i].parent?(a=o[ZC._[11]][i].pidx,null!==ZC._n_(a)?null===ZC._n_(o[ZC._[11]][a].level)?y=!0:(o[ZC._[11]][i].level=ZC._i_(o[ZC._[11]][a].level)+1,"graph"!==u&&(o[ZC._[11]][i].container=o[ZC._[11]][a].container)):o[ZC._[11]][i].container=o[ZC._[11]][i].level=0):(o[ZC._[11]][i].level=0,"graph"!==u&&(o[ZC._[11]][i].container=k),k++):(a=o[ZC._[11]][i].pidx,null!==ZC._n_(a)?o[ZC._[11]][i].container=o[ZC._[11]][a].container||0:o[ZC._[11]][i].container=0);if(zingchart.plugins.tree[e.id].minValue=M,zingchart.plugins.tree[e.id].maxValue=w,"graph"===u){var V=Number.MAX_VALUE,A=-Number.MAX_VALUE;for(i=0;i<o[ZC._[11]].length;i++)"link"===o[ZC._[11]][i].type&&(V=Math.min(V,o[ZC._[11]][i][ZC._[9]]),A=Math.max(A,o[ZC._[11]][i][ZC._[9]]));zingchart.plugins.tree[e.id].minLinkValue=V,zingchart.plugins.tree[e.id].maxLinkValue=A}o.plotarea=o.plotarea||{},ZC._inj_(o.plotarea,{margin:"10 10 10 10","mask-tolerance":[0,0]})}return t});var a=function(r){var a=zingchart.getLoader(r.loader.id),l=zingchart.getGraph(a,r.graphid),c=l.o;if("tree"===c["plugin-type"]){var d,o,h,g=zingchart.getGraphInfo(a,c,l.L).plotarea,s={};c.options&&(s=c.options.tree||c.options),ZC._todash_(s);var p=s.palette||["#a7da47","#00b0e1","#ef4810","#f9c332","#84680a","#4d62b1","#00BAF2","#E80C60","#E2D51A","#9B26AF","#FB301E","#00AE4D","#20398B"],_=s.aspect||"tree-right",u=ZC._b_(ZC._c_(s["org-chart"],0)),f=s.layout||"x",C=ZC._i_(ZC._c_(s.progression,"0")),Z=ZC._i_(ZC._c_(s.aperture,"360")),x=ZC._i_(ZC._c_(s["ref-angle"],"0")),v=ZC._i_(ZC._c_(s["min-size"],4)),z=ZC._i_(ZC._c_(s["max-size"],4)),m=ZC._i_(ZC._c_(s["min-link-width"],1)),b=ZC._i_(ZC._c_(s["max-link-width"],5)),y=ZC._f_(ZC._c_(s["attraction-constant"],.99)),M=ZC._i_(ZC._c_(s["repulsion-constant"],1e3)),w=ZC._i_(ZC._c_(s["repulsion-distance-factor"],20)),k=ZC._f_(ZC._c_(s["spring-length"],40)),V=ZC._i_(ZC._c_(s["max-iterations"],1e3)),A=ZC._f_(ZC._c_(s["damping-step"],.005)),L=ZC._b_(ZC._c_(s["weighted-nodes"],0)),N=ZC._b_(ZC._c_(s["weighted-links"],0)),X=Math.max(1,ZC._i_(ZC._c_(s["packing-factor"],1))),E=Math.max(.1,ZC._f_(ZC._c_(s["depth-ratio"],2))),I=ZC._b_(ZC._c_(s["weighted-links"],0));u&&(I=!0),zingchart.plugins.tree[r.id].data=[].concat(c[ZC._[11]]||[]),zingchart.plugins.tree[r.id].attractionConstant=y,zingchart.plugins.tree[r.id].repulsionConstant=M,zingchart.plugins.tree[r.id].springLength=k;var R,j,P=function(e,t){var i=zingchart.plugins.tree[r.id].data;if(i[e].children)for(var n=0;n<i[e].children.length;n++)i[i[e].children[n]].coord+=t,P(i[e].children[n],t)},D=function(e){var t=zingchart.plugins.tree[r.id].data,i=!1,n=-1,a=-1;if(null===ZC._n_(t[e].pidx))i=!0;else{var l=ZC.AV(t[t[e].pidx].children,e);0===l?i=!0:(i=!1,n=l-1,a=t[t[e].pidx].children[n])}return{first:i,prevSiblingIndex:n,prevIndex:a}},Y=function(e,t){var i=zingchart.plugins.tree[r.id].data,n=[];if(n.push(e),i[e].children&&i[e].children.length&&(t||!i[e].collapsed))for(var a=0;a<i[e].children.length;a++)n=n.concat(Y(i[e].children[a]));return n},U=function(e){for(var t=zingchart.plugins.tree[r.id].data,i=Number.MAX_VALUE,n=0;n<e.length;n++)i=Math.min(i,t[e[n]].coord);return i},F=function(e){for(var t=zingchart.plugins.tree[r.id].data,i=-Number.MAX_VALUE,n=0;n<e.length;n++)i=Math.max(i,t[e[n]].coord);return i},B=null,S=function(){var e,t=zingchart.plugins.tree[r.id].data;if(!B)for(B={},e=0;e<t.length;e++)B[t[e].id]=t[e].idx;var i={};for(e=0;e<t.length;e++){if(t[e].reference){var n=t[B[t[e].reference]];i[t[e].reference]=i[t[e].reference]||1,t[e].coord=n.coord,t[e].level=n.level+i[t[e].reference],i[t[e].reference]+=1}if(t[e].sibling&&0===t[e].level){var a=t[B[t[e].sibling]];t[e].idx<a.idx?t[e].coord=a.coord-X:t[e].coord=a.coord+X}}T()},O=0,T=function(){for(var e=zingchart.plugins.tree[r.id].data,t=0;t<e.length;t++)e[t].visible&&(O=Math.max(O,c[ZC._[11]][t].level))},q=function(e,t){var i=zingchart.plugins.tree[r.id].data;if(i[e].visible&&(i[e].reference?i[e].coord=0:i[e].coord=t*X,i[e].children))for(var n=0;n<i[e].children.length;n++)q(i[e].children[n],n*X)},G=function(e){var t=zingchart.plugins.tree[r.id].data;if(t[e].visible&&!t[e].reference&&t[e].children&&!t[e].collapsed){var i=t[e].children.length,n=t[e].children[0],a=t[e].children[i-1],l=(t[n].coord+t[a].coord)/2,c=D(e),d=c.first,o=c.prevSiblingIndex;if(d)t[e].coord=l;else{var h=t[t[e].pidx].children[o];t[e].coord=t[h].coord+X;var g=t[e].coord-l;0!==g&&P(e,g)}}},K=function(e){var t=zingchart.plugins.tree[r.id].data;if(t[e].visible&&!t[e].reference){var i=D(e),n=i.first,a=i.prevIndex;if(!n){var l=function(e,t,i){var n=zingchart.plugins.tree[r.id].data,a=[];if(t){for(;n[e].children&&n[e].children.length&&!n[e].collapsed&&!n[e].fake;)e=n[e].children[n[e].children.length-1];for(;null!==ZC._n_(n[e].pidx);)(-1===i||n[e].level<=i)&&a.push(e),e=n[e].pidx}if(a.push(e),!t)for(;n[e].children&&n[e].children.length&&!n[e].collapsed&&!n[e].fake;)e=n[e].children[n[e].children.length-1],(-1===i||n[e].level<=i)&&a.push(e);return a}(a,!1,-1),c=function(e,t,i){var n=zingchart.plugins.tree[r.id].data,a=[];if(t){for(;n[e].children&&n[e].children.length&&!n[e].collapsed&&!n[e].fake;)e=n[e].children[0];for(;null!==ZC._n_(n[e].pidx);)(-1===i||n[e].level<=i)&&a.push(e),e=n[e].pidx}if(a.push(e),!t)for(;n[e].children&&n[e].children.length&&!n[e].collapsed&&!n[e].fake;)e=n[e].children[0],(-1===i||n[e].level<=i)&&a.push(e);return a}(e,!1,-1),d=F(l),o=U(c),h=0;o<=d&&(h=d-o+X,t[e].coord+=h,P(e,h))}if(t[e].children&&t[e].children.length&&!t[e].collapsed)for(var g=0;g<t[e].children.length;g++)K(t[e].children[g])}},Q=function(e){var t=zingchart.plugins.tree[r.id].data;if(t[e].visible&&t[e].children&&!t[e].collapsed){for(var i=t[e].children.length,n=t[e].children[0],a=t[e].children[i-1],l=(t[n].coord+t[a].coord)/2,c=t[e].coord-l,d=0;d<t.length;d++)t[d].sibling===t[e].id&&(t[d].coord-=c);t[e].coord=l}},J=function(e){var t=zingchart.plugins.tree[r.id].data,i=0;if(!t[e].visible)return i;if(t[e].children&&t[e].children.length>1&&!t[e].collapsed)for(var n="r",a=1;a<t[e].children.length;a++){var l=t[t[e].children[a]],c=t[t[e].children[a-1]];c.children&&c.children.length?l.children&&l.children.length||(n="l",l.coord-c.coord>X&&(l.coord=c.coord+X,i++)):l.children&&l.children.length?(n="r",l.coord-c.coord>X&&(c.coord=l.coord-X,i++)):l.coord-c.coord>X&&("r"===n?(c.coord=l.coord-X,i++):(l.coord=c.coord+X,i++))}return i},W=function(e){var t=zingchart.plugins.tree[r.id].data,i=D(e),n=i.first,a=i.prevIndex;if(!n){var l=Y(a),c=Y(e),d=F(l),o=U(c),h=0;o>d+X&&(h=o-d-X,t[e].coord+=-h,P(e,-h))}},H=[],$=[],ee=[],te=[],ie=[],ne=[],re={},ae={},le={},ce=1,de=0,oe="",he=[0,0],ge=!1,se={},pe=!0,_e=!0,ue=zingchart.getInstance(l,"textbox");u?ue.append(zingchart.plugins.tree.orgchart_defaults.container[_]):"graph"===_?ue.append(zingchart.plugins.tree.graph_defaults.container):ue.append(zingchart.plugins.tree.tree_defaults.container[_]),ue.append(s.container),ue.parse();var fe=ue.FO,Ce=ue.FP,Ze=ue.FS,xe=ue.EP,ve=function(e){if(H=[],e>1){var t=-1,i=-1;if("h"===f)t=1,i=e;else if("v"===f)t=e,i=1;else if(-1!==f.indexOf("x")){var n=f.split("x");""!==n[0]&&(t=ZC._i_(n[0])),""!==n[1]&&(i=ZC._i_(n[1])),-1===t&&-1===i?t=i=Math.ceil(Math.sqrt(e)):-1===t&&-1!==i?t=Math.ceil(e/i):-1!==t&&-1===i&&(i=Math.ceil(e/t))}for(var r=g.width/i,a=g.height/t,l=0;l<t;l++)for(var c=0;c<i;c++)H[l*i+c]={x:g.x+c*r,y:g.y+l*a,width:r,height:a}}else H[0]={x:g.x,y:g.y,width:g.width,height:g.height}};zingchart.plugins.tree[r.id].bFirstRender=!0;var ze={},me=function(l){if(a.T2=[],y=zingchart.plugins.tree[r.id].attractionConstant,M=zingchart.plugins.tree[r.id].repulsionConstant,k=zingchart.plugins.tree[r.id].springLength,!l||(ce=1,de=0,!ge)){ge=!0;var c,o,h=zingchart.plugins.tree[r.id].data,g=ie.length,s=ne.length,p=0,_=0,u=[];""!==oe&&(h[re[oe]].x=he[0],h[re[oe]].y=he[1]);var f,C=[];for(d=0;d<g;d++)if((c=h[ie[d]])&&(f=H[c.container],C[c.container]||(C[c.container]={minX:Number.MAX_VALUE,minY:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,maxY:-Number.MAX_VALUE}),c.id!==oe)){var Z,x={x:f.x+f.width/2,y:f.y+f.height/2},v={x:f.x+f.width/2,y:f.y+f.height/2},z=k,X=1,E="";null!==ZC._n_(c.level)&&c.level>0&&z>20&&(z=Math.round(Math.max(20,z-5*c.level)));var I=new ZC.ZCVector(e(x,c),t(x,c)),R=new ZC.ZCVector(0,0),j=new ZC.ZCVector(0,0);for(o=0;o<g;o++)if(d!==o&&c.container===h[ie[o]].container){X=1,Z=z,E=c.id+"-"+h[ie[o]].id,be[E]&&(Z=be[E]),N&&h[le[E]]&&zingchart.plugins.tree[r.id].maxLinkValue!==zingchart.plugins.tree[r.id].minLinkValue&&(X+=Math.round((b-m)*(h[le[E]].value-zingchart.plugins.tree[r.id].minLinkValue)/(zingchart.plugins.tree[r.id].maxLinkValue-zingchart.plugins.tree[r.id].minLinkValue)));var P=n(M,c,h[ie[o]],Z,X,w,L,h[le[E]]?1:0);j=ZC.ZCVector.add(j,P)}if(c.level){var D=n(M,c,v,z,X,10*w,L,0);j=ZC.ZCVector.add(j,D)}R=ZC.ZCVector.add(R,j);var Y=!1,U=new ZC.ZCVector(0,0);if(ae[c.id])for(o=0;o<ae[c.id].length;o++){X=1,Z=z,E=c.id+"-"+h[re[ae[c.id][o]]].id,be[E]&&(Z=be[E]),N&&(X=m,zingchart.plugins.tree[r.id].maxLinkValue!==zingchart.plugins.tree[r.id].minLinkValue&&(X+=Math.round((b-m)*(h[le[E]].value-zingchart.plugins.tree[r.id].minLinkValue)/(zingchart.plugins.tree[r.id].maxLinkValue-zingchart.plugins.tree[r.id].minLinkValue))));var F=i(y,c,h[re[ae[c.id][o]]],Z,X);F.fMagnitude/=2,U=ZC.ZCVector.add(U,F),h[re[ae[c.id][o]]].id===oe&&(Y=!0)}else{var B=i(y,c,v,z,1);U=ZC.ZCVector.add(U,B)}if(ae[c.id]?(U.fMagnitude>z/10||ae[c.id].length>1)&&(U=ZC.ZCVector.multiply(U,Math.min(1,(Y?2.5:1)/ae[c.id].length))):U.fMagnitude=Math.min(5*(Y?2.5:1),U.fMagnitude),c.cg){var S=i(999*y,c,c.cg,5,1);U=ZC.ZCVector.add(U,S)}R=ZC.ZCVector.add(R,U),R=ZC.ZCVector.multiply(R,ce);var O=(I=ZC.ZCVector.add(I,R)).toXY(),T=e(c,{x:f.x+f.width/2+O[0],y:f.y+f.height/2+O[1]});p+=T,_=Math.max(_,T),c.__x=f.x+f.width/2+O[0],c.__y=f.y+f.height/2+O[1]}for(d=0;d<g;d++)(c=h[ie[d]]).id!==oe&&(c.x=c.__x,c.y=c.__y),C[c.container].minX=Math.min(C[c.container].minX,c.x),C[c.container].maxX=Math.max(C[c.container].maxX,c.x),C[c.container].minY=Math.min(C[c.container].minY,c.y),C[c.container].maxY=Math.max(C[c.container].maxY,c.y);var q=0,G=[];for(d=0;d<C.length;d++)G[d]=1,C[d].maxX-C[d].minX>H[d].width&&(G[d]=Math.min(G[d],H[d].width/(C[d].maxX-C[d].minX))),C[d].maxY-C[d].minY>H[d].height&&(G[d]=Math.min(G[d],H[d].height/(C[d].maxY-C[d].minY))),C[d].diffX=H[d].x+H[d].width/2-(C[d].maxX+C[d].minX)/2,C[d].diffY=H[d].y+H[d].height/2-(C[d].maxY+C[d].minY)/2,q+=e({x:H[d].x+H[d].width/2,y:H[d].y+H[d].height/2},{x:(C[d].maxX+C[d].minX)/2,y:(C[d].maxY+C[d].minY)/2});var K={};for(d=0;d<g;d++)(c=h[ie[d]]).cg||(""===oe?(c.x+=C[c.container].diffX/k,c.y+=C[c.container].diffY/k):h[re[oe]].container!==c.container&&(c.x+=C[c.container].diffX/k,c.y+=C[c.container].diffY/k)),ze[c.id]&&(c.x=ze[c.id][0]||c.x,c.y=ze[c.id][1]||c.y),1!==G[c.container]?(c._x_=H[c.container].x+H[c.container].width/2+(c.x-H[c.container].x-H[c.container].width/2)*G[c.container],c._y_=H[c.container].y+H[c.container].height/2+(c.y-H[c.container].y-H[c.container].height/2)*G[c.container]):(c._x_=c.x,c._y_=c.y),se[c.id]=[c._x_,c._y_],K={id:"node_"+c.id,x:c._x_,y:c._y_},15===de&&(K.visible=pe),u.push(K);for(d=0;d<s;d++)if(c=h[ne[d]]){var Q=h[re[c.source]],J=h[re[c.target]];K={id:"link_"+Q.id+"_"+J.id,points:[[Q._x_,Q._y_],[J._x_,J._y_]]},15===de&&(K.visible=_e),u.push(K)}zingchart.exec(r.id,"updateobject",{type:"shape",data:u}),++de<15||de<V&&(p>1&&_>.1||q>2)?(ce=Math.max(.001,ce-A),window.setTimeout(me,1)):ge=!1}},be={},ye=zingchart.plugins.tree[r.id]._render_graph_=function(){zingchart.exec(r.id,"removeobject",{type:"shape",cls:"zctreeshape"}),ee=[],te=[],ie=[],ne=[],re={},ae={},le={};var e,t=zingchart.plugins.tree[r.id].data,i=!1,n=[],a=0;for(d=0;d<t.length;d++)((e=t[d]).parent||e.children)&&(i=!0),"node"===e.type?(ie.push(d),re[e.id]=d,n[e.container]||(n[e.container]=[],a++),n[e.container].push(d)):(ne.push(d),ae[e.source]=ae[e.source]||[],ae[e.source].push(e.target),ae[e.target]=ae[e.target]||[],ae[e.target].push(e.source),le[e.source+"-"+e.target]=d,le[e.target+"-"+e.source]=d);ve(a);for(var l={},c=0;c<H.length;c++){var o=H[c];if(n[c]=n[c]||[],n[c].length){var h=[o.x+o.width/2,o.y+o.height/2];if(i)for(var g={},_=0;_<n[c].length;_++)if((e=t[n[c][_]]).parent){var u=t[re[e.parent]];if(u){var f=l[u.id],C=ZC.AR.BN(f[0],f[1],Math.max(25,60-5*u.level),g[e.parent]);l[e.id]=[C[0],C[1]];var Z=15;e.level<=1&&(Z=360/Math.max(1,(u.children||[]).length)),g[e.id]||(g[e.id]=g[u.id],e.children&&u.children.length>1&&(g[e.id]-=15*(e.children.length-1)/2)),g[u.id]+=Z}}else l[e.id]=[h[0],h[1]],g[e.id]=1;else for(var x=Math.ceil(Math.sqrt(n[c].length)),y=Math.min(10,Math.round(o.width/x)),M=y*x,w=Math.min(10,Math.round(o.height/x)),k=w*x,V=0;V<x;V++)for(var A=0;A<x;A++){var L=V*x+A;L<n[c].length&&(l[t[n[c][L]].id]=[h[0]-M/2+A*y,h[1]-k/2+V*w])}}}for(d=0;d<ie.length;d++){e=t[ie[d]],se[e.id]?(e.x=se[e.id][0],e.y=se[e.id][1]):(e.x=l[e.id][0],e.y=l[e.id][1]);var N=v;zingchart.plugins.tree[r.id].maxValue!==zingchart.plugins.tree[r.id].minValue&&(N+=Math.round((z-v)*(e.value-zingchart.plugins.tree[r.id].minValue)/(zingchart.plugins.tree[r.id].maxValue-zingchart.plugins.tree[r.id].minValue))),e.size=1+.5*N/z;var X,E=ZC._i_(-1!==e.group?e.group:e.level||"0"),I={};if(ZC._cp_(zingchart.plugins.tree.graph_defaults.node,I),ZC._cp_({id:"node_"+e.id,cls:"zctreeshape","background-color":p[E%p.length],size:N},I),ZC._cp_(s.node||{},I),ZC._cp_(s["node[group-"+e.group+"]"],I),ZC._cp_(s["node[container-"+e.container+"]"],I),e.cls)for(var R=e.cls.split(/\s/),j=0;j<R.length;j++)ZC._cp_(s["node[cls-"+R[j]+"]"],I);if(s.nodes&&s.nodes[e.id]&&ZC._cp_(s.nodes[e.id],I),I["js-rule"])try{var P=ZC.execFn(I["js-rule"].replace("javascript:","").replace("()",""),window,r.id,e,I);P&&ZC._cp_(P,I)}catch(O){}e.style&&ZC._cp_(e.style,I);var D={decimals:null,short:!1,"thousands-separator":",","decimals-separator":"."};if(ZC._cp_(I,D),I.label&&I.label.text){for(X in I.label.text=I.label.text.replace(/%text/gi,e.text).replace(/%node-value/gi,zingchart.formatNumber(e["node-value"],D)).replace(/%value/gi,zingchart.formatNumber(e.value,D)),e)"data-"===X.substring(0,5)&&(I.label.text=I.label.text.replace(new RegExp("%"+X,"g"),e[X]));I.label.text=I.label.text.replace(new RegExp("%data-([a-zA-Z0-9]+)","g"),"")}if(I.tooltip&&I.tooltip.text){for(X in ZC._cp_(I.tooltip,D),I.tooltip.text=I.tooltip.text.replace(/%text/gi,e.text).replace(/%node-value/gi,zingchart.formatNumber(e["node-value"],D)).replace(/%value/gi,zingchart.formatNumber(e.value,D)),e)"data-"===X.substring(0,5)&&(I.tooltip.text=I.tooltip.text.replace(new RegExp("%"+X,"g"),e[X]));I.tooltip.text=I.tooltip.text.replace(new RegExp("%data-([a-zA-Z0-9]+)","g"),"")}zingchart.plugins.tree[r.id].bFirstRender&&(null===ZC._n_(I.visible)||I.visible||(pe=!1),I.visible=!1),null!==ZC._n_(I.x)||null!==ZC._n_(I.y)?(ze[e.id]=[0,0],null!==ZC._n_(I.x)?(I.x=ZC._i_(I.x),ze[e.id][0]=I.x):I.x=e.x,null!==ZC._n_(I.y)?(I.y=ZC._i_(I.y),ze[e.id][1]=I.y):I.y=e.y):(I.x=e.x,I.y=e.y),ee.push(I)}for(d=0;d<ne.length;d++){e=t[ne[d]];var Y=t[re[e.source]],U=t[re[e.target]],F=m;zingchart.plugins.tree[r.id].maxLinkValue!==zingchart.plugins.tree[r.id].minLinkValue&&(F+=Math.round((b-m)*(e.value-zingchart.plugins.tree[r.id].minLinkValue)/(zingchart.plugins.tree[r.id].maxLinkValue-zingchart.plugins.tree[r.id].minLinkValue)));var B={};if(ZC._cp_(zingchart.plugins.tree.graph_defaults.link,B),ZC._cp_({id:"link_"+Y.id+"_"+U.id,cls:"zctreeshape","fast-vector-path":!0,"line-width":F,points:[[Y.x,Y.y],[U.x,U.y]]},B),ZC._cp_(s.link||{},B),ZC._cp_(s["link[group-"+Y.group+"]"],B),ZC._cp_(s["link[container-"+Y.container+"]"],B),ZC._cp_(s["link[source-"+Y.id+"]"],B),ZC._cp_(s["link[target-"+U.id+"]"],B),e.cls&&ZC._cp_(s["link[cls-"+e.cls+"]"],B),B["js-rule"])try{var S=ZC.execFn(B["js-rule"].replace("javascript:","").replace("()",""),window,r.id,e,Y,U,B);S&&ZC._cp_(S,B)}catch(O){}s.links&&s.links[Y.id+"-"+U.id]&&ZC._cp_(s.links[Y.id+"_"+U.id],B),zingchart.plugins.tree[r.id].bFirstRender&&(null===ZC._n_(B.visible)||B.visible||(_e=!1),B.visible=!1),B.length&&(be[Y.id+"-"+U.id]=be[U.id+"-"+Y.id]=B.length),te.push(B)}zingchart.exec(r.id,"addobject",{type:"shape",data:te.concat(ee)}),zingchart.plugins.tree[r.id].bFirstRender=!1,window.setTimeout(function(){me(!0)},1)},Me=function(){a.T2=[],H=[],$=[],ee=[],te=[];var e=zingchart.plugins.tree[r.id].data,t=[],i=[];for(d=0;d<e.length;d++)0!==e[d].level||e[d].sibling||(t.push(e[d]),i.push(d));T();var n,l,c,g={};for(d=0;d<e.length;d++)g[e[d].container+"-"+e[d].level]=g[e[d].container+"-"+e[d].level]||[],g[e[d].container+"-"+e[d].level].push(e[d].idx);ve(t.length);for(var f=0;f<H.length;f++)if(t[f]){for(d=0;d<i.length;d++)d===f&&q(i[d],d);for(S(),o=O;o>=0;o--)if(g[f+"-"+o])for(d=0;d<g[f+"-"+o].length;d++)G(g[f+"-"+o][d]);for(S(),d=0;d<i.length;d++)K(i[d]);for(S(),o=O-1;o>=0;o--)if(g[f+"-"+o])for(d=0;d<g[f+"-"+o].length;d++)Q(g[f+"-"+o][d]);for(S(),o=O-1;o>=0;o--)if(g[f+"-"+o])for(var m=1,b=0;m>0&&b<128;){for(m=0,d=0;d<g[f+"-"+o].length;d++)m+=J(g[f+"-"+o][d]);b++}for(S(),d=0;d<e.length;d++)if(e[d].container===f&&e[d].children)for(h=1;h<e[d].children.length;h++)W(e[d].children[h]);for(S(),o=O-1;o>=0;o--)if(g[f+"-"+o])for(d=0;d<g[f+"-"+o].length;d++)Q(g[f+"-"+o][d]);S();var y=Number.MAX_VALUE,M=-Number.MAX_VALUE;for(d=0;d<e.length;d++)e[d].container===f&&(""!==e[d].parent?e[d].visible&&e[e[d].pidx].visible&&$.push([e[d].pidx,e[d].idx]):e[d].sibling&&null===ZC._n_(e[d].pidx)&&null!==ZC._n_(B[e[d].sibling])&&$.push([B[e[d].sibling],e[d].idx]),e[d].visible&&(y=Math.min(y,e[d].coord),M=Math.max(M,e[d].coord)));y===M&&(M=y+X);var w,k=H[f],V=function(e){for(var t=0,i=e;i>=0;i--)t+=Math.pow(2,i);return t};switch(_){case"tree-radial":n=Math.min(k.width-Ce-xe,k.height-fe-Ze)/(2*Math.max(O,1)),0!==C&&(n=Math.pow(2,O-1)*Math.min(k.width-Ce-xe,k.height-fe-Ze)/V(O-1));break;case"tree-down":case"tree-up":n=(k.height-fe-Ze)/Math.max(O,1),0!==C&&(n=Math.pow(2,O-1)*(k.height-fe-Ze)/V(O-1));break;case"tree-left":case"tree-right":n=(k.width-Ce-xe)/Math.max(O,1),0!==C&&(n=Math.pow(2,O-1)*(k.width-xe-Ce)/V(O-1))}for(d=0;d<e.length;d++)if(e[d].visible&&e[d].container===f)switch(_){case"tree-right":if(w=(k.height-fe-Ze)/(M-y),e[d].y=k.y+fe+(e[d].coord-y)*w,0===O&&(e[d].y+=k.height/2),e[d].x=k.x+xe,0===C)e[d].x+=e[d].level*n;else if(-1===C)for(o=0;o<e[d].level;o++)e[d].x+=n*Math.pow(2,-o);else if(1===C)for(o=0;o<e[d].level;o++)e[d].x+=n*Math.pow(2,-O+o+1);break;case"tree-left":if(w=(k.height-fe-Ze)/(M-y),e[d].y=k.y+fe+(e[d].coord-y)*w,0===O&&(e[d].y+=k.height/2),e[d].x=k.x+k.width-Ce,0===C)e[d].x-=e[d].level*n;else if(-1===C)for(o=0;o<e[d].level;o++)e[d].x-=n*Math.pow(2,-o);else if(1===C)for(o=0;o<e[d].level;o++)e[d].x-=n*Math.pow(2,-O+o+1);break;case"tree-down":if(w=(k.width-Ce-xe)/(M-y),e[d].x=k.x+xe+(e[d].coord-y)*w,0===O&&(e[d].x+=k.width/2),e[d].y=k.y+fe,0===C)e[d].y+=e[d].level*n;else if(-1===C)for(o=0;o<e[d].level;o++)e[d].y+=n*Math.pow(2,-o);else if(1===C)for(o=0;o<e[d].level;o++)e[d].y+=n*Math.pow(2,-O+o+1);break;case"tree-up":if(w=(k.width-Ce-xe)/(M-y),e[d].x=k.x+xe+(e[d].coord-y)*w,0===O&&(e[d].x+=k.width/2),e[d].y=k.y+k.height-Ze,0===C)e[d].y-=e[d].level*n;else if(-1===C)for(o=0;o<e[d].level;o++)e[d].y-=n*Math.pow(2,-o);else if(1===C)for(o=0;o<e[d].level;o++)e[d].y-=n*Math.pow(2,-O+o+1);break;case"tree-radial":if(w=Z/(M-y+1),e[d].angle=x+(e[d].coord-y)*w,e[d].radius=0,0===C)e[d].radius+=e[d].level*n;else if(-1===C)for(o=0;o<e[d].level;o++)e[d].radius+=n*Math.pow(2,-o-1);else if(1===C)for(o=0;o<e[d].level;o++)e[d].radius+=n*Math.pow(2,-O+o);e[d].cx=k.x+xe+(k.width-xe-Ce)/2,e[d].cy=k.y+fe+(k.height-fe-Ze)/2,R=ZC.AR.BN(e[d].cx,e[d].cy,e[d].radius,e[d].angle),e[d].x=R[0],e[d].y=R[1]}}var A={},L=u?zingchart.plugins.tree.orgchart_defaults:zingchart.plugins.tree.tree_defaults;for(d=0;d<e.length;d++)if(e[d].visible&&!e[d].fake){l=e[d];var N,I=Math.round(v+(z-v)*(l.value-zingchart.plugins.tree[r.id].minValue)/(zingchart.plugins.tree[r.id].maxValue-zingchart.plugins.tree[r.id].minValue)),P={};if(ZC._cp_(L.node,P),ZC._cp_({id:"node_"+l.id,cls:"zctreeshape","background-color":p[l.level%p.length],"hover-state":{"background-color":ZC.AQ.JS(p[l.level%p.length],20)},x:l.x,y:l.y,size:I,dataTreeIndex:l.idx},P),l.children&&l.children.length?ZC._cp_(L["node[parent]"],P):ZC._cp_(L["node[leaf]"],P),l.collapsed&&ZC._cp_(L["node[collapsed]"],P),ZC._cp_(s.node||{},P),l.children&&l.children.length?ZC._cp_(s["node[parent]"],P):ZC._cp_(s["node[leaf]"],P),l.collapsed&&ZC._cp_(s["node[collapsed]"],P),ZC._cp_(s["node[container-"+l.container+"]"],P),ZC._cp_(s["node[level-"+l.level+"]"],P),l.parent&&ZC._cp_(s["node[parent-"+e[l.pidx].id+"]"],P),l.cls)for(var D=l.cls.split(/\s/),Y=0;Y<D.length;Y++)ZC._cp_(s["node[cls-"+D[Y]+"]"],P);if(s.nodes&&s.nodes[l.id]&&ZC._cp_(s.nodes[l.id],P),s.nodes&&s.nodes[ZC.VA(l.id)]&&ZC._cp_(s.nodes[ZC.VA(l.id)],P),P.label&&(P.label.x=l.x,P.label.y=l.y,L.node.label_jsRule&&ZC._cp_(L.node.label_jsRule(l,P,_),P.label)),P["js-rule"])try{var U=ZC.execFn(P["js-rule"].replace("javascript:","").replace("()",""),window,r.id,l,P);U&&ZC._cp_(U,P)}catch(_e){}l.style&&ZC._cp_(l.style,P);var F={decimals:null,short:!1,"thousands-separator":",","decimals-separator":"."};if(ZC._cp_(P,F),P.label&&P.label.text){for(N in P.label.text=P.label.text.replace(/%text/gi,l.text).replace(/%node-value/gi,zingchart.formatNumber(l["node-value"],F)).replace(/%value/gi,zingchart.formatNumber(l.value,F)),l)"data-"===N.substring(0,5)&&(P.label.text=P.label.text.replace(new RegExp("%"+N,"g"),l[N]));P.label.text=P.label.text.replace(new RegExp("%data-([a-zA-Z0-9]+)","g"),"")}if(P.tooltip&&P.tooltip.text){for(N in ZC._cp_(P.tooltip,F),P.tooltip.text=P.tooltip.text.replace(/%text/gi,l.text).replace(/%node-value/gi,zingchart.formatNumber(l["node-value"],F)).replace(/%value/gi,zingchart.formatNumber(l.value,F)),l)"data-"===N.substring(0,5)&&(P.tooltip.text=P.tooltip.text.replace(new RegExp("%"+N,"g"),l[N]));P.tooltip.text=P.tooltip.text.replace(new RegExp("%data-([a-zA-Z0-9]+)","g"),"")}ee.push(P),A[l.id]=[],A[l.id][0]=ZC._i_(P.width||P.size||"0"),A[l.id][1]=ZC._i_(P.height||P.size2||P.size||"0"),A[l.id][2]=ZC._i_(P["offset-x"]||"0"),A[l.id][3]=ZC._i_(P["offset-y"]||"0")}for(d=0;d<$.length;d++){c=e[$[d][0]],l=e[$[d][1]];var ie={};if(ZC._cp_(L.link,ie),ZC._cp_({id:"link_"+l.idx+"_"+c.idx,cls:"zctreeshape",type:"line",flat:!0},ie),ZC._cp_(s.link||{},ie),ZC._cp_(s["link[level-"+c.level+"]"],ie),ZC._cp_(s["link[container-"+c.container+"]"],ie),ZC._cp_(s["link[parent-"+c.id+"]"],ie),!(l.sibling&&(c=e[B[l.sibling]],ie.aspect="sibling",ZC._cp_(s["link[sibling]"],ie),c.fake&&l.fake||l.fake&&!l.children))){if(ie["js-rule"])try{var ne=ZC.execFn(ie["js-rule"].replace("javascript:","").replace("()",""),window,r.id,l,c,ie);ne&&ZC._cp_(ne,ie)}catch(_e){}s.links&&s.links[c.id+"_"+l.id]&&ZC._cp_(s.links[c.id+"_"+l.id],ie);var re,ae,le=[],ce=l.x,de=l.y;A[l.id]&&(ce+=A[l.id][2],de+=A[l.id][3]);var oe=c.x,he=c.y;A[c.id]&&(oe+=A[c.id][2],he+=A[c.id][3]);var ge=n;switch(ie.aspect){case"sibling":le=[[ce,de],[oe,he]];break;case"side-before":case"side-after":"tree-down"===_||"tree-up"===_?(u||(ge=ZC._a_(he-de)),le=[[ce,de],[oe+("side-after"===ie.aspect?1:-1)*A[c.id][0]/3,de],[oe+("side-after"===ie.aspect?1:-1)*A[c.id][0]/3,he+("tree-down"===_?1:-1)*ge/E],[oe+("side-after"===ie.aspect?1:-1)*A[c.id][0]/3,he+("tree-down"===_?1:-1)*ge/E],[oe+("side-after"===ie.aspect?1:-1)*A[c.id][0]/3,he]]):(u||(ge=ZC._a_(oe-ce)),le=[[ce,de],[ce,he+("side-after"===ie.aspect?-1:1)*A[c.id][1]/3],[oe+("tree-right"===_?1:-1)*ge/E,he+("side-after"===ie.aspect?-1:1)*A[c.id][1]/3],[oe+("tree-right"===_?1:-1)*ge/E,he+("side-after"===ie.aspect?-1:1)*A[c.id][1]/3],[oe,he+("side-after"===ie.aspect?-1:1)*A[c.id][1]/3]]);break;case"side-between":le=[[ce,de],[oe,de],[oe,he]];break;case"arc":if(j=ZC.AR.K1(oe,he,ce,de),le.push([oe,he]),"tree-up"===_||"tree-down"===_)ae=he-j[1],le.push([oe,j[1]+ae/E,j[0],j[1]]),le.push([ce,j[1]-ae/E,ce,de]);else if("tree-left"===_||"tree-right"===_)re=oe-j[0],le.push([j[0]+re/E,he,j[0],j[1]]),le.push([j[0]-re/E,de,ce,de]);else if("tree-radial"===_&&c.level>0){var se=ZC.AR.BN(H[l.container].x+H[l.container].width/2,H[l.container].y+H[l.container].height/2,c.radius+(l.radius-c.radius)/5,c.angle),pe=ZC.AR.BN(H[l.container].x+H[l.container].width/2,H[l.container].y+H[l.container].height/2,c.radius+4*(l.radius-c.radius)/5,l.angle);le.push([se[0],se[1],j[0],j[1]]),le.push([pe[0],pe[1],ce,de])}le.push([ce,de]);break;case"split":le.push([oe,he]),"tree-up"===_||"tree-down"===_?(u||(ge=ZC._a_(he-de)),le.push([oe,he+ge/E*("tree-down"===_?1:-1)]),le.push([ce,he+ge/E*("tree-down"===_?1:-1)])):"tree-left"===_||"tree-right"===_?(u||(ge=ZC._a_(oe-ce)),le.push([oe+ge/E*("tree-right"===_?1:-1),he]),le.push([oe+ge/E*("tree-right"===_?1:-1),de])):"tree-radial"===_&&(R=ZC.AR.BN(H[l.container].x+H[l.container].width/2,H[l.container].y+H[l.container].height/2,c.radius+(l.radius-c.radius)/2,c.angle),le.push([R[0],R[1]]),le.push([H[l.container].x+H[l.container].width/2,H[l.container].y+H[l.container].height/2,c.radius+(l.radius-c.radius)/2,c.angle,l.angle,c.angle>l.angle?1:0])),le.push([ce,de]);break;case"line":le=[[ce,de],[oe,he]]}ie.points=le,te.push(ie)}}zingchart.exec(r.id,"removeobject",{type:"shape",cls:"zctreeshape"}),zingchart.exec(r.id,"addobject",{type:"shape",data:te.concat(ee)})};if("graph"===_){if(ye(),!zingchart.plugins.tree[r.id].navSetup){var we=function(){oe=""};zingchart.bind(r.id,"shape_mousedown",function(e){if(0===e.ev.button&&0===e.shape.id.indexOf("node_")){var t=ZC.Q.MO(e.ev),i=ZC.A5("#"+r.id+"-top").offset();he=[t[0]-i.left,t[1]-i.top],zingchart.bind(r.id,ZC._[49],we),oe=e.shape.id.replace("node_","")}}),zingchart.bind(r.id,"shape_mouseup",we),zingchart.bind(r.id,ZC._[48],function(e){""!==oe?(e.ev.preventDefault(),he=[e.x,e.y],me(!0),(he[0]<10||he[0]>a.I-10||he[1]<10||he[1]>a.F-10)&&we(e)):"none"===e.target&&(l.KW(),l.A7&&l.A.A7&&l.A7.AO&&a.A7.onmouseout(e.ev))}),zingchart.bind(r.id,"beforedestroy",function(e){zingchart.plugins.tree[e.id]._render_graph_=null,zingchart.plugins.tree[e.id].navSetup=!1}),zingchart.plugins.tree[r.id].navSetup=!0}}else Me(),I||zingchart.plugins.tree[r.id].navSetup||(zingchart.bind(r.id,"shape_click",function(e){0===e.shape.id.indexOf("node_")&&window.setTimeout(function(){!function(e){for(var t=zingchart.plugins.tree[r.id].data,i=Y(e,!0),n=0;n<i.length;n++)0===n?t[i[n]].collapsed=!t[i[n]].collapsed:t[i[n]].visible=!t[i[n]].visible}(e["data-tree-index"]),Me()},33)}),zingchart.plugins.tree[r.id].navSetup=!0)}};zingchart.bind(null,"gcomplete",function(e){a(e)}),zingchart.extendAPI("tree.addnode",function(e,t){if(zingchart.plugins.tree[e]&&t.data){var i=!0;null!==ZC._n_(t.update)&&(i=ZC._b_(t.update));var n=t.data;n.id=n.id||"N"+ZC._r_(1e4,99999),n.text=n.text||n.id,n.type="node",n[ZC._[9]]=n[ZC._[9]]||1,n.container=n.container||0,n.group=n.group||0,zingchart.plugins.tree[e].data.push(n),i&&(r(e),zingchart.plugins.tree[e]._render_graph_())}}),zingchart.extendAPI("tree.removenode",function(e,t){if(zingchart.plugins.tree[e]&&t.id){var i=!0;if(null!==ZC._n_(t.update)&&(i=ZC._b_(t.update)),!t.id)return;for(var n=zingchart.plugins.tree[e].data.length-1;n>=0;n--)"node"===zingchart.plugins.tree[e].data[n].type&&zingchart.plugins.tree[e].data[n].id===t.id?zingchart.plugins.tree[e].data.splice(n,1):("link"===zingchart.plugins.tree[e].data[n].type&&zingchart.plugins.tree[e].data[n].source===t.id||zingchart.plugins.tree[e].data[n].target===t.id)&&zingchart.plugins.tree[e].data.splice(n,1);i&&(r(e),zingchart.plugins.tree[e]._render_graph_())}}),zingchart.extendAPI("tree.getdata",function(e){return zingchart.plugins.tree[e]?zingchart.plugins.tree[e].data:null}),zingchart.extendAPI("tree.set",function(e,t){if(zingchart.plugins.tree[e]&&t.data){var i=!0;null!==ZC._n_(t.update)&&(i=ZC._b_(t.update));var n=t.data;null!==ZC._n_(n["attraction-constant"])&&(zingchart.plugins.tree[e].attractionConstant=ZC._f_(n["attraction-constant"])),null!==ZC._n_(n["repulsion-constant"])&&(zingchart.plugins.tree[e].repulsionConstant=ZC._i_(n["repulsion-constant"])),null!==ZC._n_(n["spring-length"])&&(zingchart.plugins.tree[e].springLength=ZC._f_(n["spring-length"])),i&&(r(e),zingchart.plugins.tree[e]._render_graph_())}return null}),zingchart.extendAPI("tree.addlink",function(e,t){if(zingchart.plugins.tree[e]&&t.data){var i=!0;null!==ZC._n_(t.update)&&(i=ZC._b_(t.update));var n=t.data;if(!n.source||!n.target)return;for(var a=0,l=0;l<zingchart.plugins.tree[e].data.length;l++)"node"===zingchart.plugins.tree[e].data[l].type&&(zingchart.plugins.tree[e].data[l].id!==n.source&&zingchart.plugins.tree[e].data[l].id!==n.target||a++);if(2!==a)return;n.type="link",n[ZC._[9]]=n[ZC._[9]]||1,zingchart.plugins.tree[e].data.push(n),i&&(r(e),zingchart.plugins.tree[e]._render_graph_())}}),zingchart.extendAPI("tree.removelink",function(e,t){if(zingchart.plugins.tree[e]&&t.data){var i=!0;null!==ZC._n_(t.update)&&(i=ZC._b_(t.update));var n=t.data;if(!n.source||!n.target)return;for(var a=zingchart.plugins.tree[e].data.length-1;a>=0;a--)(zingchart.plugins.tree[e].data[a].source===n.source&&zingchart.plugins.tree[e].data[a].target===n.target||zingchart.plugins.tree[e].data[a].source===n.target&&zingchart.plugins.tree[e].data[a].target===n.source)&&zingchart.plugins.tree[e].data.splice(a,1);i&&(r(e),zingchart.plugins.tree[e]._render_graph_())}})}}();