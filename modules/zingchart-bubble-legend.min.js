/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.15
*/
zingchart.setModule("bubble-legend"),zingchart.plugins.bubblelegend={},zingchart.plugins.bubblelegend.info={},zingchart.bind(null,"complete",function(e){var n=zingchart.getLoader(e.id),e=zingchart.getModules(n);if(-1!==ZC.AV(e,"bubble-legend"))for(var i=0,t=n.AG.length;i<t;i++){var l=!1,a={},r=n.AG[i];if(r.o["bubble-legend"])for(var o=0,d=r.AY.A4.length;o<d;o++){var b=r.AY.A4[o];"bubble"!==b.AF&&"hbubble"!==b.AF||(l=!0,a["g"+b.A1E]=a["g"+b.A1E]||{min:Number.MAX_VALUE,max:-Number.MAX_VALUE,maxSize:0,graphid:i,plotindex:b.L,color:"-1"!==b.A2.A0?b.A2.A0:b.BP[1]},a["g"+b.A1E].max=Math.max(a["g"+b.A1E].max,b.RP),a["g"+b.A1E].min=Math.min(a["g"+b.A1E].min,b.O0))}if(l){var g,c=r.o["bubble-legend"]||{},h=c.layout||"v",u=(null===ZC._n_(c.margin)&&(c.margin="v"===h?"auto 10 auto auto":"auto auto 10 auto"),[]),p=0,s=Number.MAX_VALUE,x=0,z=0,_=zingchart.getInstance(r,"textbox");for(g in a)for(x++,Z=a[g],v=(C=ZC.AQ.WI(Z.min,Z.max))[3],p=Math.max(p,zingchart.exec(n.K,"getbubblesize",{graphid:Z[ZC._[3]],plotindex:Z.plotindex,value:C[1]})),s=Math.min(s,zingchart.exec(n.K,"getbubblesize",{graphid:Z[ZC._[3]],plotindex:Z.plotindex,value:0===C[0]?C[0]+C[2]:C[0]})),E=C[0];E<=C[1];E+=C[2])0<E&&(V={decimals:v,"short":!0,"thousands-separator":",","decimals-separator":"."},ZC._cp_(c.item,V),X=zingchart.formatNumber(C[1],V),_.append({"font-size":10,text:X}),_.append(c.item),_.parse(),z=Math.max(z,_.I));var m=ZC._i_(c.padding||5),f=zingchart.getInstance(r,"box"),A=(f.append({id:r.K+"-bubblelegend-box"}),"v"===h?f.append({width:2*m+2*p+10+z,height:2*m+2*p*x+10*(x-1)+5}):f.append({width:2*m+2*p*x+10*(x-1)+x*z,height:2*m+2*p+30}),f.append(r.o["bubble-legend"]),f.parse(),{type:"rect",x:f.iX+f.I/2,y:f.iY+f.F/2,width:f.I,height:f.F,"background-color":"#fff"}),y=(ZC._cp_(r.o["bubble-legend"],A),u.push(A),0);for(g in a){for(var C,Z=a[g],v=(C=ZC.AQ.WI(Z.min,Z.max))[3],M=[],E=C[0];E<=C[1];E+=C[2])0<E&&M.push(E);var w=[];for(p<15?w.push(M[M.length-1]):!(15<=p&&p<25)&&10<=p-s?w.push(M[0],M[Math.floor(M.length/2.5)],M[M.length-1]):w.push(M[0],M[M.length-1]),E=0;E<w.length;E++){var I,K,L=zingchart.exec(n.K,"getbubblesize",{graphid:Z[ZC._[3]],plotindex:Z.plotindex,value:w[E]}),V={decimals:v,"short":!0,"thousands-separator":",","decimals-separator":"."},X=(ZC._cp_(c.item,V),zingchart.formatNumber(w[E],V)),N=n.K+"_"+Z[ZC._[3]],N=(1<x&&(N+="_"+Z.plotindex),K="h"===h?(I=f.iX+y*(10+2*p+z)+m,f.iY+p+m+15):(I=f.iX+p+m,f.iY+m+2*p+y*(10+2*p)+5),zingchart.plugins.bubblelegend.info[N]={x:I,y:K,layout:h},{id:r.K+"-bubblelegend-circle_"+y+"_"+E,type:"circle",size:L,alpha:.25,"background-color":1<x?Z.color:"#999","line-style":"dotted","border-width":1,"border-alpha":1,"border-color":"#333"});"h"===h?ZC._cp_({x:I+L,y:K,connector:{"line-width":1,"line-style":"dotted","line-color":"#333",anchor:"l",points:[[I+2*L,K],[I+2*L,E===w.length-1&&3===w.length?K-p/2-5:K+(E%2==0?-1:1)*(p+10)]]}},N):ZC._cp_({x:I,y:K-L,connector:{"line-width":1,"line-style":"dotted","line-color":"#333",anchor:"l",points:[[I,K-2*L],[I+p+10,K-2*L]]}},N),ZC._cp_({label:{color:"#666","font-size":10,align:"left",text:X}},N),ZC._cp_(c.marker,N),ZC._cp_(c.connector,N.connector),ZC._cp_(c.item,N.label),u.push(N)}y++}zingchart.exec(n.K,"addobject",{type:"shape",data:u})}}}),zingchart.bind(null,"node_mouseout",function(e){var n=zingchart.getLoader(e.id),n=zingchart.getModules(n);-1!==ZC.AV(n,"bubble-legend")&&zingchart.exec(e.id,"removeobject",{type:"shape",dynamic:!0,id:e.id+"_"+e.graphindex+"-bubblelegend-circle"})}),zingchart.bind(null,"node_mouseover",function(e){var n,i=zingchart.getLoader(e.id),i=zingchart.getModules(i);-1!==ZC.AV(i,"bubble-legend")&&null!==ZC._n_(e.size)&&(i=e.id+"_"+e.graphindex,zingchart.plugins.bubblelegend.info[i]||(i+="_"+e.plotindex),n={id:e.id+"_"+e.graphindex+"-bubblelegend-circle",type:"circle",size:e.size,"border-width":1,"border-color":"#333"},"h"===zingchart.plugins.bubblelegend.info[i].layout?(n.x=zingchart.plugins.bubblelegend.info[i].x+e.size,n.y=zingchart.plugins.bubblelegend.info[i].y):(n.x=zingchart.plugins.bubblelegend.info[i].x,n.y=zingchart.plugins.bubblelegend.info[i].y-e.size),zingchart.exec(e.id,"addobject",{type:"shape",dynamic:!0,data:n}))});