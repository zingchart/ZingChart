/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.13
*/
zingchart.setModule("multi-guide"),function(){var e,i=[],t=0,a=0,d=!1,l=0,o={},n={};function c(e){var i=zingchart.getLoader(e.id),t=zingchart.getModules(i);if(-1!==ZC.AV(t,"multi-guide")){var a=zingchart.exec(e.id,"getobjectsbyclass",{type:"shape","class":"multi-guide"});zingchart.exec(e.id,"removeobject",{type:"shape",id:a,update:!1});var d=zingchart.exec(e.id,"getobjectsbyclass",{type:"label","class":"multi-guide"});zingchart.exec(e.id,"removeobject",{type:"label",id:d,update:!0})}}zingchart.bind(null,"guide_mousemove",function(e){var n=zingchart.getLoader(e.id),c=zingchart.getModules(n);if(-1!==ZC.AV(c,"multi-guide")){var r=zingchart.getGraph(n,e.graphid).getData(),g={};r.options&&(g=r.options["multi-guide"]||r.options);var u=zingchart.exec(e.id,"getobjectinfo",{graphid:e.graphid,object:"plotarea"});if(i=[].concat(e.items),t=e.guide.x,d){o["guide_"+a]=[].concat(e.items);var h=(g.handle||{}).size||4;zingchart.exec(e.id,"updateobject",{data:[{objtype:"shape",type:"poly",id:"multi_guide_handle_"+l,points:[[t,u.y],[t-2*h,u.y-h],[t-2*h,u.y-3*h],[t+2*h,u.y-3*h],[t+2*h,u.y-h],[t,u.y]]},{objtype:"label",id:"multi_guide_label_"+l,x:t}]})}}}),zingchart.bind(null,"zoom",function(e){c(e)}),zingchart.bind(null,"legend_item_click",function(e){c(e)}),zingchart.bind(null,"label_mouseover",function(e){var i=zingchart.getLoader(e.id),t=zingchart.getModules(i);-1!==ZC.AV(t,"multi-guide")&&-1!==e.labelid.indexOf("multi_guide_label_")&&zingchart.exec(e.id,"hideguide")}),zingchart.bind(null,"label_mouseout",function(e){var i=zingchart.getLoader(e.id),t=zingchart.getModules(i);-1!==ZC.AV(t,"multi-guide")&&-1!==e.labelid.indexOf("multi_guide_label_")&&zingchart.exec(e.id,"showguide")}),zingchart.bind(null,"click",function(d){if(("none"===d.target||"node"===d.target)&&d.plotarea){var l=zingchart.getLoader(d.id),c=zingchart.getModules(l);if(-1!==ZC.AV(c,"multi-guide")){var r=zingchart.getGraph(l,d.graphid).getData(),g={};r.options&&(g=r.options["multi-guide"]||r.options);var u=zingchart.exec(d.id,"getobjectinfo",{graphid:d.graphid,object:"plotarea"});if(i.length>0){var h=a+1+"";o["guide_"+a]=[].concat(i),n["guide_"+a]=h;var _=g.label||{},p={align:"left",color:"#000","background-color":"#fff #ccc","border-width":1,"border-color":"#333",bold:!0,"font-size":10,padding:"4 8"};ZC._cp_(_,p),ZC._cp_({text:h},p),(e=zingchart.getInstance(l,"textbox")).setData(p),e.parse(),ZC._cp_({objtype:"label",id:"multi_guide_label_"+a,"class":"multi-guide",cursor:"hand",x:t,y:u.y+u.height-e.get("height")},p);var s=g.line||{},b={"line-width":1,"line-color":"#333"};ZC._cp_(s,b),ZC._cp_({objtype:"shape",type:"line",id:"multi_guide_line_"+a,flat:!0,"class":"multi-guide",points:[[t,u.y],[t,u.y+u.height]]},b);var m=g.handle||{},y={"background-color":"#fff #ccc","border-width":1,"border-color":"#333","z-index":1,cursor:"hand"};ZC._cp_(m,y);var x=m.size||4;ZC._cp_({objtype:"shape",type:"poly",id:"multi_guide_handle_"+a,"class":"multi-guide",points:[[t,u.y],[t-2*x,u.y-x],[t-2*x,u.y-3*x],[t+2*x,u.y-3*x],[t+2*x,u.y-x],[t,u.y]]},y);var f=g.close||{},z={"background-color":"#fff #ccc","hover-state":{"background-color":"#fff #fbb"},"border-width":1,color:"#000","border-color":"#333",padding:"0 4 2 4","font-size":10,"border-radius":3,anchor:"c",shadow:!0,"z-index":99};ZC._cp_(f,z);var v=f.text||"x";ZC._cp_({objtype:"label",id:"multi_guide_close_"+a,cursor:"hand","class":"multi-guide",x:t+2.5*x,y:u.y-3.5*x,text:v},z),zingchart.exec(d.id,"addobject",{data:[b,y,z,p],update:!1});for(var j=0;j<i.length;j++){var C=zingchart.exec(d.id,"getobjectinfo",{object:"node",plotindex:i[j].plotindex,nodeindex:i[j].nodeindex});zingchart.exec(d.id,"addobject",{type:"label",data:[{id:"multi_guide_label_"+a+"_"+j,"class":"multi-guide",x:i[j].x,y:i[j].y,text:i[j].text,color:C.color,"background-color":C.lineColor,padding:"3 6",callout:!0,"callout-position":t<u.x+u.width/2?"left":"right"}],update:!1})}zingchart.exec(d.id,"repaintobjects"),a++}}}}),zingchart.bind(null,"label_click",function(e){var i=zingchart.getLoader(e.id),t=zingchart.getModules(i);if(-1!==ZC.AV(t,"multi-guide")){var d,c=zingchart.getGraph(i,e.graphid).getData();c.options&&(c.options["multi-guide"]||c.options);var r=zingchart.exec(e.id,"getplotlength",{graphid:e.graphid});if(-1!==e.labelid.indexOf("multi_guide_label_")){l=e.labelid.replace("multi_guide_label_","");var g=n["guide_"+l]||"";(d=window.prompt("Marker Name:",g))&&(n["guide_"+l]=d,window.setTimeout(function(){zingchart.exec(e.id,"updateobject",{type:"label",id:"multi_guide_label_"+l,data:{text:d}})},100))}-1!==e.labelid.indexOf("multi_guide_close_")&&(l=e.labelid.replace("multi_guide_close_",""),window.setTimeout(function(){o["guide_"+l]=[],n["guide_"+l]=null,zingchart.exec(e.id,"removeobject",{type:"shape",id:["multi_guide_line_"+l,"multi_guide_handle_"+l]}),zingchart.exec(e.id,"removeobject",{type:"label",id:["multi_guide_label_"+l,"multi_guide_close_"+l]});for(var i=[],t=0;t<r;t++)i.push("multi_guide_label_"+l+"_"+t);zingchart.exec(e.id,"removeobject",{type:"label",id:i});var d=!1;for(var c in n)null!==ZC._n_(n[c])&&(d=!0);d||(a=0,o={},n={})},100))}}),zingchart.bind(null,"shape_mousedown",function(e){e.ev.preventDefault();var a=zingchart.getLoader(e.id),o=zingchart.getModules(a);if(-1!==ZC.AV(o,"multi-guide")&&-1!==e.shapeid.indexOf("multi_guide_handle_")){var n=zingchart.getGraph(a,e.graphid).getData(),c={};n.options&&(c=n.options["multi-guide"]||n.options),d=!0;var r=zingchart.exec(e.id,"getobjectinfo",{graphid:e.graphid,object:"plotarea"}),g=zingchart.exec(e.id,"getplotlength",{graphid:e.graphid});l=ZC._i_(e.shapeid.replace("multi_guide_handle-","")),zingchart.exec(e.id,"setobjectsmode",{mode:"flat"});for(var u=(c.handle||{}).size||4,h=[],_=0;_<g;_++)h.push("multi_guide_label_"+l+"_"+_);zingchart.exec(e.id,"removeobject",{type:"label",id:h,update:!1}),zingchart.exec(e.id,"updateobject",{data:[{objtype:"shape",type:"line",id:"multi_guide_line_"+l,visible:!1,points:[[t,r.y],[t,r.y+r.height]]},{objtype:"shape",type:"poly",id:"multi_guide_handle_"+l,flat:!0,shadow:!0,"shadow-distance":3,points:[[t,r.y],[t-2*u,r.y-u],[t-2*u,r.y-3*u],[t+2*u,r.y-3*u],[t+2*u,r.y-u],[t,r.y]]},{objtype:"label",id:"multi_guide_close_"+l,flat:!0,visible:!1,x:t+2*u,y:r.y-3*u}]});var p=function(a){if(-1===a.target.id.indexOf("multi_guide_close_")){d=!1,zingchart.exec(e.id,"setobjectsmode",{mode:"normal"}),zingchart.exec(e.id,"updateobject",{data:[{objtype:"shape",type:"line",id:"multi_guide_line_"+l,visible:!0,points:[[t,r.y],[t,r.y+r.height]]},{objtype:"shape",type:"poly",id:"multi_guide_handle_"+l,flat:!1,shadow:!1,points:[[t,r.y],[t-2*u,r.y-u],[t-2*u,r.y-3*u],[t+2*u,r.y-3*u],[t+2*u,r.y-u],[t,r.y]]},{objtype:"label",id:"multi_guide_close_"+l,flat:!1,visible:!0,x:t+2*u,y:r.y-3*u},{objtype:"label",id:"multi_guide_label_"+l,flat:!0,x:t}]});for(var o=0;o<i.length;o++){var n=zingchart.exec(e.id,"getobjectinfo",{object:"node",plotindex:i[o].plotindex,nodeindex:i[o].nodeindex});zingchart.exec(e.id,"addobject",{type:"label",data:[{id:"multi_guide_label_"+l+"_"+o,"class":"multi-guide",x:i[o].x,y:i[o].y,flat:!0,color:n.color,text:i[o].text,"background-color":n.lineColor,padding:"3 6",callout:!0,"callout-position":t<r.x+r.width/2?"left":"right"}]})}ZC.A5(document).unbind("mouseup",p)}};ZC.A5(document).bind("mouseup",p)}})}();