/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.15
*/
ZC.WJ.push("nestedpie"),ZC.A6P=ZC.JN.CD({$i:function(n){this.b(n);n=this;n.AF="nestedpie",n.AY=new ZC.A59(n)},A2P:function(n){return n},MT:function(n){if("m"===n)return new ZC.TB(this)},ACN:function(){var n=this,C=n.MT("m","scale");C.BD="scale",C.K=n.K+"-scale",n.BO.push(C),n.b()}}),ZC.A59=ZC.LQ.CD({$i:function(n){this.b(n);this.KP=[],this.PB=[]},ACU:function(){return new ZC.U1(this)},parse:function(){for(var n=this,C=(n.KP=[],n.PB=[],n.b(),n.A.BM("scale")),i=C.iX+C.I/2,t=1,A=0,e=n.A4.length;A<e;A++)if(n.C.E["plot"+A+".visible"]||"hide"===n.C.getToggleAction())for(var Z,a,B,o=0,l=n.A4[A].S.length;o<l;o++)n.A4[A].S[o]&&(Z=n.A4[A].S[o],null===ZC._n_(n.PB[o])&&(n.PB[o]=n.A4[A].DK),B=(a=n.PB[o])+360*Z.AC/n.KP[o],n.PB[o]=B,Z.B4=a,Z.BL=B,Z=Z.H1(!0))&&"in"!==Z.o[ZC._[7]]&&(B=((0<=(a=ZC._i_((a+B)/2))&&a<=90||270<=a&&a<=360?C.iX+C.I-(Z.I+25):C.iX+(Z.I+25))-i)/ZC.EF(a),t=ZC.CY(t,2*B/C.I),B=C.F/2-(Z.F/2+10),t=ZC.CY(t,2*B/C.F));t=ZC.BR(.15,ZC.CY(.85,t)),"auto"===C.o["size-factor"]&&(C.o["size-factor"]=C.JU=t)}}),ZC.U1=ZC.I1.CD({$i:function(n){this.b(n);n=this;n.AF="nestedpie",n.BO=["scale"],n.U6=0,n.SP=0,n.DK=0,n.C3=null,n.P7="bg",n.aBandWidths=null},U2:function(){return new ZC.A4A(this)},parse:function(){var n,C=this;C.BP=C.O6(),C.C2=C.BP[0],C.A0=C.BP[1],C.AE=C.BP[2],C.BX=C.BP[0],C.B9=C.BP[0],C.NR(),C.b(),C.U&&(C.C3=new ZC.CZ(C),C.C.A.B6.load(C.C3.o,["graph.plot.value-box.connector",C.AF+".plot.value-box.connector"]),null!==ZC._n_(n=C.C.o.plot)&&null!==ZC._n_(n[ZC._[17]])&&null!==ZC._n_(n=n[ZC._[17]].connector)&&C.C3.append(n),C.C3.append(C.o[ZC._[17]].connector)),C.assign_a([["slice-start","U6","fp"],["offset","U6","fp"],[ZC._[8],"U6","fp"],["band-space","SP","fp"],["ref-angle","DK","i"],["band-widths","aBandWidths"]]),C.DK%=360;for(var i=0,t=C.S.length;i<t;i++)C.S[i]&&(C.C.E["plot"+C.L+".visible"]||"hide"===C.C.getToggleAction())&&(null===ZC._n_(C.A.KP[i])&&(C.A.KP[i]=0),C.A.KP[i]+=ZC._f_(C.S[i].AC))},paint:function(){var n=this;n.b(),n.KI=n.CS("bl",0),n.PI(!0)}}),ZC.A4A=ZC.LM.CD({bCXY:!0,$i:function(n){this.b(n)},setup:function(){var n=this,C=n.C.BM(n.A.BW("k")[0]);n.iX=C.iX+C.I/2+C.BK,n.iY=C.iY+C.F/2+C.BJ,n.I3||(n.copy(n.A),n.o[ZC._[8]]=null,n.E6=n.A.E6,n.DG()&&n.parse(!1),n.I3=!0)},AC9:function(){var n=this,C=(n.B4+n.BL)/2%360,n=ZC.AQ.BN(n.iX,n.iY,n.CP+n.E.bandwidth/2+n.DX,C);return[n[0],n[1]]},K2:function(n,C,i,t){var A=this,e=A.A.MU(),Z=(ZC._cp_(C,e),100*A.AC/A.A.A.KP[A.L]),a=""+Z;return null!==ZC._n_(e[ZC._[12]])&&(a=Z.toFixed(ZC.BR(0,ZC._i_(e[ZC._[12]])))),A.CA=[["%node-percent-value",a],["%npv",a]],n=A.b(n,C,i,t)},ABE:function(n){var C={},i="in";return null!==ZC._n_(n.o[ZC._[7]])&&(i=n.o[ZC._[7]]),C.color="out"===i?this.A0:this.C2,C},AC6:function(n){var C,i,t=this,A="in",e=(null!==ZC._n_(n.o[ZC._[7]])&&(A=n.o[ZC._[7]]),n.I),Z=n.F,a=(t.B4+t.BL)/2%360,A="out"===A?t.L===t.A.S.length-1?(i=ZC.AQ.BN(t.iX,t.iY,t.A.U6+t.A.S.length*(t.E.bandwidth+t.E.bandspace)+15+n.DX,a),C=0<=a&&a<90||270<=a&&a<360?i[0]+10+t.BK:i[0]-e-10+t.BK,i[1]-Z/2+t.BJ):C=-1:(C=(i=ZC.AQ.BN(t.iX,t.iY,t.CP+t.E.bandwidth/2+n.DX,a))[0]-e/2+t.BK,i[1]-Z/2+t.BJ);return null!==ZC._n_(n.o.x)&&(C=n.iX),null!==ZC._n_(n.o.y)&&(A=n.iY),[ZC._i_(C),ZC._i_(A),a]},H1:function(n){var C,i,t=this,A=t.b(n);if(n)return A;A.AP&&null!==ZC._n_(A.AN)&&""!==A.AN&&(n="in","out"===(n=null!==ZC._n_(A.o[ZC._[7]])?A.o[ZC._[7]]:n))&&t.L===t.A.S.length-1&&((n=new ZC.DT(t.A)).Z=n.C8=t.G.usc()?t.G.mc("top"):t.C.AJ["3d"]||t.G.KD?ZC.AL(t.C.K+"-plots-vb-c"):ZC.AL(t.C.K+"-plot-"+t.A.L+"-vb-c"),n.append(t.A.C3.o),n.B9=t.A0,n.DH="line",n.D=[],C=(t.B4+t.BL)/2%360,i=ZC.AQ.BN(t.iX,t.iY,t.CP+t.E.bandwidth+A.DX,C),A=ZC.AQ.BN(t.iX,t.iY,t.A.U6+t.A.S.length*(t.E.bandwidth+t.E.bandspace)+15+A.DX,C),i[0]+=t.BK,A[0]+=t.BK,i[1]+=t.BJ,A[1]+=t.BJ,n.D.push(i),0<=C&&C<90||270<=C&&C<360?n.D.push([A[0],A[1],A[0]+10,A[1]]):n.D.push([A[0],A[1],A[0]-10,A[1]]),n.parse(),n.IQ=function(n){return t.IQ(n)},n.DG()&&n.parse(),n.AP)&&n.paint()},paint:function(){var n,i=this,C=(i.b(),i.C.BM(i.A.BW("k")[0])),C=(i.setup(),i.AI=ZC.CY(C.I,C.F)/2,i.AI=C.JU*i.AI,i.CP=i.A.U6,i.CP<1&&(i.CP=i.A.U6*i.AI),i.A.SP),t=(C<1&&(C=i.A.SP*i.AI),2),A=i.AI-i.CP;if(null!==ZC._n_(i.A.aBandWidths)&&null!==ZC._n_(i.A.aBandWidths[i.L])){1<(t=ZC._f_(i.A.aBandWidths[i.L]))&&(t/=100),t=ZC._i_(A*t);for(var t=ZC.BR(t,2),e=0,Z=0;Z<i.L;Z++)e+=ZC._f_(i.A.aBandWidths[Z]);1<e&&(e/=100),e=ZC._i_(A*e),i.CP+=e}else t=(A-(i.A.S.length-1)*C)/i.A.S.length,t=ZC.BR(t,2),i.CP+=i.L*(t+C);i.AI=i.CP+t;var a=i.O=i.A.IJ(i,i),B=(i.H8(a),new ZC.DT(i.A)),A=(B.K=i.K,B.Z=i.A.CS("bl",1),B.C8=i.A.CS("bl",0),B.copy(a),B.iX=i.iX,B.iY=i.iY,B.DH="pie",B.B4=i.B4,B.BL=i.BL,B.CP=i.CP,B.AI=i.AI,B.parse(),B.CP);function o(){var n=B.F1(),C=i.C.K+ZC._[34]+i.C.K+ZC._[35]+i.A.L+ZC._[6],C=ZC.Q.FP("poly",i.A.E9,i.A.IE)+'class="'+C+'" '+i.a11y()+' id="'+i.K+ZC._[30]+n+'" />';i.A.A.H3.push(C),i.A.U&&i.A.U.AP&&i.H1()}if(i.E.bandwidth=t,i.E.bandspace=C,i.A.GG&&!i.C.HM){var l=B,s={},t=(l.B4=i.B4,l.BL=i.BL,s.angleStart=i.B4,s.angleEnd=i.BL,i.A.LE);for(n in l.C5=0,s.alpha=a.C5,2===t?(l.BL=i.B4,s.angleEnd=i.BL):3===t?(l.CP=A+i.E.bandwidth,s.slice=A):4===t?(C=ZC.AQ.BN(i.iX,i.iY,i.AI,(i.B4+i.BL)/2),l.iX=C[0],l.iY=C[1],s.x=i.iX,s.y=i.iY):5===t&&(l.B4=l.BL=(i.B4+i.BL)/2,s.angleStart=i.B4,s.angleEnd=i.BL),i.A.FY)l[ZC.E8.GO[ZC.EH(n)]]=i.A.FY[n],s[ZC.EH(n)]=a[ZC.E8.GO[ZC.EH(n)]];if(i.C.EQ||(i.C.EQ={}),null!==ZC._n_(i.C.EQ[i.A.L+"-"+i.L]))for(n in i.C.EQ[i.A.L+"-"+i.L])l[ZC.E8.GO[ZC.EH(n)]]=i.C.EQ[i.A.L+"-"+i.L][n];i.C.EQ[i.A.L+"-"+i.L]={},ZC._cp_(s,i.C.EQ[i.A.L+"-"+i.L]);A=new ZC.E8(l,s,i.A.JH,i.A.LC,ZC.E8.RN[i.A.LF],function(){o()});(A.AX=i).LU(A)}else B.paint(),o()},A15:function(n){var C=this;ZC.move||C.MC({layer:n,type:"shape",initcb:function(){this.copy(C),this.iX=C.iX,this.iY=C.iY,this.DH="pie",this.A0=C.A.BP[3],this.AE=C.A.BP[2],this.B4=C.B4,this.BL=C.BL,this.CP=C.CP,this.AI=C.AI},parsecb:function(){this.o[ZC._[8]]=null}})}});