/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.15
*/
zingchart.setModule("rankflow"),function(){var e,t;ZC.ZCRankFlow=((e=function(){this.AF9="palette",this.C2="#6a921f",this.BP=[],this.KD=!1,this.AGQ=function(){for(var e=(16777215*Math.random()+1<<0).toString(16);e.length<6;)e="0"+e;return"#"+e}}).getDefaults=function(t){var a={};return ZC._cp_(e.B6,a),e.NS[t]&&ZC._cp_(e.NS[t],a),a},e.B6={},e.NS={light:{item:{bold:!0,color:"#808285"},"rank-side":{generated:!0,color:"#fff",bold:!0,"background-color":"#929497"},"rank-overall":{generated:!0,color:"#fff",bold:!0,"background-color":"#57585B"},flow:{generated:!0,shadow:!1}},dark:{item:{bold:!0,color:"#D1D3D4"},"rank-side":{generated:!0,color:"#fff",bold:!0,"background-color":"#929497"},"rank-overall":{generated:!0,color:"#fff",bold:!0,"background-color":"#57585B"},flow:{generated:!0,shadow:!1}},classic:{item:{bold:!0,color:"#D1D2D3"},"rank-side":{generated:!0,color:"#000",bold:!0,"background-color":"#999"},"rank-overall":{generated:!0,color:"#fff",bold:!0,"background-color":"#333"},flow:{generated:!0,shadow:!0}}},e);var a=0,l=0;zingchart.bind(null,"dataparse",function(e,r){var o,n,p,_,i,c,h=zingchart.getLoader(e.id);zingchart.initThemes(h);for(var s=ZC.ZCRankFlow.getDefaults(e.theme),g=0,d=r.graphset.length;g<d;g++)if(r.graphset[g].type&&"rankflow"===r.graphset[g].type){var f=r.graphset[g].type,C=r.graphset[g];ZC._todash_(C);var Z={};C.options&&(Z=C.options[f]||C.options),ZC._todash_(Z);var u=Z.style||{},x=zingchart.getGraphInfo(h,r,g);C.shapes||(C.shapes=[]),C.labels||(C.labels=[]),t=new ZC.ZCRankFlow;var b=!0;null!==ZC._n_(o=Z["global-ranking"])&&(b=ZC._b_(o)),null!==ZC._n_(o=Z["color-type"])&&(t.AF9=o),null!==ZC._n_(o=Z.color)&&(t.C2=ZC.AO.GD(o)),null!==ZC._n_(o=Z.palette)&&(t.BP=o),null!==ZC._n_(o=Z.flat)&&(t.KD=ZC._b_(o));var k=[],v=[],w=C["scale-x"]||{};w.item=C["scale-x"].item||{},(o=w.values)&&(k=o),(o=w.labels)&&(v=o);var y,m,B=C.series;for(n=0;n<B.length;n++)B[n].rank=B[n].rank||n+"";B.sort(function(e,t){return e.rank-t.rank});var R=0,D=0,z=0,I=0,A=0;for(n=0;n<v.length;n++)(m={}).text=v[n],ZC._cp_(s.item,m),ZC._cp_(m,w.item),(y=zingchart.getInstance(h,"textbox")).append(m),y.parse(),R=ZC.BR(R,y.I),z=ZC.BR(z,y.F);for(n=0;n<B.length;n++)_=B[n].style||{},m={text:B[n].text},ZC._cp_(u["item-flow"],m),ZC._cp_(_["item-flow"],m),(y=zingchart.getInstance(h,"textbox")).append(m),y.parse(),R=ZC.BR(R,y.I),D=ZC.BR(D,y.F);for(m={text:n,bold:!0},(y=zingchart.getInstance(h,"textbox")).append(m),y.parse(),(I=ZC.BR(I,y.I))<D&&(I=D),m={generated:!0,text:n,bold:!0,width:2*I},ZC._cp_(u["rank-overall"],m),(y=zingchart.getInstance(h,"textbox")).append(m),y.parse(),(A=ZC.BR(A,y.I))<D&&(A=D),a=B.length,l=ZC.BR(k.length,v.length),n=0;n<a;n++)c=B[n].ranks||[],l=ZC.BR(l,c.length);var F,P=[0,0,0,0];P=[0,0,0,0];if(null!==ZC._n_(o=Z.margin))P=zingchart.getInstance(h,"box").m_(o,"all",x.plotarea.width,x.plotarea.height);x.plotarea.x+=P[3],x.plotarea.y+=P[0],x.plotarea.width-=P[1]+P[3],x.plotarea.height-=P[0]+P[2];var G=20;null!==ZC._n_(o=Z["sep-space"])&&(G=ZC._i_(o)),b?F=(x.plotarea.width-A-G-3*I-(l+1)*R)/(l-1):(G=0,F=(x.plotarea.width-3*I-l*R)/(l-1));var K,N,S=ZC._i_((x.plotarea.height-z-B.length*D)/(B.length+1));if(null!==ZC._n_(o=Z["col-space"])&&(F=ZC._i_(o)),null!==ZC._n_(o=Z["row-space"])&&(S=ZC._i_(o)),K=x.plotarea.x,N=x.plotarea.y,z>0)for(m={generated:!0,bold:!0,text:"OVERALL<br>RANK",flat:!0},ZC._cp_(w.item,m),ZC._cp_(u["label-overall"],m),ZC._cp_({x:K,y:N,width:A+R},m),b&&C.labels.push(m),n=0;n<v.length;n++)K=x.plotarea.x+(b?A+R+G:0)+1.5*I+n*(R+F),N=x.plotarea.y,m={generated:!0,bold:!0},ZC._cp_(w.item,m),ZC._cp_({x:K,y:N,width:R,flat:!0,text:v[n]},m),C.labels.push(m);for(n=0;n<a;n++)K=x.plotarea.x+(b?A+R+G:0),N=x.plotarea.y+z+S+n*(D+S),m={},ZC._cp_(s["rank-side"],m),ZC._cp_(u["rank-left"],m),ZC._cp_({id:"rank_"+(n+1)+"_l",x:K,y:N,width:I,height:D,flat:!0,text:n+1},m),C.labels.push(m),K=x.plotarea.x+(b?A+R+G:0)+2*I+l*(R+F)-F,m={},ZC._cp_(s["rank-side"],m),ZC._cp_(u["rank-right"],m),ZC._cp_({id:"rank_"+(n+1)+"_r",x:K,y:N,width:I,height:D,flat:!0,text:n+1},m),C.labels.push(m),K=x.plotarea.x,m={},ZC._cp_(s["rank-overall"],m),ZC._cp_(u["rank-overall"],m),ZC._cp_({id:"rank_"+(n+1)+"_g",x:K,y:N,width:A,height:D,flat:!0,text:n+1},m),b&&C.labels.push(m);for(n=0;n<B.length;n++){if(_=B[n].style||{},i=t.C2,"palette"===t.AF9)if(t.BP.length>0)i=t.BP[n%t.BP.length];else i=zingchart.getPalette(h,n,"bar")[1];else"random"===t.AF9&&(i=t.AGQ());for(K=x.plotarea.x+A,N=x.plotarea.y+z+S+n*(D+S),-1!==(B[n].ranks||-1)&&(m={generated:!0,"background-color":i,color:"#fff"},ZC._cp_(u["item-overall"],m),ZC._cp_(_["item-overall"],m),ZC._cp_({id:"box_overall_"+n,x:K,y:N,width:R,height:D,flat:t.KD,text:B[n].text},m),b&&C.labels.push(m)),c=B[n].ranks,p=0;p<c.length;p++)if(null!==ZC._n_(c[p])){var L=[];if(K=x.plotarea.x+(b?A+R+G:0)+1.5*I+p*(R+F),N=x.plotarea.y+z+S+(c[p]-1)*(D+S),null!==ZC._n_(c[p+1])){var O=x.plotarea.x+(b?A+R+G:0)+1.5*I+(p+1)*(R+F),E=x.plotarea.y+z+S+(c[p+1]-1)*(D+S);L.push([K,N]),L.push([K+R,N]),L.push([O,E]),L.push([O+R,E]),L.push([O+R,E+D]),L.push([O,E+D]),L.push([K+R,N+D]),L.push([K,N+D])}else L.push([K,N]),L.push([K+R,N]),L.push([K+R,N+D]),L.push([K,N+D]);var M={};M["background-color"]=i,ZC._cp_(s.flow,M),ZC._cp_(C.plot,M),ZC._cp_(B[n],M),ZC._cp_(u.flow,M),ZC._cp_(_.flow,M),ZC._cp_({id:"flow_"+n+"_"+p,type:"poly",points:L,flat:!0,label:{visible:!1}},M),C.shapes.push(M);var Q={"background-color":"#fff",color:"#333","border-width":1,"border-color":"#999",padding:10,text:"%text ranked on %rank at %scale-value"};for(var T in ZC._cp_(u.tooltip,Q),ZC._cp_(_.tooltip,Q),Q.text=Q.text.replace(/%text/gi,B[n].text).replace(/%rank/gi,c[p]).replace(/%scale-value/gi,k[p]),B[n])-1!==T.indexOf("data-")&&(Q.text=Q.text.replace(new RegExp("%"+T,"g"),B[n][T][p]||""));m={generated:!0,color:"#fff"},ZC._cp_(u["item-flow"],m),ZC._cp_(_["item-flow"],m),ZC._cp_({id:"box_"+n+"_"+p,x:K,y:N,width:R,height:D,text:B[n].text,tooltip:Q},m),C.labels.push(m)}}}return r})}();