/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.15
*/
zingchart.setModule("zoom-buttons"),function(){var s,g,C={labels:["Zoom","From","To"],"adjust-layout":!0,style:{label:{"font-weight":"bold",color:"#000"},date:{width:100,height:20,"font-size":11,"border-width":1,"border-color":"#ccc"},button:{"data-active":!1,padding:3,"border-radius":3,"background-color":"#ddd","font-weight":"normal",color:"#000",shadow:!1,width:30,margin:5,"z-index":0,"hover-state":{"background-color":"#eee","font-weight":"normal",shadow:!0},"selected-state":{"z-index":1,"data-active":!0,"background-color":"#333",color:"#fff","font-weight":600,shadow:!0}}},buttons:[{text:"1m",type:"month",count:1},{text:"3m",type:"month",count:3},{text:"6m",type:"month",count:6},{text:"1y",type:"year",count:1},{type:"ytd",text:"YTD"},{type:"all",text:"All"}]},Z=[],d=null,a=!1,x={},f={},y={},k={},D={},o=(zingchart.bind(null,"dataparse",function(t,e){var a,o=zingchart.getLoader(t.id),i=zingchart.getModules(o);if(-1!==ZC.AV(i,"zoom-buttons")){Z=[].concat(C.buttons);for(var d=0,n=e[ZC._[16]].length;d<n;d++){var l=zingchart.getGraphInfo(o,e,d),r=e[ZC._[16]][d],c=(r[ZC._[10]]=r[ZC._[10]]||[],{}),m=(ZC._cp_(C,c),r.options&&(m=r.options["zoom-buttons"]||r.options,zingchart.normalize(m),ZC._cp_(m,c)),l.graph.x+ZC._i_(c.x||20)),u=l.graph.y+ZC._i_(c.y||10);for(c["adjust-layout"]&&(m=l.plotarea.x,u=l.plotarea.y-30),f[t.id]={},y[t.id]=!1,k[t.id]=[],D[t.id]=[],ZC._cp_(C.style,f[t.id]),c.style&&ZC._cp_(c.style,f[t.id]),c.buttons&&(Z=[].concat(c.buttons)),a=0;a<Z.length;a++){var h=Z[a].type||"all",b=ZC._i_(Z[a].count||1);switch(h){case"ytd":case"all":Z[a].diff=-1;break;case"year":Z[a].diff=ZC.YR*b;break;case"month":Z[a].diff=ZC.MON*b;break;case"week":Z[a].diff=7*ZC.DAY*b;break;case"day":Z[a].diff=ZC.DAY*b;break;case"hour":Z[a].diff=ZC.HR*b;break;case"minute":Z[a].diff=ZC.MIN*b}Z[a].text=Z[a].text||b+Z[a].type}for(a=r[ZC._[10]].length-1;0<=a;a--)r[ZC._[10]][a]["data-zoom-item"]&&r[ZC._[10]].splice(a,1);s=null!==ZC._n_(f[t.id].button[ZC._[19]])?ZC._i_(f[t.id].button[ZC._[19]]):30,g=null!==ZC._n_(f[t.id].button.margin)?ZC._i_(f[t.id].button.margin):5,x[t.id]={},x[t.id].iDateWidth=null!==ZC._n_(f[t.id].date[ZC._[19]])?ZC._i_(f[t.id].date[ZC._[19]]):100,x[t.id].iDateHeight=null!==ZC._n_(f[t.id].date[ZC._[20]])?ZC._i_(f[t.id].date[ZC._[20]]):20,x[t.id].iDateFontSize=null!==ZC._n_(f[t.id].date["font-size"])?ZC._i_(f[t.id].date["font-size"]):11,x[t.id].iDateBorderWidth=null!==ZC._n_(f[t.id].date[ZC._[62]])?ZC._i_(f[t.id].date[ZC._[62]]):1;var l=zingchart.getInstance(o,"textbox"),p=m,_={id:"zoomLabelZoom","data-zoom-item":!0,cls:"zoomLabel",flat:!0,x:m,y:u,text:c[ZC._[10]][0]||"Zoom"};for(ZC._cp_(f[t.id].label,_),l.o=_,l.parse(),r[ZC._[10]].push(_),p+=l.I+g,a=0;a<Z.length;a++){var z=Z[a].text||" ",z={id:"zoomLink"+a,"data-zoom-item":!0,"data-zoom-type":Z[a].type,"data-zoom-diff":Z[a].diff,cls:"zoomLink",x:p,y:u,width:s,text:z};ZC._cp_(f[t.id].button,z),r[ZC._[10]].push(z),p+=s+g}_={id:"zoomLabelFrom","data-zoom-item":!0,cls:"zoomLabel",flat:!0,x:p+=s+g+30,y:u,text:c[ZC._[10]][1]||"From"},_=(ZC._cp_(f[t.id].label,_),l.o=_,l.parse(),r[ZC._[10]].push(_),{id:"zoomLabelFromDate","data-zoom-item":!0,cls:"zoomLabel",x:p+=l.I+g,y:u,width:100,text:" "}),_=(ZC._cp_(f[t.id].date,_),r[ZC._[10]].push(_),p+=x[t.id].iDateWidth+2*g,c[ZC._[10]][2]||"To"),c={id:"zoomLabelTo","data-zoom-item":!0,cls:"zoomLabel",flat:!0,x:p,y:u,text:_},_=(ZC._cp_(f[t.id].label,c),l.o=c,l.parse(),r[ZC._[10]].push(c),{id:"zoomLabelToDate","data-zoom-item":!0,cls:"zoomLabel",x:p+=l.I+g,y:u,width:100,text:" "});ZC._cp_(f[t.id].date,_),r[ZC._[10]].push(_)}}return e}),function(t){return zingchart.exec(t.id,"getobjectinfo",{object:"scale",graphid:t.graphid,name:ZC._[50]})||zingchart.exec(t.id,"getobjectinfo",{object:"scale",graphid:t.graphid,name:ZC._[50]})}),i=function(t){var e=ZC.AO.YF(k[t.id][0],"%M %d, %Y"),a=ZC.AO.YF(k[t.id][1],"%M %d, %Y");zingchart.exec(t.id,"updateobject",{type:"label",data:[{id:"zoomLabelFromDate",text:e},{id:"zoomLabelToDate",text:a}]})},n=function(t){var e,a,o,i;d&&(d=null,t=ZC.AL(t))&&(e=t.getAttribute("data-chartid"),a=t.getAttribute("data-graphid"),(i=-1)!==(i=3===(o=t.value.split(/\-|\:/)).length?new Date(ZC._i_(o[0]),ZC._i_(o[1])-1,ZC._i_(o[2]),0,0,0).getTime():i)&&("zoomLabelFromDate"===t.id?i>D[e][0]&&i<D[e][1]&&(k[e][0]=i):i>D[e][0]&&i<D[e][1]&&(k[e][1]=i)),t.parentNode.removeChild(t),zingchart.exec(e,"zoomto",{kmin:k[e][0],kmax:k[e][1],graphid:a}))};zingchart.bind(null,"complete",function(t){var e=zingchart.getLoader(t.id),e=zingchart.getModules(e);-1!==ZC.AV(e,"zoom-buttons")&&(a||(ZC.A3(document).bind(ZC._[47],function(t){"zoomLabelFromDate"!==t.target.id&&"zoomLabelToDate"!==t.target.id&&n(d)}),ZC.A3(".zoomInput").live("blur keydown",function(t){t.keyCode&&13!==t.keyCode||n(d)}),a=!0),e=o(t))&&(k[t.id]=[e.minValue,e.maxValue],D[t.id]=[e.minValue,e.maxValue],i(t))}),zingchart.bind(null,"zoom",function(t){var e=zingchart.getLoader(t.id),e=zingchart.getModules(e);if(-1!==ZC.AV(e,"zoom-buttons")){if(t.kmin&&t.kmax)k[t.id]=[t.kmin,t.kmax];else{e=o(t);if(!e)return;k[t.id]=[e.minValue_,e.maxValue_]}i(t),t.zoomButtons||y[t.id]&&(y[t.id]=!1,zingchart.exec(t.id,"updateobject",{type:"label",cls:"zoomLink",data:f[t.id].button}))}}),zingchart.bind(null,"label_click",function(t){var e,a=zingchart.getLoader(t.id),a=zingchart.getModules(a);-1!==ZC.AV(a,"zoom-buttons")&&(a=o(t))&&(y[t.id]=!0,t["data-zoom-type"]&&("all"===t["data-zoom-type"]?zingchart.exec(t.id,"viewall",{graphid:t.graphid,zoomButtons:!0}):"ytd"===t["data-zoom-type"]?(e=new Date(a.maxValue_).getFullYear(),e=new Date(e+"-01-01 00:00:00").getTime(),zingchart.exec(t.id,"zoomto",{kmin:e,kmax:a.maxValue_,graphid:t.graphid,zoomButtons:!0})):zingchart.exec(t.id,"zoomto",{kmin:a.maxValue-t["data-zoom-diff"],kmax:a.maxValue,graphid:t.graphid,zoomButtons:!0})),"zoomLabelFromDate"===t.labelid||"zoomLabelToDate"===t.labelid?(e=ZC.A3("#"+t.id+"-top"),a=ZC.Q.F8("input"),ZC.Q.G6(a,{type:"text",id:t.labelid,"class":"zoomInput","data-chartid":t.id,"data-graphid":t.graphid}),ZC.Q.P9(a,{"font-size":x[t.id].iDateFontSize+"px","text-align":"center",height:x[t.id].iDateHeight-2*x[t.id].iDateBorderWidth-2+"px",width:x[t.id].iDateWidth-2*x[t.id].iDateBorderWidth-2+"px",position:"absolute",border:"0px solid #ccc",padding:"1px","border-radius":"0px","box-shadow":"none",display:"block",color:"#000",left:e.offset().left+t.label.x+x[t.id].iDateBorderWidth+"px",top:e.offset().top+t.label.y+x[t.id].iDateBorderWidth+"px"}),document.body.appendChild(a),a.value=ZC.AO.YF("zoomLabelFromDate"===t.labelid?k[t.id][0]:k[t.id][1],"%Y-%mm-%dd"),a.focus(),d=t.labelid):(zingchart.exec(t.id,"updateobject",{type:"label",cls:"zoomLink",data:f[t.id].button,update:!1}),zingchart.exec(t.id,"updateobject",{type:"label",id:t.labelid,data:f[t.id].button[ZC._[73]]||{}})))})}();