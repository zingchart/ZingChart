/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.15
*/
ZC.WJ.push("maps"),zingchart.maps||(zingchart.maps={},zingchart.maps.maps={},zingchart.maps.data={}),zingchart.maps.FORCESCALE=0,zingchart.maps.CONNECTORS=1,zingchart.maps.LITE=0,zingchart.maps._DEFAULTS_={_COMMON_:{label:{"font-size":9,padding:"1 2",overlap:!1},tooltip:{"border-radius":6,"background-color":"#fff",color:"#303030","border-width":1,"border-color":"#909090",padding:10}},_POLY_:{alpha:.9,shadow:!0,"shadow-distance":3,"shadow-color":"#ccc","border-width":1,"border-color":"#a3a3a3","background-color":"#e3e3e3","hover-state":{shadow:!0,"background-color":"#d3d3d3","offset-x":-1,"offset-y":-1,"shadow-distance":3},connector:{"line-color":"#666","line-width":1}},_LINE_:{alpha:1,shadow:!1,"line-width":2,"line-color":"#4ea8fc","hover-state":{"line-color":"#4ec8cc","offset-x":0,"offset-y":0,shadow:!1}},_POINT_:{alpha:1,size:3,shadow:!1,"background-color":"#333","hover-state":{"offset-x":0,"offset-y":0,shadow:!1,"border-width":1,"border-color":"#aaa","background-color":"#666"},label:{"font-size":10,"offset-y":8}}},zingchart.maps.LIGHT={"background-color":"#fff",_COMMON_:{label:{"font-size":9,padding:"1 2",overlap:!1},tooltip:{"border-radius":6,"background-color":"#fff",color:"#303030","border-width":1,"border-color":"#909090",padding:10}},_POLY_:{alpha:1,"border-width":1,"border-color":"#fff","background-color":"#DDDDDD","hover-state":{"background-color":"#C4C4C4"},connector:{"line-color":"#666","line-width":1}},_LINE_:{alpha:1,shadow:!1,"line-width":2,"line-color":"#4ea8fc","hover-state":{"line-color":"#4ec8cc","offset-x":0,"offset-y":0,shadow:!1}},_POINT_:{alpha:1,size:3,shadow:!1,"background-color":"#333","hover-state":{"offset-x":0,"offset-y":0,shadow:!1,"border-width":1,"border-color":"#aaa","background-color":"#666"},label:{"font-size":10,"offset-y":8}}},zingchart.maps.DARK={"background-color":"#221F1F",_COMMON_:{label:{"font-size":9,padding:"1 2"},tooltip:{"border-radius":6,"background-color":"#fff",color:"#303030","border-width":1,"border-color":"#909090",padding:10}},_POLY_:{alpha:1,"border-width":1,"border-color":"#221F1F","background-color":"#DDDDDD","hover-state":{"background-color":"#C4C4C4"},connector:{"line-color":"#DDDDDD","line-width":1}},_LINE_:{alpha:1,shadow:!1,"line-width":2,"line-color":"#4ea8fc","hover-state":{"line-color":"#4ec8cc","offset-x":0,"offset-y":0,shadow:!1}},_POINT_:{alpha:1,size:3,shadow:!1,"background-color":"#333","hover-state":{"offset-x":0,"offset-y":0,shadow:!1,"border-width":1,"border-color":"#aaa","background-color":"#666"},label:{"font-size":10,"offset-y":8}}},zingchart.maps.upgrade=function(o){var t,a,e=zingchart.maps.data,r=o.split(".");for(t in 1===r.length?e=e[o]:2===r.length&&(e=e[r[0]][r[1]]),e)"_GROUPS_"!==t&&"_DEFAULTS_"!==t&&"_RULES_"!==t&&null===ZC._n_(e[t].cpoint)&&(null!==ZC._n_(e[t].label.x)&&null!==ZC._n_(e[t].label.y)?e[t].cpoint={x:e[t].label.x,y:e[t].label.y}:(a="point"===e[t].type?e[t].coords[0]:"line"===e[t].type?(a=ZC._i_(e[t].coords.length/2),e[t].coords[a]||e[t].coords[a+1]||e[t].coords[a-1]):zingchart.maps.centroid(e[t].coords),e[t].cpoint={x:a[0].toFixed(4)+"lon",y:a[1].toFixed(4)+"lat"},e[t].label.x=a[0].toFixed(4)+"lon",e[t].label.y=a[1].toFixed(4)+"lat"))},zingchart.maps.centroid=function(o){for(var t,a,e=0,r=0,i=0,n=0,_=o.length;n<_-1;n++)null!==ZC._n_(t=o[n])&&null!==ZC._n_(a=o[n+1])&&(i+=t[0]*a[1]-a[0]*t[1],e+=(t[0]+a[0])*(t[0]*a[1]-a[0]*t[1]),r+=(t[1]+a[1])*(t[0]*a[1]-a[0]*t[1]));return[e/=6*(i*=.5),r/=6*i,i]},zingchart.maps.getMapByGraphIndex=function(o,t){var a,e;for(e in zingchart.maps.maps)if((a=zingchart.maps.maps[e])._INFO_.loaderid===o&&a._INFO_.graphinfo.graph.index===t)return a;return null},zingchart.maps.zoomIn=function(o){o=zingchart.maps.maps[o]||zingchart.maps.data[o];o&&o._INFO_&&(o._INFO_.zoom*=1.25,zingchart.maps.setView(o._INFO_.loaderid,o._INFO_.id,o._INFO_.zoom,o._INFO_.offsetX,o._INFO_.offsetY),ZC.AO.C0("maps.zoom",zingchart.getLoader(o._INFO_.loaderid),o._INFO_))},zingchart.maps.zoomOut=function(o){var t,a,e,r,i,n,_,o=zingchart.maps.maps[o]||zingchart.maps.data[o];o&&o._INFO_&&(t=(e=zingchart.getLoader(o._INFO_.loaderid).AG[o._INFO_.graphinfo.graph.index]).iX+e.I/2,a=e.iY+e.F/2,_=e.I/2,e=e.F/2,r=[(o._INFO_.bbox[0]+o._INFO_.bbox[2])/2,(o._INFO_.bbox[1]+o._INFO_.bbox[3])/2],n=zingchart.maps.getLonLat(o._INFO_.id,[_,e]),o._INFO_.zoom=Math.max(.1,o._INFO_.zoom/1.25),1.25<o._INFO_.zoom?(i=zingchart.maps.getXY(o._INFO_.id,n),o._INFO_.offsetX-=i[0]-_,o._INFO_.offsetY-=i[1]-e):(n=(i=zingchart.maps.getXY(o._INFO_.id,r))[0]-t,_=i[1]-a/2,o._INFO_.offsetX=n*((o._INFO_.zoom-1)/5),o._INFO_.offsetY=_*((o._INFO_.zoom-1)/5)),zingchart.maps.setView(o._INFO_.loaderid,o._INFO_.id,o._INFO_.zoom,o._INFO_.offsetX,o._INFO_.offsetY),ZC.AO.C0("maps.zoom",zingchart.getLoader(o._INFO_.loaderid),o._INFO_))},zingchart.maps.destroyMap=function(o){delete zingchart.maps.maps[o]},zingchart.maps.setView=function(o,t,a,e,r){for(var i=zingchart.getLoader(o),n=0,_=0,s=0;s<i.o[ZC._[16]].length;s++)if(i.o[ZC._[16]][s].shapes)for(var l=0;l<i.o[ZC._[16]][s].shapes.length;l++)if("zingchart.maps"===i.o[ZC._[16]][s].shapes[l].type&&i.o[ZC._[16]][s].shapes[l].options&&(i.o[ZC._[16]][s].shapes[l].options.id===t||i.o[ZC._[16]][s].shapes[l].options.name===t)){n=s,_=l;break}var p=i.o[ZC._[16]][n].shapes[_];p.options=p.options||{},p.options.zoom=Math.abs(ZC._f_(a||"1")),p.options["offset-x"]=ZC._i_(e||"0"),p.options["offset-y"]=ZC._i_(r||"0"),p.options.style=p.options.style||{},p.options.style.label=p.options.style.label||{},null===ZC._n_(p.options.style.label.visible_)&&(p.options.style&&p.options.style.label?p.options.style.label.visible_=null===ZC._n_(p.options.style.label.visible)||p.options.style.label.visible:(p.options.style=p.options.style||{},p.options.style.label=p.options.style.label||{},p.options.style.label.visible_=!0)),ZC._n_(p.options.style.label["adjust-font-size"])&&ZC._b_(p.options.style.label["adjust-font-size"])&&(a=zingchart.maps.maps[t]||zingchart.maps.data[t])&&a._INFO_&&(a._INFO_.baseFontSize||(a._INFO_.baseFontSize=11,p.options.style.label["font-size"]&&(a._INFO_.baseFontSize=ZC._i_(p.options.style.label["font-size"]))),p.options.style.label["font-size"]=Math.min(19,a._INFO_.baseFontSize*a._INFO_.zoom*.65)),zingchart.maps.SKIP_LABELS?p.options.style.label.visible=!1:(p.options.style.label.visible=null===ZC._n_(p.options.style.label.visible_)||p.options.style.label.visible_,p.options.style.label.visible_=null),i.clearGenerated(),zingchart.exec(o,"setdata",{data:i.o})},zingchart.bind(null,"shape_mouseover",function(o){var t=zingchart.getLoader(o.id),a=ZC.Q.MJ(o.ev),a=t.A5D(a[0],a[1]);a&&(t=zingchart.maps.getMapByGraphIndex(o.id,a.L))&&t._INFO_["color-scale"]&&zingchart.plugins.colorscale&&zingchart.plugins.colorscale.info&&zingchart.plugins.colorscale.info[o.id+"_"+a.L]&&zingchart.plugins.colorscale.AGM(o.id,{graphid:o.graphid,value:o["data-value"]})}),zingchart.bind(null,"shape_mouseout",function(o){var t=zingchart.getLoader(o.id),a=ZC.Q.MJ(o.ev),a=t.A5D(a[0],a[1]);a&&(t=zingchart.maps.getMapByGraphIndex(o.id,a.L))&&t._INFO_["color-scale"]&&zingchart.plugins.colorscale&&zingchart.plugins.colorscale.info&&zingchart.plugins.colorscale.info[o.id+"_"+a.L]&&zingchart.plugins.colorscale.clear(o.id,{graphid:o.graphid})}),zingchart.bind(null,"shape_dblclick",function(o){var t=zingchart.getLoader(o.id),a=ZC.Q.MJ(o.ev),a=t.A5D(a[0],a[1]);a&&(t=zingchart.maps.getMapByGraphIndex(o.id,a.L))&&t._INFO_.zooming&&zingchart.maps.zoomToItem(t._INFO_.id,o.shapeid)}),zingchart.bind(null,"label_click",function(o){var t=zingchart.getLoader(o.id),a=ZC.Q.MJ(o.ev),a=t.A5D(a[0],a[1]);a&&(t=zingchart.maps.getMapByGraphIndex(o.id,a.L))&&(o.labelid===t._INFO_.id+"_zoom_in"?zingchart.maps.zoomIn(t._INFO_.id):o.labelid===t._INFO_.id+"_zoom_out"&&zingchart.maps.zoomOut(t._INFO_.id))}),zingchart.bind(null,ZC._[47],function(o){var t,a;0!==o.ev.button||"none"!==o.target&&"shape"!==o.target||(a=zingchart.getLoader(o.id),t=ZC.Q.MJ(o.ev),o.ev.preventDefault(),(t=a.A5D(t[0],t[1]))&&(a=zingchart.maps.getMapByGraphIndex(o.id,t.L))&&a._INFO_.panning&&(zingchart.maps.MD=!0,zingchart.maps.REFX=o.ev.pageX,zingchart.maps.REFY=o.ev.pageY,zingchart.maps.OFFX=0,zingchart.maps.OFFY=0,zingchart.maps.REFOFFX=a._INFO_.offsetX,zingchart.maps.REFOFFY=a._INFO_.offsetY))}),zingchart.bind(null,ZC._[48],function(o){var t,a;zingchart.maps.MD&&(a=zingchart.getLoader(o.id),t=ZC.Q.MJ(o.ev),t=a.A5D(t[0],t[1]))&&(a=zingchart.maps.getMapByGraphIndex(o.id,t.L))&&(zingchart.maps.OFFX=zingchart.maps.REFOFFX+o.ev.pageX-zingchart.maps.REFX,zingchart.maps.OFFY=zingchart.maps.REFOFFY+o.ev.pageY-zingchart.maps.REFY,5<ZC._a_(zingchart.maps.REFOFFX-zingchart.maps.OFFX)+ZC._a_(zingchart.maps.REFOFFY-zingchart.maps.OFFY))&&(zingchart.maps.setView(o.id,a._INFO_.id,a._INFO_.zoom,zingchart.maps.OFFX,zingchart.maps.OFFY),ZC.AO.C0("maps.zoom",zingchart.getLoader(a._INFO_.loaderid),a._INFO_))}),zingchart.bind(null,ZC._[49],function(o){var t,a;zingchart.maps.MD&&(t=zingchart.getLoader(o.id),a=ZC.Q.MJ(o.ev),a=t.A5D(a[0],a[1]))&&zingchart.maps.getMapByGraphIndex(o.id,a.L)&&(zingchart.maps.MD=!1,zingchart.maps.REFOFFX=zingchart.maps.OFFX,zingchart.maps.REFOFFY=zingchart.maps.OFFY)}),zingchart.bind(null,"mousewheel",function(o){var t,a,e,r,i,n,_=zingchart.getLoader(o.id),s=ZC.Q.MJ(o.ev),l=_.A5D(s[0],s[1]);l&&(t=zingchart.maps.getMapByGraphIndex(o.id,l.L),a=l.iX+l.I/2,e=l.iY+l.F/2,t)&&t._INFO_.scrolling&&!o.ev.altKey&&(o.ev.preventDefault(),_=ZC.A3("#"+_.K+"-top"),r=s[0]-_.offset().left-l.iX,s=s[1]-_.offset().top-l.iY,0<o.ev.wheelDelta?(n=zingchart.maps.getLonLat(t._INFO_.id,[r,s]),t._INFO_.zoom*=1.25,i=zingchart.maps.getXY(t._INFO_.id,n),t._INFO_.offsetX-=i[0]-r,t._INFO_.offsetY-=i[1]-s):(_=[(t._INFO_.bbox[0]+t._INFO_.bbox[2])/2,(t._INFO_.bbox[1]+t._INFO_.bbox[3])/2],n=zingchart.maps.getLonLat(t._INFO_.id,[r,s]),t._INFO_.zoom=Math.max(1,t._INFO_.zoom/1.25),1.25<t._INFO_.zoom?(i=zingchart.maps.getXY(t._INFO_.id,n),t._INFO_.offsetX-=i[0]-r,t._INFO_.offsetY-=i[1]-s):(l=(i=zingchart.maps.getXY(t._INFO_.id,_))[0]-a,n=i[1]-e/2,t._INFO_.offsetX=l*((t._INFO_.zoom-1)/5),t._INFO_.offsetY=n*((t._INFO_.zoom-1)/5))),zingchart.maps.setView(o.id,t._INFO_.id,t._INFO_.zoom,t._INFO_.offsetX,t._INFO_.offsetY),ZC.AO.C0("maps.zoom",zingchart.getLoader(t._INFO_.loaderid),t._INFO_))}),zingchart.maps.viewAll=function(o){(zingchart.maps.maps[o]||zingchart.maps.data[o])&&zingchart.maps.zoomTo(o,{zoom:1,offsetX:0,offsetY:0})},zingchart.maps.zoomToItem=function(o,t){var a,e,r,i,n,_,s,l;if(a=zingchart.maps.maps[o]){if(!(_=a[t]))return}else if(!(a=zingchart.maps.data[o])||!(_=a[t]))return;a._INFO_&&(t=a._INFO_.bbox[2]-a._INFO_.bbox[0],e=a._INFO_.bbox[1]-a._INFO_.bbox[3],r=(a._INFO_.bbox[2]+a._INFO_.bbox[0])/2,i=(a._INFO_.bbox[1]+a._INFO_.bbox[3])/2,s=_.bbox[2]-_.bbox[0],l=_.bbox[1]-_.bbox[3],n=(_.bbox[2]+_.bbox[0])/2,_=(_.bbox[1]+_.bbox[3])/2,s=Math.min(t/s,e/l),l=a._INFO_.width/t,t=a._INFO_.height/e,zingchart.maps.zoomTo(o,{zoom:s,offsetX:s*((r-n)*l),offsetY:s*((_-i)*t)}))},zingchart.maps.zoomTo=function(e,r){var i,n,_,s=zingchart.maps.maps[e]||zingchart.maps.data[e];s&&(i={zoom:s._INFO_.zoom,offsetX:s._INFO_.offsetX,offsetY:s._INFO_.offsetY},zingchart.exec(s._INFO_.loaderid,"setobjectsmode",{mode:"flat"}),zingchart.maps.SKIP_LABELS=!0,n=0,_=window.setInterval(function(){var o="regularEaseOut",t=ZC.E8[o](n,i.zoom,r.zoom-i.zoom,10),a=ZC.E8[o](n,i.offsetX,r.offsetX-i.offsetX,10),o=ZC.E8[o](n,i.offsetY,r.offsetY-i.offsetY,10);10===n&&(zingchart.maps.SKIP_LABELS=!1,zingchart.exec(s._INFO_.loaderid,"setobjectsmode",{mode:"normal"})),zingchart.maps.setView(s._INFO_.loaderid,e,t,a,o),10<++n&&(window.clearInterval(_),s._INFO_.zoom=r.fZoom,s._INFO_.offsetX=r.fOffX,s._INFO_.offsetY=r.fOffY,ZC.AO.C0("maps.zoom",zingchart.getLoader(s._INFO_.loaderid),s._INFO_))},1))},zingchart.maps.getInfo=function(o){return zingchart.maps.maps[o]||zingchart.maps.data[o]},zingchart.maps.getItems=function(o){var t=zingchart.maps.maps[o];if(t=t||zingchart.maps.data[o]){var a,e=[];for(a in t)"_DEFAULTS_"===a||"_INFO_"===a||"_GROUPS_"===a||"_RULES_"===a||t._INFO_&&-1===ZC.AV(t._INFO_.items,a)||e.push(a);return e}return null},zingchart.maps.getItemInfo=function(o,t){var a,e;if(a=zingchart.maps.maps[o]){if(e=a[t])return e}else if((a=zingchart.maps.data[o])&&(e=a[t]))return e;return null},zingchart.maps.getXY=function(o,t,a){var e,r;return a=a||"",(e=zingchart.maps.maps[o])?(r={},ZC._cp_(e._INFO_,r),""!==a&&ZC._cp_({map:o,item:a},r),zingchart.maps.lonlat2xy(e._INFO_.x,e._INFO_.y,e._INFO_.width,e._INFO_.height,t,e._INFO_.bbox,r)):null},zingchart.maps.getLonLat=function(o,t){return(o=zingchart.maps.maps[o])?zingchart.maps.xy2lonlat(o._INFO_.x,o._INFO_.y,o._INFO_.width,o._INFO_.height,t,o._INFO_.bbox,o._INFO_):null},zingchart.maps.registerMap=function(e,o){ZC.WJ.push("maps-"+e),zingchart.maps[e]||(zingchart.maps[e]={}),zingchart.maps.data[e]||(zingchart.maps.data[e]=o),zingchart.maps.data[e]._GROUPS_={},zingchart.maps.data[e]._DEFAULTS_=zingchart.maps._DEFAULTS_,zingchart.maps[e]=function(o,t,a){return zingchart.maps.convert({loader:this,loaderdata:t||{},graphid:typeof o.graphid===ZC._[31]?0:o.graphid,data:a,id:o.id||e,x:typeof o.x===ZC._[31]?0:o.x,y:typeof o.y===ZC._[31]?0:o.y,width:typeof o.width===ZC._[31]?1:o.width,height:typeof o.height===ZC._[31]?1:o.height,level:typeof o.level===ZC._[31]?1:o.level,groups:o.groups||[],items:o.items||[],ignore:o.ignore||[],bbox:o.bbox||null,map:zingchart.maps.data[e]})}},zingchart.maps.lonlat2xy=function(o,t,a,e,r,i,n,_){typeof _===ZC._[31]&&(_=!1),n=n||{};var s=Math.abs(ZC._f_(n.zoom||"1")),l=ZC._i_(n.offsetX||"0"),p=ZC._i_(n.offsetY||"0"),c=a/ZC._a_(i[2]-i[0]),h=e/ZC._a_(i[3]-i[1]),p=(c*=s,h*=s,t=t+e*(s-1)/2+p,(o=o-a*(s-1)/2+l)+(ZC._f_(r[0])-ZC.CY(i[0],i[2]))*c),a=t+e-(ZC._f_(r[1])-ZC.CY(i[1],i[3]))*h;return n&&n.map&&(s=(s=zingchart.maps.maps[n.map])||zingchart.maps.data[n.map])&&((l=s[n.item])&&(p+=l.transform.offsetLon*c,a-=l.transform.offsetLat*h,1!==l.transform.scale)&&(r=o+(ZC.CY(l.bbox[0],l.bbox[2])-ZC.CY(i[0],i[2]))*c,n=t+e-(ZC.CY(l.bbox[1],l.bbox[3])-ZC.CY(i[1],i[3]))*h,o=ZC._a_(l.bbox[3]-l.bbox[1])*h,p=r+(p-r)*l.transform.scale,a=n-o+(a-(n-o))*l.transform.scale),_)&&(p+=s._INFO_.graphinfo.graph.x,a+=s._INFO_.graphinfo.graph.y),[p,a]},zingchart.maps.xy2lonlat=function(o,t,a,e,r,i,n){n=n||{};var _=Math.abs(ZC._f_(n.zoom||"1")),s=ZC._i_(n.offsetX||"0"),n=ZC._i_(n.offsetY||"0"),a=(o-=a*(_-1)/2,t-=e*(_-1)/2,a/ZC._a_(i[2]-i[0])),e=e/ZC._a_(i[3]-i[1]);return[i[0]+(r[0]-o-s)/(a*=_),i[1]+(t-r[1]+n)/(e*=_)]},zingchart.maps.mappoints=function(o,t,a,e,r,i,n,_,s){var l=[],p=null,c=a/ZC._a_(r[2]-r[0]),h=e/ZC._a_(r[3]-r[1]),g=(_=_||{},Math.abs(ZC._f_(_.zoom||"1"))),d=ZC._i_(_.offsetX||"0");c*=g,h*=g,t=t-e*(g-1)/2+ZC._i_(_.offsetY||"0");for(var f=(o=o-a*(g-1)/2+d)+(ZC.CY(i.bbox[0],i.bbox[2])-ZC.CY(r[0],r[2]))*c,m=t+e*g-(ZC.CY(i.bbox[1],i.bbox[3])-ZC.CY(r[1],r[3]))*h,b=(ZC._a_(i.bbox[2]-i.bbox[0]),ZC._a_(i.bbox[3]-i.bbox[1])*h),z=0,C=i.coords.length;z<C;z++)if(null===ZC._n_(i.coords[z]))l.push(null);else{var O,F,Z,u,x=i.transform.offsetLon,I=i.transform.offsetLat,N=i.transform.scale;if("__"===i.id&&null!==ZC._n_(n))for(var y=0,v=n.length;y<v;y++)if(i.coords[z][0]>=n[y].bbox[0]-n[y].offsetLon&&i.coords[z][0]<=n[y].bbox[2]-n[y].offsetLon&&i.coords[z][1]>=n[y].bbox[3]-n[y].offsetLat&&i.coords[z][1]<=n[y].bbox[1]-n[y].offsetLat){x=n[y].offsetLon,I=n[y].offsetLat,N=n[y].scale,p=n[y].bbox;break}Z=o+(i.coords[z][0]-ZC.CY(r[0],r[2]))*c+x*c,u=t+(ZC.BR(r[1],r[3])-i.coords[z][1])*h-I*h,1!==N&&(u="__"===i.id?(Z=(O=o+(ZC.CY(p[0],p[2])-ZC.CY(r[0],r[2]))*c)+(Z-O)*N,(O=t+e-(ZC.CY(p[1],p[3])-ZC.CY(r[1],r[3]))*h)-(F=ZC._a_(p[3]-p[1])*h)+(u-(O-F))*N):(Z=f+(Z-f)*N,m-b+(u-(m-b))*N)),null!==ZC._n_(s)?l.push([parseInt(Z,10)-ZC.AM.E1,parseInt(u,10)-ZC.AM.E2,parseInt(s,10)]):l.push([parseInt(Z,10),parseInt(u,10)])}return l},zingchart.maps.translate=function(o,t,a,e,r){a/=ZC._a_(r[2]-r[0]),e/=ZC._a_(r[3]-r[1]);return"x"===o?t*a:t*e},zingchart.maps.convert=function(o){var t,a,e=o.data.options||{},R=(ZC._todash_(e),o.id),r=o.groups,U=o.items,D=o.ignore,i=o.bbox,n=o.level,X=!1,T=("01"===n&&(n=1,X=!0),Math.abs(ZC._f_(e.zoom||"1"))),k=ZC._i_(e["offset-x"]||"0"),P=ZC._i_(e["offset-y"]||"0"),_=!0,G=!0,B=!0,s=(null!==ZC._n_(e.zooming)&&(_=ZC._b_(e.zooming)),null!==ZC._n_(e.panning)&&(G=ZC._b_(e.panning)),null!==ZC._n_(e.scrolling)&&(B=ZC._b_(e.scrolling)),o.loader.A5J(o.loaderdata,o.graphid)),l=(o.loader.MF&&(O=o.loader.MF.theme||"light"),"light"===(O=o.loader.o?o.loader.o.theme||"light":O)?o.map._DEFAULTS_=zingchart.maps.LIGHT:"dark"===O&&(o.map._DEFAULTS_=zingchart.maps.DARK),ZC.AM&&(ZC.AM.A4F=2.5*ZC.BR(s.graph.width,s.graph.height),ZC.AM.E1=s.plotarea.x+s.plotarea.width/2,ZC.AM.E2=s.plotarea.y+s.plotarea.height/2),ZC.IO(o.x)),l=ZC._i_(0<l&&l<1?l*s.plotarea.width:l),p=(l+=s.plotarea.x,ZC.IO(o.y)),p=ZC._i_(0<l&&p<1?p*s.plotarea.height:p),c=(p+=s.plotarea.y,ZC.IO(o.width)),c=ZC._i_(c<=1?c*s.plotarea.width:c),h=ZC.IO(o.height),h=ZC._i_(h<=1?h*s.plotarea.height:h),g={};if(ZC._cp_(o.map,g),0===c||0===h||!g)return[];for(t in g)"_DEFAULTS_"!==t&&"_INFO_"!==t&&"_GROUPS_"!==t&&"_RULES_"!==t&&(null===ZC._n_(g[t].transform)&&(g[t].transform={offsetLon:0,offsetLat:0,scale:1}),null===ZC._n_(g[t].connector))&&(g[t].connector={points:[],anchor:""});for(t in g)if("_DEFAULTS_"!==t&&"_INFO_"!==t&&"_GROUPS_"!==t&&"_RULES_"!==t&&!(0===n&&"__"!==t||0!==n&&"__"===t&&!X)){for(var d=[ZC.MAX,-ZC.MAX,-ZC.MAX,ZC.MAX],J=g[t].transform.offsetLon,V=g[t].transform.offsetLat,j=g[t].transform.scale,f=0;f<g[t].coords.length;f++)if(null!==ZC._n_(g[t].coords[f])){if("__"===t&&null!==ZC._n_(g._RULES_))for(var m=0,K=g._RULES_.length;m<K;m++)if(g[t].coords[f][0]>=g._RULES_[m].bbox[0]-g._RULES_[m].offsetLon&&g[t].coords[f][0]<=g._RULES_[m].bbox[2]-g._RULES_[m].offsetLon&&g[t].coords[f][1]>=g._RULES_[m].bbox[3]-g._RULES_[m].offsetLat&&g[t].coords[f][1]<=g._RULES_[m].bbox[1]-g._RULES_[m].offsetLat){J=g._RULES_[m].offsetLon,V=g._RULES_[m].offsetLat,j=g._RULES_[m].scale;break}d[0]=ZC.CY(d[0],g[t].coords[f][0]+J),d[1]=ZC.BR(d[1],g[t].coords[f][1]+V),d[2]=ZC.BR(d[2],g[t].coords[f][0]+J),d[3]=ZC.CY(d[3],g[t].coords[f][1]+V)}1!==j&&"__"!==t&&(d[2]=d[0]+(d[2]-d[0])*j,d[3]=d[1]-(d[1]-d[3])*j),g[t].id=t,g[t].bbox=d}d=[ZC.MAX,-ZC.MAX,-ZC.MAX,ZC.MAX];var Q,W,b=[];if(0<r.length&&g._GROUPS_){for(f=0,a=r.length;f<a;f++)g._GROUPS_[r[f]]&&(b=b.concat(g._GROUPS_[r[f]]));for(f=b.length-1;0<=f;f--)-1===b[f].indexOf("@")?-1!==ZC.AV(D,b[f])&&b.splice(f,1):(Q=b[f].split("@"),-1!==ZC.AV(D,Q[0])&&b.splice(f,1))}if(0<U.length)for(f=0,a=U.length;f<a;f++)-1===ZC.AV(D,U[f])&&b.push(U[f]);else for(t in g)!g.hasOwnProperty(t)||"_DEFAULTS_"===t||"_INFO_"===t||"_GROUPS_"===t||"_RULES_"===t||0===n&&"__"!==t||0!==n&&"__"===t&&!X||0===r.length&&-1===ZC.AV(D,t)&&b.push(t);for(f=b.length-1;0<=f;f--)b[f]&&-1!==b[f].indexOf("@")&&(W=b[f].split("@"),-1!==ZC.AV(b,W[0]))&&b.splice(f,1);if(null!==ZC._n_(i)&&4===i.length)d=i;else for(f=0,a=b.length;f<a;f++)g[t=b[f]]&&(d[0]=ZC.CY(d[0],g[t].bbox[0]),d[1]=ZC.BR(d[1],g[t].bbox[1]),d[2]=ZC.BR(d[2],g[t].bbox[2]),d[3]=ZC.CY(d[3],g[t].bbox[3]));var H=ZC._a_(d[2]-d[0])/20,q=ZC._a_(d[3]-d[1])/20;for(t in d[0]-=H,d[1]+=q,d[2]+=H,d[3]-=q,g)"_DEFAULTS_"===t||"_INFO_"===t||"_GROUPS_"===t||"_RULES_"===t||0===n&&"__"!==t||0!==n&&"__"===t&&!X||(H=ZC.CY(1,ZC._a_(g[t].bbox[2]-g[t].bbox[0])/8),q=ZC.CY(1,ZC._a_(g[t].bbox[3]-g[t].bbox[1])/8),g[t].bbox[0]-=H,g[t].bbox[1]+=q,g[t].bbox[2]+=H,g[t].bbox[3]-=q);var z,$,C,O=1+.8*ZC._a_((d[3]+d[1])/180),i=c/ZC._a_(d[2]-d[0]),oo=h/ZC._a_(d[3]-d[1]);for($ in(!e.hasOwnProperty("scale")||ZC._b_(e.scale))&&(1.05<(z=O*i/oo)?(l+=(c-(so=ZC._i_(c/z)))/2,c=so):z<.95&&(p+=(h-(so=ZC._i_(h*z)))/2,h=so),i=c/ZC._a_(d[2]-d[0]),oo=h/ZC._a_(d[3]-d[1])),zingchart.maps.maps)R!==$&&(C=zingchart.maps.maps[$])&&C._INFO_&&o.loader.K===C._INFO_.loaderid&&C._INFO_.graphinfo&&C._INFO_.graphinfo.graph&&C._INFO_.graphinfo.graph.index===s.graph.index&&(C._INFO_.graphinfo.graph.index=-1);g._INFO_={loaderid:o.loader.K,x:l,y:p,zoom:T,zooming:_,panning:G,scrolling:B,offsetX:k,offsetY:P,width:c,height:h,id:R,bbox:d,groups:r,items:b,ignore:D,graphinfo:s},3*b.length>zingchart.DEV.MAXPOOLSIZE&&(zingchart.DEV.MAXPOOLSIZE+=3*b.length),zingchart.maps.maps[R]=g;var F,Z={},u={};if(F=e.choropleth){var x,I=ZC.MAX,N=-ZC.MAX,y="";for(f=0,a=b.length;f<a;f++)t=b[f],null!==ZC._n_(e.style)&&null!==ZC._n_(e.style.items)&&null!==ZC._n_(e.style.items[t])&&null!==ZC._n_(e.style.items[t]["data-value"])&&(x=ZC._f_(e.style.items[t]["data-value"]),I=Math.min(I,x),N=Math.max(N,x),u[t]={"data-value":x});var to=F.aspect||"gradient",ao=F.progression||"lin",v=F.intervals||4,eo=F.color||"#336699",L=F["max-percent"]||50,ro=F.effect||"lighten",io=ZC._b_(F.mirrored),no=L/(N-I),_o=("log"===ao&&(no=L/(ZC.FU(N,10)-ZC.FU(I,10))),L/v),so=F[ZC._[10]]||[],E=F.steps||[],lo=F.colors||[];if("intervals"===to){if(E.length)v=E.length-1;else if("lin"===ao){var po=(N-I)/v;for(f=0;f<v;f+=1)E.push(I+f*po);E.push(N)}else{var co=Math.floor(ZC.FU(I,10)),ho=Math.ceil(ZC.FU(N,10));for(co===ho&&ho++,v=Math.max(1,ho-co-1),f=co;f<=ho;f+=1)f===co&&co<1?E.push(0):E.push(Math.pow(10,f));_o=L/v}if(!lo.length)for(f=0;f<=v;f+=1)lo.push("lighten"===ro?ZC.AO.PP(eo,f*_o):ZC.AO.JR(eo,f*_o))}for(f=0,a=b.length;f<a;f++)if(u[t=b[f]]){if(x=u[t]["data-value"],"gradient"===to){var go=ZC._i_((x-I)*no);"log"===ao&&(go=ZC._i_((ZC.FU(x,10)-ZC.FU(I,10))*no)),io&&(go=L-go),y="lighten"===ro?ZC.AO.PP(eo,go):ZC.AO.JR(eo,go)}else if("intervals"===to){for(var fo=0;fo<E.length-1;fo++)if(x>=E[fo]&&x<E[fo+1]){y=lo[fo];break}""===y&&x===N&&(y=lo[lo.length-1])}u[t]={"data-color":y,"background-color":y,"hover-state":{"background-color":y}},F["override-tooltip"]&&(u[t].tooltip={"background-color":ZC.AO.JR(y,15)})}g._INFO_.choropleth={aspect:to,progression:ao,intervals:v,color:eo,maxPercent:L,effect:ro,minValue:I,maxValue:N,steps:E,colors:lo,labels:so,mirrored:io}}for(e["color-scale"]&&(g._INFO_["color-scale"]=!0),f=0,a=b.length;f<a;f++)if(g[t=b[f]]){var mo,bo,zo,Co,A=g[t].type||"poly",M=0,S=("line"!==A&&"point"!==A||(M+=10),g[t].sort&&(g[t].sort&&(g[t].sort=.5),M+=g[t].sort),null),M=(null!==ZC._n_(e.style)&&(e.style["3d"]&&(S=1),null!==ZC._n_(e.style.z)&&(S=e.style.z),null!==ZC._n_(e.style.items))&&null!==ZC._n_(e.style.items[t])&&null!==ZC._n_(e.style.items[t].z)&&(S=e.style.items[t].z),"poly"===A||"line"===A?Z[t]={type:A,id:t,points:zingchart.maps.mappoints(l,p,c,h,d,g[t],g._RULES_,g._INFO_,S),label:{map:R},"z-sort":M,"z-index":M,tooltip:{},connector:{},"map-item":!0,generated:!0}:"point"===A&&(S=zingchart.maps.mappoints(l,p,c,h,d,g[t],g._RULES_,g._INFO_,S),Z[t]={type:"circle",id:t,size:5,x:S[0][0],y:S[0][1],label:{map:R},"z-sort":M,"z-index":M,tooltip:{},connector:{},"map-item":!0,generated:!0}),"poly"!==A&&"line"!==A||(mo=(S=zingchart.maps.centroid(Z[t].points))[0],bo=S[1],zo=S[2]),g._DEFAULTS_&&(ZC._cp_(g._DEFAULTS_._COMMON_,Z[t]),"poly"===A?ZC._cp_(g._DEFAULTS_._POLY_,Z[t]):"line"===A?ZC._cp_(g._DEFAULTS_._LINE_,Z[t]):"point"===A&&ZC._cp_(g._DEFAULTS_._POINT_,Z[t])),g[t].style&&ZC._cp_(g[t].style,Z[t]),ZC._todash_(Z[t]),g[t].label.text),S=g[t].tooltip.text,Oo=(ZC._cp_(e.style,Z[t],null,null,null,["items"]),g[t].tooltip.text||""),Fo=Z[t].tooltip.text||"",Zo=(ZC._cp_(g[t].tooltip,Z[t].tooltip),Z[t].label.text),Zo=(ZC._cp_(g[t].label,Z[t].label),Zo&&(Z[t].label.text=Zo),1===zingchart.maps.CONNECTORS&&ZC._cp_(g[t].connector,Z[t].connector),"poly"!==A&&"line"!==A||"auto"===Z[t].label.visible&&zo<400&&(0===zingchart.maps.CONNECTORS||0===Z[t].connector.points.length)&&(Z[t].label.visible=!1),u[t]&&ZC._cp_(u[t],Z[t]),!1);for(Co in null!==ZC._n_(e.style)&&null!==ZC._n_(e.style.items)&&(ZC._cp_(e.style.items[t],Z[t]),e.style.items[t])&&e.style.items[t].tooltip&&e.style.items[t].tooltip.text&&(Oo=e.style.items[t].tooltip.text,-1===Fo.indexOf("%text"))&&(Zo=!0),Z[t].tooltip.text=""===Fo||Zo?Oo:Fo.replace("%text",Oo),Z[t])"data-"===Co.substring(0,5)&&(Z[t].tooltip.text=Z[t].tooltip.text.replace("%"+Co,Z[t][Co]),Z[t].label.text=Z[t].label.text.replace("%"+Co,Z[t][Co]));if(Z[t].tooltip.text=Z[t].tooltip.text.replace("%short-text",M).replace("%long-text",S),Z[t].label.text=Z[t].label.text.replace("%short-text",M).replace("%long-text",S),zingchart.maps.CONNECTORS&&null!==ZC._n_(Z[t].connector.points)){for(var uo=0,xo=Z[t].connector.points.length;uo<xo;uo++)Z[t].connector.points[uo]=zingchart.maps.lonlat2xy(l,p,c,h,Z[t].connector.points[uo],d,{zoom:T,offsetX:k,offsetY:P});Z[t].connector.points=ZC.AO.A5M(Z[t].connector.points,s.graph.x,s.graph.y)}null===ZC._n_(Z[t].label.x)&&(Z[t].label.x=mo+s.graph.x),null===ZC._n_(Z[t].label.y)&&(Z[t].label.y=bo+s.graph.y)}var Io=s.graph.width,No=s.graph.height,_=(e.style=e.style||{},e.style.controls||{});if(null===ZC._n_(_.visible)||ZC._b_(_.visible)){var Y=ZC._i_(_.x||"-1"),w=ZC._i_(_.y||"-1"),G=_[ZC._[7]]||"";switch(G=""!==G||-1!==Y&&-1!==w?G:"tl"){case"tl":w=Y=10;break;case"tr":Y=0+Io-25-10,w=10;break;case"bl":w=0+No-50-(Y=10);break;case"br":Y=0+Io-25-10,w=0+No-50-10}Z._ZOOM_IN_={objtype:"label",id:g._INFO_.id+"_zoom_in",generated:!0,x:Y,y:w,width:25,height:25,"border-width":1,"border-color":"#999","background-color":"#eee","border-radius":"2 2 0 0","font-size":17,text:"+",tooltip:{text:"Zoom In"}},ZC._cp_(zingchart.maps._DEFAULTS_._COMMON_.tooltip,Z._ZOOM_IN_.tooltip),ZC._cp_(_["zoom-in"],Z._ZOOM_IN_),Z._ZOOM_OUT_={objtype:"label",id:g._INFO_.id+"_zoom_out",generated:!0,x:Y,y:w+25-1,width:25,height:25,"border-width":1,"border-color":"#999","background-color":"#eee","border-radius":"0 0 2 2","font-size":17,text:"-",tooltip:{text:"Zoom Out"}},ZC._cp_(zingchart.maps._DEFAULTS_._COMMON_.tooltip,Z._ZOOM_OUT_.tooltip),ZC._cp_(_["zoom-out"],Z._ZOOM_OUT_)}return z=O*i/oo,!zingchart.maps.FORCESCALE&&(1.05<z||z<.95)&&(Z._ALERT_={type:"circle",id:"_ALERT_",x:l+10,y:p+10,size:8,"background-color":"#c00",label:{color:"#fff",bold:!0,text:"!"},tooltip:{text:"Scaling Error<br />Use "+c+"/"+ZC._i_(h*z)+" or "+ZC._i_(c/z)+"/"+h,"background-color":"#c00","border-radius":8,color:"#fff"}}),Z},zingchart.maps.exportMap=function(o,t,a=4){var e,r,i=['ZC.WJ.push("maps-{{exportid}}");',"","(function() {","","if (!zingchart.maps.{{exportid}}) {","zingchart.maps.{{exportid}} = {};","};","","if (!zingchart.maps.data.{{exportid}}) {","zingchart.maps.data.{{exportid}} = {};","};","","var _COORDS_ = {","{{coords}}","};","","zingchart.maps.data.{{exportid}} = {","_GROUPS_:{","{{groups}}","},","_DEFAULTS_:zingchart.maps._DEFAULTS_,","{{items}}","};","",'zingchart.maps.upgrade("{{exportid}}");',"","})();","","zingchart.maps.{{exportid}} = function(p, ld, d) {","return zingchart.maps.convert({","loader:this,","loaderdata:ld || {},",'graphid:((typeof(p.graphid) == "undefined")?0:p.graphid),',"data:d,",'id:p.id || "{{exportid}}",','x:((typeof(p.x) == "undefined")?0:p.x),','y:((typeof(p.y) == "undefined")?0:p.y),','width:((typeof(p.width) == "undefined")?1:p.width),','height:((typeof(p.height) == "undefined")?1:p.height),','level:((typeof(p.level) == "undefined")?1:p.level),',"groups:p.groups || [],","items:p.items || [],","ignore:p.ignore || [],","bbox:p.bbox || null,","map:zingchart.maps.data.{{exportid}}","});","}"].join("\n"),n=['"{{id}}":{','coords:_COORDS_["{{id}}"],',"tooltip:{",'text:"{{text}}"',"},","cpoint:{",'x:"{{x}}", y:"{{y}}"',"},","label:{",'text:"{{id}}", x:"{{x}}", y:"{{y}}"',"}","}"].join("\n"),i=(i=i).replace(/\{\{exportid\}\}/gi,t),_=[],s=[],l=[],p=zingchart.maps.data[o];for(e in p._GROUPS_){var c='"'+e+'":["'+p._GROUPS_[e].join('","')+'"]';s.push(c)}for(r in p)if("_DEFAULTS_"!==r&&"_GROUPS_"!==r){var h=n;h=(h=(h=(h=h.replace(/\{\{id\}\}/g,r)).replace(/\{\{text\}\}/g,p[r].tooltip.text)).replace(/\{\{x\}\}/g,p[r].cpoint.x)).replace(/\{\{y\}\}/g,p[r].cpoint.y),l.push(h);for(var g,d,h='"'+r+'":',f=[],m=[],b=0;b<p[r].coords.length;b++)p[r].coords[b]?(g=parseFloat(p[r].coords[b][0].toFixed(a)),d=parseFloat(p[r].coords[b][1].toFixed(a)),(0===m.length||m[0]!==g&&m[1]!==d)&&f.push([g,d]),m=[g,d]):f.push(null);h+=JSON.stringify(f).replace(/\"/g,""),_.push(h)}return i=(i=(i=i.replace(/\{\{coords\}\}/gi,_.join(",\n"))).replace(/\{\{groups\}\}/gi,s.join(",\n"))).replace(/\{\{items\}\}/gi,l.join(",\n"))};