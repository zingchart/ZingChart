/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.15
*/
zingchart.setModule("multi-guide"),function(){var u,r=[],_=0,h=0,g=!1,p=0,b={},s={};function i(e){var i=zingchart.getLoader(e.id),i=zingchart.getModules(i);-1!==ZC.AV(i,"multi-guide")&&(i=zingchart.exec(e.id,"getobjectsbyclass",{type:"shape","class":"multi-guide"}),zingchart.exec(e.id,"removeobject",{type:"shape",id:i,update:!1}),i=zingchart.exec(e.id,"getobjectsbyclass",{type:"label","class":"multi-guide"}),zingchart.exec(e.id,"removeobject",{type:"label",id:i,update:!0}))}zingchart.bind(null,"guide_mousemove",function(e){var i=zingchart.getLoader(e.id),t=zingchart.getModules(i);-1!==ZC.AV(t,"multi-guide")&&(t={},(i=zingchart.getGraph(i,e.graphid).getData()).options&&(t=i.options["multi-guide"]||i.options),i=zingchart.exec(e.id,"getobjectinfo",{graphid:e.graphid,object:"plotarea"}),r=[].concat(e.items),_=e.guide.x,g)&&(b["guide_"+h]=[].concat(e.items),t=(t.handle||{})[ZC._[21]]||4,zingchart.exec(e.id,"updateobject",{data:[{objtype:"shape",type:"poly",id:"multi_guide_handle_"+p,points:[[_,i.y],[_-2*t,i.y-t],[_-2*t,i.y-3*t],[_+2*t,i.y-3*t],[_+2*t,i.y-t],[_,i.y]]},{objtype:"label",id:"multi_guide_label_"+p,x:_}]}))}),zingchart.bind(null,"zoom",function(e){i(e)}),zingchart.bind(null,"legend_item_click",function(e){i(e)}),zingchart.bind(null,"label_mouseover",function(e){var i=zingchart.getLoader(e.id),i=zingchart.getModules(i);-1!==ZC.AV(i,"multi-guide")&&-1!==e.labelid.indexOf("multi_guide_label_")&&zingchart.exec(e.id,"hideguide")}),zingchart.bind(null,"label_mouseout",function(e){var i=zingchart.getLoader(e.id),i=zingchart.getModules(i);-1!==ZC.AV(i,"multi-guide")&&-1!==e.labelid.indexOf("multi_guide_label_")&&zingchart.exec(e.id,"showguide")}),zingchart.bind(null,"click",function(e){if(("none"===e.target||"node"===e.target)&&e.plotarea){var i=zingchart.getLoader(e.id),t=zingchart.getModules(i);if(-1!==ZC.AV(t,"multi-guide")){var t=zingchart.getGraph(i,e.graphid).getData(),d={},l=(t.options&&(d=t.options["multi-guide"]||t.options),zingchart.exec(e.id,"getobjectinfo",{graphid:e.graphid,object:"plotarea"}));if(0<r.length){var t=h+1+"",a=(b["guide_"+h]=[].concat(r),s["guide_"+h]=t,d.label||{}),o={align:"left",color:"#000","background-color":"#fff #ccc","border-width":1,"border-color":"#333",bold:!0,"font-size":10,padding:"4 8"},a=(ZC._cp_(a,o),ZC._cp_({text:t},o),(u=zingchart.getInstance(i,"textbox")).setData(o),u.parse(),ZC._cp_({objtype:"label",id:"multi_guide_label_"+h,"class":"multi-guide",cursor:"hand",x:_,y:l.y+l.height-u.get(ZC._[20])},o),d.line||{}),t={"line-width":1,"line-color":"#333"},i=(ZC._cp_(a,t),ZC._cp_({objtype:"shape",type:"line",id:"multi_guide_line_"+h,flat:!0,"class":"multi-guide",points:[[_,l.y],[_,l.y+l.height]]},t),d.handle||{}),a={"background-color":"#fff #ccc","border-width":1,"border-color":"#333","z-index":1,cursor:"hand"},i=(ZC._cp_(i,a),i[ZC._[21]]||4),d=(ZC._cp_({objtype:"shape",type:"poly",id:"multi_guide_handle_"+h,"class":"multi-guide",points:[[_,l.y],[_-2*i,l.y-i],[_-2*i,l.y-3*i],[_+2*i,l.y-3*i],[_+2*i,l.y-i],[_,l.y]]},a),d.close||{}),n={"background-color":"#fff #ccc","hover-state":{"background-color":"#fff #fbb"},"border-width":1,color:"#000","border-color":"#333",padding:"0 4 2 4","font-size":10,"border-radius":3,anchor:"c",shadow:!0,"z-index":99},d=(ZC._cp_(d,n),d.text||"x");ZC._cp_({objtype:"label",id:"multi_guide_close_"+h,cursor:"hand","class":"multi-guide",x:_+2.5*i,y:l.y-3.5*i,text:d},n),zingchart.exec(e.id,"addobject",{data:[t,a,n,o],update:!1});for(var c=0;c<r.length;c++){var g=zingchart.exec(e.id,"getobjectinfo",{object:"node",plotindex:r[c].plotindex,nodeindex:r[c].nodeindex});zingchart.exec(e.id,"addobject",{type:"label",data:[{id:"multi_guide_label_"+h+"_"+c,"class":"multi-guide",x:r[c].x,y:r[c].y,text:r[c].text,color:g.color,"background-color":g.lineColor,padding:"3 6",callout:!0,"callout-position":_<l.x+l.width/2?"left":"right"}],update:!1})}zingchart.exec(e.id,"repaintobjects"),h++}}}}),zingchart.bind(null,"label_click",function(l){var e,a,i=zingchart.getLoader(l.id),t=zingchart.getModules(i);-1!==ZC.AV(t,"multi-guide")&&((t=zingchart.getGraph(i,l.graphid).getData()).options&&!t.options["multi-guide"]&&t.options,a=zingchart.exec(l.id,"getplotlength",{graphid:l.graphid}),-1!==l.labelid.indexOf("multi_guide_label_")&&(p=l.labelid.replace("multi_guide_label_",""),i=s["guide_"+p]||"",e=window.prompt("Marker Name:",i))&&(s["guide_"+p]=e,window.setTimeout(function(){zingchart.exec(l.id,"updateobject",{type:"label",id:"multi_guide_label_"+p,data:{text:e}})},100)),-1!==l.labelid.indexOf("multi_guide_close_"))&&(p=l.labelid.replace("multi_guide_close_",""),window.setTimeout(function(){b["guide_"+p]=[],s["guide_"+p]=null,zingchart.exec(l.id,"removeobject",{type:"shape",id:["multi_guide_line_"+p,"multi_guide_handle_"+p]}),zingchart.exec(l.id,"removeobject",{type:"label",id:["multi_guide_label_"+p,"multi_guide_close_"+p]});for(var e=[],i=0;i<a;i++)e.push("multi_guide_label_"+p+"_"+i);zingchart.exec(l.id,"removeobject",{type:"label",id:e});var t,d=!1;for(t in s)null!==ZC._n_(s[t])&&(d=!0);d||(h=0,b={},s={})},100))}),zingchart.bind(null,"shape_mousedown",function(d){d.ev.preventDefault();var e=zingchart.getLoader(d.id),i=zingchart.getModules(e);if(-1!==ZC.AV(i,"multi-guide")&&-1!==d.shapeid.indexOf("multi_guide_handle_")){var i=zingchart.getGraph(e,d.graphid).getData(),e={},l=(i.options&&(e=i.options["multi-guide"]||i.options),g=!0,zingchart.exec(d.id,"getobjectinfo",{graphid:d.graphid,object:"plotarea"})),t=zingchart.exec(d.id,"getplotlength",{graphid:d.graphid});p=ZC._i_(d.shapeid.replace("multi_guide_handle-","")),zingchart.exec(d.id,"setobjectsmode",{mode:"flat"});for(var a=(e.handle||{})[ZC._[21]]||4,o=[],n=0;n<t;n++)o.push("multi_guide_label_"+p+"_"+n);zingchart.exec(d.id,"removeobject",{type:"label",id:o,update:!1}),zingchart.exec(d.id,"updateobject",{data:[{objtype:"shape",type:"line",id:"multi_guide_line_"+p,visible:!1,points:[[_,l.y],[_,l.y+l.height]]},{objtype:"shape",type:"poly",id:"multi_guide_handle_"+p,flat:!0,shadow:!0,"shadow-distance":3,points:[[_,l.y],[_-2*a,l.y-a],[_-2*a,l.y-3*a],[_+2*a,l.y-3*a],[_+2*a,l.y-a],[_,l.y]]},{objtype:"label",id:"multi_guide_close_"+p,flat:!0,visible:!1,x:_+2*a,y:l.y-3*a}]});var c=function(e){if(-1===e.target.id.indexOf("multi_guide_close_")){g=!1,zingchart.exec(d.id,"setobjectsmode",{mode:"normal"}),zingchart.exec(d.id,"updateobject",{data:[{objtype:"shape",type:"line",id:"multi_guide_line_"+p,visible:!0,points:[[_,l.y],[_,l.y+l.height]]},{objtype:"shape",type:"poly",id:"multi_guide_handle_"+p,flat:!1,shadow:!1,points:[[_,l.y],[_-2*a,l.y-a],[_-2*a,l.y-3*a],[_+2*a,l.y-3*a],[_+2*a,l.y-a],[_,l.y]]},{objtype:"label",id:"multi_guide_close_"+p,flat:!1,visible:!0,x:_+2*a,y:l.y-3*a},{objtype:"label",id:"multi_guide_label_"+p,flat:!0,x:_}]});for(var i=0;i<r.length;i++){var t=zingchart.exec(d.id,"getobjectinfo",{object:"node",plotindex:r[i].plotindex,nodeindex:r[i].nodeindex});zingchart.exec(d.id,"addobject",{type:"label",data:[{id:"multi_guide_label_"+p+"_"+i,"class":"multi-guide",x:r[i].x,y:r[i].y,flat:!0,color:t.color,text:r[i].text,"background-color":t.lineColor,padding:"3 6",callout:!0,"callout-position":_<l.x+l.width/2?"left":"right"}]})}ZC.A3(document).unbind(ZC._[49],c)}};ZC.A3(document).bind(ZC._[49],c)}})}();