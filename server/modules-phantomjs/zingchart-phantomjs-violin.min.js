/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.15
*/
zingchart.setModule("violin"),zingchart.plugins.violin={},zingchart.bind(null,"dataparse",function(e,t){var i,n,r,a,l,o,s=zingchart.getLoader(e.id),h=zingchart.getModules(s);if(-1!==ZC.AV(h,"violin"))for(i=0,n=t.graphset.length;i<n;i++){var c,p,u=t.graphset[i].type,v=t.graphset[i];if("scatter"===u)v.type="mixed",c="varea",p="scatter";else{if("hscatter"!==u)return t;v.type="hmixed",c="area",p="hscatter"}t.graphset[i]["plugin-type"]=u;var g={};v.options&&(g=v.options.violin||v.options),ZC._todash_(g);var _=v.series||[];for(a=_.length-1;a>=0;a--)_[a].cls&&"zc-violin"===_[a].cls?_.splice(a,1):_[a]["o-values"]&&(_[a].values=[].concat(_[a]["o-values"]));var d=ZC._f_(ZC._c_(g.jitter,1)),f=ZC._f_(ZC._c_(g["rounding-factor"],1)),m=ZC._f_(ZC._c_(g["mean-factor"],2)),C=ZC._b_(ZC._c_(g.trim,!1)),Z=[];for(a=0;a<_.length;a++){var b={},A=[],x=[],z=_[a].values||[],M=[],y=[],k={},V=-Number.MAX_VALUE,L=Number.MAX_VALUE;for(o=0;o<z.length;o++){var E,N=z[o];if(-1===ZC.AV(y,N[0])&&y.push(N[0]),f<=0&&(f=1),f<1){var U=1/f;E=Math.round(U*N[1])/U}else E=f*Math.round(N[1]/f);k[N[0]+"/"+E]=ZC._i_(k[N[0]+"/"+E]||"0"),k[N[0]+"/"+E]++,b[N[0]+"/"+E]=b[N[0]+"/"+E]||[],b[N[0]+"/"+E].push(N[1])}_[a].violin&&ZC._todash_(_[a].violin);var X=.05*d;for(l=0;l<y.length;l++){var w=[],j=[];for(var q in V=-Number.MAX_VALUE,L=Number.MAX_VALUE,k){var B=q.split("/"),D=ZC._f_(B[0]),F=ZC._f_(B[1]);if(y[l]===D){var G=k[q];for(r=0;r<G;r++)A.push(b[q][r]),x.push(D),M.push([D-X*G/2+r*X+X/2,F]);w.push([D-X*G/2-1.5*X,F]),j.push([D+X*G/2+1.5*X,F]),V=Math.max(V,F),L=Math.min(L,F)}}if(!C){var H=.2*(V-L);w.push([y[l],L-H],[y[l],V+H]),j.push([y[l],L-H],[y[l],V+H])}w.sort(function(e,t){return e[1]-t[1]}),j.sort(function(e,t){return t[1]-e[1]});var I,J=[],K=[],O=0,P=Number.MAX_VALUE,Q=-1;for(r=0;r<w.length;r++)0===r||r===w.length-1?(r===w.length-1&&-1!==Q&&(I=j.length-Q-1,J.push([w[Q][0],w[Q][1]]),K.push([j[I][0],j[I][1]])),I=j.length-r-1,J.push([w[r][0],w[r][1]]),K.push([j[I][0],j[I][1]])):(w[r][0]<P&&(P=w[r][0],Q=r),O===m&&(I=j.length-Q-1,J.push([w[Q][0],w[Q][1]]),K.push([j[I][0],j[I][1]]),O=0,P=Number.MAX_VALUE,Q=-1),O++);C&&(J.unshift([y[l],L]),J.push([y[l],V]),K.unshift([y[l],L]),K.push([y[l],V]));var R={type:c,"ref-value":y[l],cls:"zc-violin","line-width":1,alpha:.25,"line-color":"#666","background-color":"#999",aspect:"spline",monotone:!1,values:J,marker:{type:"none"},"max-trackers":0,"max-nodes":0,"legend-item":{visible:!1},"legend-marker":{visible:!1}};ZC._cp_(g.style,R),ZC._cp_(_[a].violin,R),Z.push(R);var S={type:c,"ref-value":y[l],cls:"zc-violin","line-width":1,alpha:.25,"line-color":"#666","background-color":"#999",aspect:"spline",monotone:!1,values:K,marker:{type:"none"},"max-trackers":0,"max-nodes":0,"legend-item":{visible:!1},"legend-marker":{visible:!1}};ZC._cp_(g.style,S),ZC._cp_(_[a].violin,S),Z.push(S)}_[a]["data-value"]=A,_[a]["data-key"]=x,_[a]["o-values"]=[].concat(_[a].values),_[a].type=p,_[a].values=M}v.series=[].concat(Z).concat(_)}return t}),zingchart.bind(null,"legend_item_click",function(e){var t=zingchart.getLoader(e.id),i=zingchart.getModules(t);if(-1!==ZC.AV(i,"violin")){var n=zingchart.exec(e.id,"getplotlength");zingchart.exec(e.id,e.visible?"hideplot":"showplot",{plotindex:2*(e.plotindex-2*n/3)}),zingchart.exec(e.id,e.visible?"hideplot":"showplot",{plotindex:2*(e.plotindex-2*n/3)+1})}});