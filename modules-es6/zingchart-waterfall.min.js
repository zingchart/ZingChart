/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.2_ES6
*/
zingchart.setModule("waterfall"),zingchart.bind(null,"dataparse",function(a,e){for(var r=0,t=e[ZC._[16]].length;r<t;r++)if(e[ZC._[16]][r].type&&("waterfall"===e[ZC._[16]][r].type.replace("3d","")||"hwaterfall"===e[ZC._[16]][r].type.replace("3d",""))){var l=e[ZC._[16]][r].type;e[ZC._[16]][r]["plugin-type"]=l;var i=e[ZC._[16]][r],p={};i.options&&(p=i.options[l]||i.options),ZC._todash_(p),i[ZC._[50]]=i[ZC._[50]]||{},i[ZC._[50]][ZC._[5]]=i[ZC._[50]][ZC._[5]]||[],i[ZC._[11]]=i[ZC._[11]]||[],i[ZC._[11]][0]=i[ZC._[11]][0]||{},i[ZC._[11]][0][ZC._[5]]=i[ZC._[11]][0][ZC._[5]]||[],i.plot=i.plot||{},i.plot.mode="normal",i.type="waterfall"===l.replace("3d","")?"vbar":"hbar",-1!==l.indexOf("3d")&&(i.type+="3d");for(var o=i[ZC._[11]],n=[0],d=[],C=0,u=o[0][ZC._[5]],_=0;_<u.length;_++)if("SUM"!==(""+u[_]).toUpperCase())C+=ZC._f_(u[_]),n.push(C),d.push("");else{_<u.length-1?d.push("INTERMEDIATE"):d.push("FINAL"),u[_]=C;var c=n.pop();n.push(0),n.push(c),C=c}n.pop(),o[0]["offset-values"]=n,o[0]["data-sum"]=d,i.plot=i.plot||{},i.plot.rules=i.plot.rules||[];var h={rule:"%node-numeric-value >= 0","background-color":"#7CA82B #7CA82B"};ZC._cp_(p.positive,h);var Z={rule:"%node-numeric-value < 0","background-color":"#D31E1E #D31E1E"};ZC._cp_(p.negative,Z);var s={rule:'"%data-sum" === "INTERMEDIATE"',"background-color":"#29A2CC #29A2CC"};ZC._cp_(p.intermediate,s);var A={rule:'"%data-sum" === "FINAL"',"background-color":"#29A2CC #29A2CC"};ZC._cp_(p.final,A),i.plot.rules.unshift(h,Z,s,A)}return e}),zingchart.bind(null,"gcomplete",function(a){var e=zingchart.getLoader(a.loader.id),r=zingchart.getGraph(e,a.graphid),t=r.o;if(t["plugin-type"]=t["plugin-type"]||"","waterfall"===t["plugin-type"].replace("3d","")||"hwaterfall"===t["plugin-type"].replace("3d","")){var l={};t.options&&(l=t.options[t["plugin-type"]]||t.options),ZC._todash_(l),zingchart.exec(a.loader.id,"deleteobject",{type:"shape",id:"waterfall-line"});for(var i,p=r.AZ.A5[0].R,o=r.BT("k")[0],n=[],d=function(a,e,t){if(t){var l=zingchart.getZCPoint3D(r,a[0]-ZC.AN.E2,a[1]-ZC.AN.E1,0),i=zingchart.getZCPoint3D(r,e[0]-ZC.AN.E2,e[1]-ZC.AN.E1,0);return[l.EA,i.EA]}return[a,e]},C=0;C<p.length-1;C++){var u,_,c=p[C],h=p[C+1];"vbar"===r.AF||"vbar3d"===r.AF?(c.CQ>=0?(u=c.iYVal,_=c.iYVal+c.F):(u=c.iYVal+c.F,_=c.iYVal),i=c.CQ>=0?o.AU?d([c.iX,u],[h.iX+h.I,u],"vbar3d"===r.AF):d([c.iX+c.I,u],[h.iX,u],"vbar3d"===r.AF):o.AU?d([c.iX,_],[h.iX+h.I,_],"vbar3d"===r.AF):d([c.iX+c.I,_],[h.iX,_],"vbar3d"===r.AF)):"hbar"!==r.AF&&"hbar3d"!==r.AF||(c.CQ>=0?(u=c.iXVal,_=c.iXVal+c.I):(u=c.iXVal+c.I,_=c.iXVal),i=c.CQ>=0?o.AU?d([u,c.iY+c.F],[u,h.iY],"hbar3d"===r.AF):d([u,c.iY],[u,h.iY+h.F],"hbar3d"===r.AF):o.AU?d([_,c.iY+c.F],[_,h.iY],"hbar3d"===r.AF):d([_,c.iY],[_,h.iY+h.F],"hbar3d"===r.AF)),n.push(i[0],i[1]),n.push(null)}var Z={type:"line",id:"waterfall-line","line-width":2,"line-style":"dotted","line-color":"#000",flat:!0,points:n};ZC._cp_(l.line,Z),zingchart.exec(a.loader.id,"addobject",{type:"shape",data:Z})}});