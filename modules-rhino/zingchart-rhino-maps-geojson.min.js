/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.13
*/
zingchart.setModule("maps-geojson"),zingchart.maps&&(zingchart.maps.loadGeoJSON=function(N){var A4C=N.id||"geojson"+parseInt(10+89*Math.random(),10),EA=N.url||"",oMappings=N.mappings||{id:"id",name:"name",abbr:"abbr",group:"group"},AC6=N.ignore||[],O=N.style||{};""===EA&&N.callback&&N.callback.call(),ZC.A5.ajax({type:"GET",url:EA,beforeSend:function(){},data:"",error:function(){N.callback&&N.callback.call()},success:function(KJ){var G,DL={};try{DL=JSON.parse(KJ)}catch(JA){try{DL=eval("("+KJ+")")}catch(JA){}}zingchart.maps[A4C]||(zingchart.maps[A4C]={}),zingchart.maps.data[A4C]||(zingchart.maps.data[A4C]={_GROUPS_:{},_DEFAULTS_:zingchart.maps._DEFAULTS_});var _COORDS_={},aFeatures,m,AAO,c,cLen,g,sGroupId,aBBox=[Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE];if(null===ZC._n_(aFeatures=DL.features)&&(DL.features=[DL]),null!==ZC._n_(aFeatures=DL.features)){for(var i=0,A6=aFeatures.length;i<A6;i++){var oFeature=aFeatures[i],oProperties=oFeature.properties||{};for(AAO=A4C.toUpperCase()+i,oMappings.id=oMappings.id instanceof Array?oMappings.id:[oMappings.id],oMappings.abbr=oMappings.abbr instanceof Array?oMappings.abbr:[oMappings.abbr],oMappings.name=oMappings.name instanceof Array?oMappings.name:[oMappings.name],oMappings.group=oMappings.group instanceof Array?oMappings.group:[oMappings.group],m=0;m<oMappings.id.length;m++)"function"==typeof oMappings.id[m]?AAO=oMappings.id[m].call(AAO):(AAO=oFeature[oMappings.id[m]]||AAO,AAO=oProperties[oMappings.id[m]]||AAO);null!==ZC._n_(AAO)&&""!==AAO||(AAO=A4C+"_item_"+i),AAO=(""+AAO).replace(/[^a-z0-9]/gi,"_");var sItemId_=AAO;if(-1===ZC.AV(AC6,AAO)){var sItemAbbr="";for(m=0;m<oMappings.abbr.length;m++)"function"==typeof oMappings.abbr[m]?sItemAbbr=oMappings.abbr[m].call(sItemAbbr):(sItemAbbr=oFeature[oMappings.abbr[m]]||sItemAbbr,sItemAbbr=oProperties[oMappings.abbr[m]]||sItemAbbr);var sItemName="";for(m=0;m<oMappings.name.length;m++)"function"==typeof oMappings.name[m]?sItemName=oMappings.name[m].call(sItemName):(sItemName=oFeature[oMappings.name[m]]||sItemName,sItemName=oProperties[oMappings.name[m]]||sItemName);for(sGroupId="",g=0;g<oMappings.group.length;g++)"function"==typeof oMappings.group[g]?sGroupId=oMappings.group[g].call(sGroupId):(sGroupId=oFeature[oMappings.group[g]]||sGroupId,sGroupId=oProperties[oMappings.group[g]]||sGroupId);if(""!==sItemAbbr||""!==sItemName){""!==sGroupId&&(zingchart.maps.data[A4C]._GROUPS_[sGroupId]=zingchart.maps.data[A4C]._GROUPS_[sGroupId]||[],zingchart.maps.data[A4C]._GROUPS_[sGroupId].push(AAO));var aGeometries=[];for(null!==ZC._n_(oFeature.geometry)?aGeometries="GeometryCollection"===oFeature.geometry.type?oFeature.geometry.geometries||[]:[oFeature.geometry]:null!==ZC._n_(oFeature.geometries)&&(aGeometries=oFeature.geometries),g=0;g<aGeometries.length;g++){aGeometries.length>1&&g>0&&(AAO=sItemId_+"_"+g),_COORDS_[AAO]=[];var oGeometry=aGeometries[g],AF="poly",aCoordinates=[];if("Polygon"===oGeometry.type)aCoordinates=oGeometry.coordinates;else if("MultiPolygon"===oGeometry.type)for(aCoordinates=[],c=0;c<oGeometry.coordinates.length;c++)aCoordinates=aCoordinates.concat(oGeometry.coordinates[c]);else"Point"===oGeometry.type?(AF="point",aCoordinates=[[oGeometry.coordinates]]):"LineString"===oGeometry.type?(AF="line",aCoordinates=[oGeometry.coordinates]):"MultiLineString"===oGeometry.type&&(AF="line",aCoordinates=oGeometry.coordinates);for(var j=0,JB=aCoordinates.length;j<JB;j++){for(var aCoords=aCoordinates[j],k=0,kLen=aCoords.length;k<kLen;k++)_COORDS_[AAO].push(aCoords[k]),aBBox[0]=Math.min(aBBox[0],aCoords[k][0]),aBBox[2]=Math.max(aBBox[2],aCoords[k][0]),aBBox[1]=Math.min(aBBox[1],aCoords[k][1]),aBBox[3]=Math.max(aBBox[3],aCoords[k][1]);j<JB-1&&_COORDS_[AAO].push(null)}var sLabelText=sItemAbbr||sItemName,iSort=0;"line"===AF?iSort=2:"point"===AF&&(iSort=4),_COORDS_[AAO].length&&(zingchart.maps.data[A4C][AAO]={sort:iSort,type:AF,coords:_COORDS_[AAO],tooltip:{text:sItemName},label:{text:sLabelText},style:{}},"poly"===AF&&null!==ZC._n_(O.poly)&&ZC._cp_(O.poly,zingchart.maps.data[A4C][AAO].style),"line"===AF&&null!==ZC._n_(O.line)&&ZC._cp_(O.line,zingchart.maps.data[A4C][AAO].style),"point"===AF&&null!==ZC._n_(O.point)&&ZC._cp_(O.point,zingchart.maps.data[A4C][AAO].style))}}}}var iDiffLon=aBBox[2]-aBBox[0],iDiffLat=aBBox[3]-aBBox[1],iMaxLon=10,iMaxLat=iMaxLon*iDiffLat/iDiffLon,fRatioLon=iMaxLon/iDiffLon,fRatioLat=iMaxLat/iDiffLat,iMax=Math.max(ZC._a_(aBBox[0]),ZC._a_(aBBox[1]),ZC._a_(aBBox[2]),ZC._a_(aBBox[3]));if(iMax>180)for(AAO in zingchart.maps.data[A4C])if(null!==ZC._n_(G=zingchart.maps.data[A4C][AAO].coords))for(c=0,cLen=zingchart.maps.data[A4C][AAO].coords.length;c<cLen;c++)null!==ZC._n_(G[c])&&(G[c][0]=(G[c][0]-aBBox[0])*fRatioLon,G[c][1]=(G[c][1]-aBBox[1])*fRatioLat);zingchart.maps.upgrade(A4C),zingchart.maps[A4C]=function(a,e,o){return zingchart.maps.convert({loader:this,loaderdata:e||{},graphid:"undefined"==typeof a.graphid?0:a.graphid,data:o,id:a.id||A4C,x:"undefined"==typeof a.x?0:a.x,y:"undefined"==typeof a.y?0:a.y,width:"undefined"==typeof a.width?1:a.width,height:"undefined"==typeof a.height?1:a.height,level:"undefined"==typeof a.level?1:a.level,groups:a.groups||[],items:a.items||[],ignore:a.ignore||[],bbox:a.bbox||null,map:zingchart.maps.data[A4C]})},N.callback&&N.callback.call()}}})});