/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.15
*/
zingchart.setModule("dragging"),zingchart.bind(null,"node_mouseout",function(){document.body.style.cursor="default"}),zingchart.bind(null,"node_mouseup",function(){document.body.style.cursor="default"}),zingchart.bind(null,"node_click",function(){document.body.style.cursor="default"}),zingchart.bind(null,"node_mousedown",function(o){var r=zingchart.getLoader(o.id),t=zingchart.getGraph(r,o.graphid),e=zingchart.getModules(r);if(-1!==ZC.AV(e,"dragging")){o.ev.preventDefault();var a,s=o.ev.shiftKey,l=!0,c=!1,g=0,u=0,p=0,f=0,h=0,n=o.plotindex,i=o.nodeindex,x=o.value,m=[],e=(t=zingchart.getGraph(r,o.graphid)).getData(),d={},b=(e.options&&(d=e.options.dragging||e.options),zingchart.exec(o.id,"getobjectinfo",{object:"plot",plotindex:o.plotindex}));if(b.xdata.dragging){var _=0,v=(typeof d[ZC._[12]]!==ZC._[31]&&(_=parseInt(d[ZC._[12]],10)),typeof b.xdata["dragging-decimals"]!==ZC._[31]&&(_=parseInt(b.xdata["dragging-decimals"],10)),null),z=null;typeof b.xdata["dragging-min-value"]!==ZC._[31]&&(v=parseFloat(b.xdata["dragging-min-value"])),typeof b.xdata["dragging-max-value"]!==ZC._[31]&&(z=parseFloat(b.xdata["dragging-max-value"]));for(var C=0;C<b.scales.length;C++)-1===b.scales[C].indexOf(ZC._[51])&&-1===b.scales[C].indexOf(ZC._[52])||(a=b.scales[C]);var Z={};switch(-1===ZC.AV(["pie","pie3d","nestedpie"],b.type)&&(Z=zingchart.exec(o.id,"getobjectinfo",{object:"scale",name:a})),b.type){case"line":case"area":Z.inversed?document.body.style.cursor="ew-resize":document.body.style.cursor="ns-resize";break;case"hbar":case"hbar3d":case"hbullet":document.body.style.cursor="ew-resize";break;case"pie":case"nestedpie":case"pie3d":case"radar":document.body.style.cursor="move";break;default:document.body.style.cursor="ns-resize"}var y,F,M=1,e=zingchart.exec(o.id,"getobjectinfo",{object:"scale",name:"scale"}),k=(e&&e.sizeFactor&&(M=e.sizeFactor),ZC.A3("#"+o.id+"-top")),m=[].concat(zingchart.exec(o.id,"getseriesvalues",{plotindex:o.plotindex})),A=(zingchart.SKIP.LEGEND=!0,Z[ZC._[20]]),E=function(e){switch(l?(u=e.pageX,g=e.pageY,l=!1):(p=e.pageX-u,f=g-e.pageY),y=e.pageX,F=e.pageY,o.ev.pageX,o.ev.pageY,b.type){case"line":case"area":Z.inversed?(h=p,f=0,A=Z[ZC._[19]]):(h=f,p=0);break;case"hbar":case"hbullet":case"hbar3d":h=p,f=0,A=Z[ZC._[19]];break;case"pie":case"nestedpie":case"pie3d":h=p,A=M*Math.min(Z[ZC._[19]],Z[ZC._[20]])/2-Z.offsetStart-Z.offsetEnd;break;case"radar":var a=[Z.x+Z[ZC._[19]]/2,Z.y+Z[ZC._[20]]/2],t=Math.sqrt((u-k.offset().left-a[0])*(u-k.offset().left-a[0])+(g-k.offset().top-a[1])*(g-k.offset().top-a[1])),a=Math.sqrt((y-k.offset().left-a[0])*(y-k.offset().left-a[0])+(F-k.offset().top-a[1])*(F-k.offset().top-a[1]));h=a-t,A=M*Math.min(Z[ZC._[19]],Z[ZC._[20]])/2-Z.offsetStart-Z.offsetEnd;break;default:h=f,p=0}if(1<Math.abs(h)){c=!0,zingchart.exec(o.id,"setmode",{mode:"static"});var n=zingchart.exec(o.id,"getselection");if(x=-1!==ZC.AV(["pie","pie3d","nestedpie"],b.type)?Math.max(0===_?1:1/_,parseFloat(o.value+h)):b.stacked&&"100%"===b.stackType?parseFloat((o.value+100*h/A).toFixed(_)):parseFloat((o.value+(Z.maxValue-Z.minValue)*h/A).toFixed(_)),s){for(var i=[],d=0;d<m.length;d++)null===ZC._n_(n)||null===ZC._n_(n[o.plotindex])||null!==ZC._n_(n[o.plotindex])&&-1!==ZC.AV(n[o.plotindex],d)?b.stacked&&"100%"===b.stackType?i[d]=parseFloat((m[d]+100*h/A).toFixed(_)):i[d]=parseFloat((m[d]+(Z.maxValue-Z.minValue)*h/A).toFixed(_)):i[d]=m[d],null!==ZC._n_(v)&&(i[d]=Math.max(i[d],v)),null!==ZC._n_(z)&&(i[d]=Math.min(i[d],z));zingchart.exec(o.id,"setseriesvalues",{plotindex:o.plotindex,values:i}),o["zingchart.plugins.dragging.update.type"]="plot",o["zingchart.plugins.dragging.update.values"]=i}else null!==ZC._n_(v)&&(x=Math.max(x,v)),null!==ZC._n_(z)&&(x=Math.min(x,z)),zingchart.exec(o.id,"setnodevalue",{plotindex:o.plotindex,nodeindex:o.nodeindex,value:x}),o["zingchart.plugins.dragging.update.type"]="node",o["zingchart.plugins.dragging.update.value"]=x;zingchart.fireEvent("zingchart.plugins.dragging.update",r,o),zingchart.exec(o.id,"showtooltip",o)}};ZC.A3(document.body).bind(ZC._[48],E),ZC.A3(document.body).bind(ZC._[49],function(e){var a;ZC.A3(document.body).unbind(ZC._[48],E),c&&(l=!0,zingchart.SKIP.LEGEND=!1,zingchart.exec(o.id,"setmode",{mode:""}),s?zingchart.exec(o.id,"update",{}):zingchart.exec(o.id,"setnodevalue",{plotindex:n,nodeindex:i,value:x}),(a=t.AY.A4[n].FM(i))&&a.X6(e,ZC._[49]),zingchart.fireEvent("zingchart.plugins.dragging.complete",r,o),document.body.style.cursor="default"),c=!1})}}});