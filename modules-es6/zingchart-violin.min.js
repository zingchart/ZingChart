/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.15_ES6
*/
zingchart.setModule("violin"),zingchart.plugins.violin={},zingchart.bind(null,"dataparse",function(e,t){var i,n,r,a,l,o,s=zingchart.getLoader(e.id),h=zingchart.getModules(s);if(-1!==ZC.AV(h,"violin"))for(i=0,n=t[ZC._[16]].length;i<n;i++){var c,p,u=t[ZC._[16]][i].type,_=t[ZC._[16]][i];if("scatter"===u)_.type="mixed",c="varea",p="scatter";else{if("hscatter"!==u)return t;_.type="hmixed",c="area",p="hscatter"}t[ZC._[16]][i]["plugin-type"]=u;var v={};_.options&&(v=_.options.violin||_.options),ZC._todash_(v);var d=_[ZC._[11]]||[];for(a=d.length-1;a>=0;a--)d[a].cls&&"zc-violin"===d[a].cls?d.splice(a,1):d[a]["o-values"]&&(d[a][ZC._[5]]=[].concat(d[a]["o-values"]));var g=ZC._f_(ZC._c_(v.jitter,1)),f=ZC._f_(ZC._c_(v["rounding-factor"],1)),C=ZC._f_(ZC._c_(v["mean-factor"],2)),Z=ZC._b_(ZC._c_(v.trim,!1)),m=[];for(a=0;a<d.length;a++){var b={},A=[],x=[],z=d[a][ZC._[5]]||[],M=[],y=[],k={},V=-Number.MAX_VALUE,L=Number.MAX_VALUE;for(o=0;o<z.length;o++){var E,N=z[o];if(-1===ZC.AV(y,N[0])&&y.push(N[0]),f<=0&&(f=1),f<1){var U=1/f;E=Math.round(U*N[1])/U}else E=f*Math.round(N[1]/f);k[N[0]+"/"+E]=ZC._i_(k[N[0]+"/"+E]||"0"),k[N[0]+"/"+E]++,b[N[0]+"/"+E]=b[N[0]+"/"+E]||[],b[N[0]+"/"+E].push(N[1])}d[a].violin&&ZC._todash_(d[a].violin);var X=.05*g;for(l=0;l<y.length;l++){var w=[],j=[];for(var q in V=-Number.MAX_VALUE,L=Number.MAX_VALUE,k){var B=q.split("/"),D=ZC._f_(B[0]),F=ZC._f_(B[1]);if(y[l]===D){var G=k[q];for(r=0;r<G;r++)A.push(b[q][r]),x.push(D),M.push([D-X*G/2+r*X+X/2,F]);w.push([D-X*G/2-1.5*X,F]),j.push([D+X*G/2+1.5*X,F]),V=Math.max(V,F),L=Math.min(L,F)}}if(!Z){var H=.2*(V-L);w.push([y[l],L-H],[y[l],V+H]),j.push([y[l],L-H],[y[l],V+H])}w.sort(function(e,t){return e[1]-t[1]}),j.sort(function(e,t){return t[1]-e[1]});var I,J=[],K=[],O=0,P=Number.MAX_VALUE,Q=-1;for(r=0;r<w.length;r++)0===r||r===w.length-1?(r===w.length-1&&-1!==Q&&(I=j.length-Q-1,J.push([w[Q][0],w[Q][1]]),K.push([j[I][0],j[I][1]])),I=j.length-r-1,J.push([w[r][0],w[r][1]]),K.push([j[I][0],j[I][1]])):(w[r][0]<P&&(P=w[r][0],Q=r),O===C&&(I=j.length-Q-1,J.push([w[Q][0],w[Q][1]]),K.push([j[I][0],j[I][1]]),O=0,P=Number.MAX_VALUE,Q=-1),O++);Z&&(J.unshift([y[l],L]),J.push([y[l],V]),K.unshift([y[l],L]),K.push([y[l],V]));var R={type:c,"ref-value":y[l],cls:"zc-violin","line-width":1,alpha:.25,"line-color":"#666","background-color":"#999",aspect:"spline",monotone:!1,values:J,marker:{type:"none"},"max-trackers":0,"max-nodes":0,"legend-item":{visible:!1},"legend-marker":{visible:!1}};ZC._cp_(v.style,R),ZC._cp_(d[a].violin,R),m.push(R);var S={type:c,"ref-value":y[l],cls:"zc-violin","line-width":1,alpha:.25,"line-color":"#666","background-color":"#999",aspect:"spline",monotone:!1,values:K,marker:{type:"none"},"max-trackers":0,"max-nodes":0,"legend-item":{visible:!1},"legend-marker":{visible:!1}};ZC._cp_(v.style,S),ZC._cp_(d[a].violin,S),m.push(S)}d[a]["data-value"]=A,d[a]["data-key"]=x,d[a]["o-values"]=[].concat(d[a][ZC._[5]]),d[a].type=p,d[a][ZC._[5]]=M}_[ZC._[11]]=[].concat(m).concat(d)}return t}),zingchart.bind(null,"legend_item_click",function(e){var t=zingchart.getLoader(e.id),i=zingchart.getModules(t);if(-1!==ZC.AV(i,"violin")){var n=zingchart.exec(e.id,"getplotlength");zingchart.exec(e.id,e.visible?"hideplot":"showplot",{plotindex:2*(e.plotindex-2*n/3)}),zingchart.exec(e.id,e.visible?"hideplot":"showplot",{plotindex:2*(e.plotindex-2*n/3)+1})}});